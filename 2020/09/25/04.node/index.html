<!DOCTYPE html>
<html>
    <!-- Head -->
    
  

<head>
	<title>Node入门 -  hi 风清</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="keywords" content="hi 风清,hexo-theme-dearmsdan一款Hexo主题宝钻蓝色,It gives people a sense of emptiness,hexo简约主题,HEXO,dearmsdan.com" />
	<meta name="description" content="It gives people a sense of emptiness">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="shortcut icon" href="/logo.png" type="image/png" />
	
	
		 
		
	
	
	<link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_1605171_5fpik914nu9.css">
	
	<link rel="stylesheet" type="text/css" href="/css/bootstrap-3.3.4.css">
	
<link rel="stylesheet" href="/css/style.css">

	
	<link rel="stylesheet" type="text/css" href="/css/avatar_user.css">
	
	<link rel="stylesheet" type="text/css" href="/css/social/social.css">
	
	<link rel="stylesheet" type="text/css" href="/css/navEffect.css">
	
	<link rel="stylesheet" href="/resources/dearmsdan_link/link.css">
	
	<link rel="stylesheet" type="text/css" href="/css/post_content.css">
	
	
	<script src="/js/jquery1.10.2.min.js"></script>
	
<script src="/js/app.js"></script>

	<script src="/js/bootstrap-3.3.4.js"></script>
	
	<script src="/js/s.js"></script>
	
	<script src="/js/jquery.slimscroll.min.js"></script>
	
	<script src="/js/valine.js"></script>
	
	
	<script src="/resources/loadingBar/pace.min.js"></script>
	<script src="/js/headBand.min.js"></script>
	<link rel="stylesheet" href="/resources/loadingBar/flash.css">
	
	
<meta name="generator" content="Hexo 5.2.0"></head>




	
    <body>
		<div id="dearmsdan">
		<!-- Header -->
		
<nav class="navbar navbar-default navbar-fixed-top">
		<div class="brand"> 
			<a>
				<i id="dearmsdan-logo" style="font-size:50px;vertical-align: middle;"
			class="DearMsDanIconFont icon-zh"></i>
				
				
			</a>
			<a href="/">
				<span style="font-size: 20px;">hi 风清</span>
			</a>
		</div>
		<div class="nav-list"> 
			
			<a href="/" title="首页">
				<span>
					首页
				</span>
			</a>
			
			<a href="/about.html" title="关于">
				<span>
					关于
				</span>
			</a>
			
			<a href="/valine.html" title="留言板">
				<span>
					留言板
				</span>
			</a>
			
			<a href="/link.html" title="友情链接">
				<span>
					友情链接
				</span>
			</a>
			
		</div>
	
	
      <div class="mobile">
        <div class="mobile-inner">
          <div class="mobile-inner-header">
            <div class="mobile-inner-header-icon mobile-inner-header-icon-out">
				<span></span><span></span>
			  </div>
          </div>
         	<div class="mobile-inner-nav"> 
				
				<a href="/" title="首页">
					<span>
						首页
					</span>
				</a>
				
				<a href="/about.html" title="关于">
					<span>
						关于
					</span>
				</a>
				
				<a href="/valine.html" title="留言板">
					<span>
						留言板
					</span>
				</a>
				
				<a href="/link.html" title="友情链接">
					<span>
						友情链接
					</span>
				</a>
				
			</div>
        </div>
    </div>
	
<script>
	$(window).load(function () {
	  $(".mobile-inner-header-icon").click(function(){
	  	$(this).toggleClass("mobile-inner-header-icon-click mobile-inner-header-icon-out");
	  	$(".mobile-inner-nav").slideToggle(250);
	  });
	  $(".mobile-inner-nav a").each(function( index ) {
	  	$( this ).css({'animation-delay': (index/10)+'s'});
	  });
	});
</script>
	
	
	
	
	<div class="container-fluid">
		<div class="navbar-btn" style="padding: 0; padding-top: 10px;">
			<button type="button" class="btn-toggle-fullwidth btn-toggle-mx">
				<i class="DearMsDanIconFont">&#xe623;</i>
			</button>
		</div>
	</div>
</nav>



<div id="sidebar-nav" class="sidebar">

<div class="dearmsdan-bg">
	<div class="dearmsdano div_bg"></div>		
</div>


		<div class="sidebar-scroll">
			<div class="sidebar-author">
				<a href="/">
					
						<img src="/Pexels.gif">
						<img src="/logo.png">
					
				</a>
			</div>
			<nav>
				
				<div class="dearmsdan-count">
					<span>文章</span>12
					<span>标签</span>12
					<span>分类</span>0
				</div>		
			<div class="social-btns">
				
				
					<a target="_blank" class="btn GitHub" href="https://github.com/fengqing7511/">
						
            		<i class="DearMsDanIconFont icon-git"></i>
						
        			</a>
				
					<a target="_blank" class="btn email" href="mailto:kangyue7511@163.com">
						
            		<i class="DearMsDanIconFont icon-youxiang"></i>
						
        			</a>
				
					<a target="_blank" class="btn netease" href="https://music.163.com/">
						
            		<i class="DearMsDanIconFont icon-netease"></i>
						
        			</a>
				
					<a target="_blank" class="btn qq" href="https://wpa.qq.com/msgrd?v=3&uin=2646405301&site=qq&menu=yes">
						
            		<i class="DearMsDanIconFont icon-qq"></i>
						
        			</a>
				
					<a target="_blank" class="btn weibo" href="https://weibo.com/">
						
            		<i class="DearMsDanIconFont icon-weibo"></i>
						
        			</a>
				
				</div>
				
		 
				
		
				<ul class="nav">	
					<li>
						<a target="_self" href="/" class="iframe_link active"><span>首页</span>
						</a>
					</li>
					
					<li>
						<a id="axis" target="_self" href="/axis.html" class="nav-togg">
							<span>时间轴</span>
						</a>
					</li>
					
					
					

					  
					  



					  
					  


  <li><a href="javascript:;" class="nav-togg" target="_self"  ><span>标签</span>
	  </a>
	  
    <div>
      <ul>
          <li>
			  <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/ES6-Express/" style="font-size: 10px;">ES6  Express</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/Node/" style="font-size: 10px;">Node</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/React-AntDesignPro/" style="font-size: 10px;">React  AntDesignPro</a> <a href="/tags/React-Umi-Dva/" style="font-size: 10px;">React  Umi  Dva</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F-uni-app/" style="font-size: 10px;">小程序  uni-app</a>
          </li>
      </ul>
    </div>
	  
    
  </li>

					  
					  

  <li>
	  <a href="javascript:;" class="nav-togg" target="_self" ><span>文章归档</span>
	  </a>
    <div>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li></ul>
    </div>
  </li>


					  
					  


  <li>
	  <a href="javascript:;" class="nav-togg" target="_self" ><span>最新文章</span>
	  </a>
    <div>
      <ul>
        
          <li>
            <a href="/2020/11/02/01.typescript/">TypeScript</a>
          </li>
        
          <li>
            <a href="/2020/10/20/02.es6/">ES6介绍</a>
          </li>
        
          <li>
            <a href="/2020/10/10/03.JavaScript%E5%9F%BA%E7%A1%80/">JavaScript基础</a>
          </li>
        
          <li>
            <a href="/2020/09/25/04.node/">Node入门</a>
          </li>
        
          <li>
            <a href="/2020/09/03/05.express/">Express</a>
          </li>
        
      </ul>
    </div>
  </li>

					  
					
					
					
					
					
				</ul>
			</nav>
		</div>
</div>











				
	
	<style>
/* CSS */
.canvas {
    position:fixed;
    width: 1920px;
    height: 862px;
    left: -360px;
    top: 0;
    z-index: -1;
}
	</style>
<canvas class="canvas dearmsdan-canvas" width="1920" height="862"></canvas>
<canvas class="canvas dearmsdan-festival dearmsdan-canvas" width="1920" height="862"></canvas>












<div class="dearmsdan-bg">
	<div class="div_bg"></div>		
</div>




<script>
    //background-image: url(https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302);
</script>
			<div class="main">
				<div class="main-content">
					



<style>
	#dearmsdanPost:hover{
   		    background-color: rgba(255, 255, 255, 0.5)!important;
	}	
</style>
<div class="dearmsdan">
	<div class="dearmsdan-post" id="dearmsdanPost">
		<div class="dearmsdan-title">
			<h1>Node入门</h1>
		</div>
	  <div id="post" class="dearmsdan-post-Statistics">
            <a>2020年09月25日</a>
		  	<a class="post-count">99 字</a>
		
		
		  <a class=" -none-link" href="/tags/Node/" rel="tag">Node</a>
		
	  </div>
		
		
<div id="modal" style="display:none">

<aside id="article-toc" class="fixed-toc">
    <div id="article-toc-inner">
        <strong class="sidebar-title">目录</strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80"><span class="toc-text">1.服务端开发基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Web%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8"><span class="toc-text">1.1 Web开发入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88"><span class="toc-text">1.2 需要什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E8%BF%98%E9%9C%80%E8%A6%81%E4%BB%80%E4%B9%88"><span class="toc-text">1.3 还需要什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-text">1.4 网络基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-IP%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.4.1 IP介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E5%B1%80%E5%9F%9F%E7%BD%91IP-%E5%9C%B0%E5%9D%80"><span class="toc-text">a) 局域网IP 地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E5%85%AC%E7%BD%91IP%E5%9C%B0%E5%9D%80"><span class="toc-text">b) 公网IP地址</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-%E5%9F%9F%E5%90%8D"><span class="toc-text">1.4.2. 域名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-DNS%E4%B8%8EHosts%E6%96%87%E4%BB%B6"><span class="toc-text">1.4.3. DNS与Hosts文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-4-%E7%AB%AF%E5%8F%A3"><span class="toc-text">1.4.4. 端口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-5-URL%E5%92%8CURI"><span class="toc-text">1.4.5. URL和URI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E6%90%AD%E5%BB%BA-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">1.5 搭建 Web 服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-Web-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BD%AF%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.5.1  Web 服务器软件介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-Web%E6%9C%8D%E5%8A%A1%E8%BD%AF%E4%BB%B6-apache"><span class="toc-text">1.5.2 Web服务软件-apache</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-apache%E5%AE%89%E8%A3%85"><span class="toc-text">a) apache安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E6%8F%90%E4%BE%9B-Web-%E6%9C%8D%E5%8A%A1"><span class="toc-text">b) 提供 Web 服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E9%85%8D%E7%BD%AE-Apache"><span class="toc-text">c) 配置 Apache</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-%E7%9B%91%E5%90%AC%E7%AB%AF%E5%8F%A3"><span class="toc-text">a. 监听端口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-%E7%BD%91%E7%AB%99%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="toc-text">b. 网站根目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c-%E9%BB%98%E8%AE%A4%E6%96%87%E6%A1%A3"><span class="toc-text">c. 默认文档</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#d-%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA"><span class="toc-text">d. 虚拟主机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-3-Web%E6%9C%8D%E5%8A%A1%E8%BD%AF%E4%BB%B6-%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83"><span class="toc-text">1.5.3 Web服务软件-集成环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E5%85%81%E8%AE%B8%E6%89%80%E6%9C%89%E8%AF%B7%E6%B1%82"><span class="toc-text">a) 允许所有请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E9%85%8D%E7%BD%AE%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA"><span class="toc-text">b) 配置虚拟主机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-6-%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E6%B5%81%E7%A8%8B"><span class="toc-text">1.6 请求响应流程</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Node%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.Node介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Javascript%E5%9B%9E%E9%A1%BE"><span class="toc-text">2.1 Javascript回顾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%88%9D%E8%AF%86Nodejs"><span class="toc-text">2.2 初识Nodejs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Node-js%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">2.3 Node.js的应用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-node-js-%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%96%99"><span class="toc-text">2.4 node.js 学习资料</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-CMD%E7%BB%88%E7%AB%AF%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">2.5.CMD终端基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E6%89%93%E5%BC%80%E5%BA%94%E7%94%A8"><span class="toc-text">2.5.1 打开应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">2.5.2 常用命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-Node-js%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-text">2.6.Node.js的安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-%E6%99%AE%E9%80%9A%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-text">2.6.1 普通安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-%E5%A4%9A%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-text">2.6.2 多版本安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-nvm%E5%B8%B8%E7%94%A8%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-text">2.6.3 nvm常用的命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-Node-js%E5%B8%B8%E7%94%A8API"><span class="toc-text">3.Node.js常用API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-HelloWorld"><span class="toc-text">3.1 HelloWorld</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="toc-text">3.2 文件操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-%E6%9F%A5%E7%9C%8B%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81-fs-stat"><span class="toc-text">3.2.1 查看文件状态 fs.stat()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6-fs-readFile"><span class="toc-text">3.3.2 读取文件 fs.readFile()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6-fs-writeFile"><span class="toc-text">3.3.3 写入文件 fs.writeFile()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-4-%E6%96%87%E4%BB%B6%E6%B5%81%E6%93%8D%E4%BD%9C-stream"><span class="toc-text">3.3.4 文件流操作 stream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-5-%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C-promise"><span class="toc-text">3.3.5 文件操作-promise</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E8%B7%AF%E5%BE%84%E6%93%8D%E4%BD%9C"><span class="toc-text">3.3 路径操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">3.3.1 基本操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%92%8C%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">3.4.2 绝对路径和相对路径</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-URL%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-text">3.4 URL和对象的转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-url-parse%E5%92%8Curl-format"><span class="toc-text">3.4.1 url.parse和url.format</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-querystring-parse%E5%92%8Cquerystring-stringify"><span class="toc-text">3.4.2 querystring.parse和querystring.stringify</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E7%9B%AE%E5%BD%95%E6%93%8D%E4%BD%9C"><span class="toc-text">3.5 目录操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-node%E4%B8%AD%E7%9A%84REPL"><span class="toc-text">3.6 node中的REPL</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-Node%E5%92%8CHTTP"><span class="toc-text">4.Node和HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-HTTP%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D"><span class="toc-text">4.1 HTTP协议介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E5%AE%9A%E4%B9%89"><span class="toc-text">4.1.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-HTTP%E5%8D%8F%E8%AE%AE%E7%BA%A6%E5%AE%9A%E5%86%85%E5%AE%B9"><span class="toc-text">4.1.2 HTTP协议约定内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-HTTP%E5%8D%8F%E8%AE%AE%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-text">4.1.3 HTTP协议工作流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-4-HTTP%E5%8D%8F%E8%AE%AE%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-text">4.1.4 HTTP协议的三次握手</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-5-HTTP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-text">4.1.5 HTTP协议的特点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-HTTP%E5%8D%8F%E8%AE%AE%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">4.2 HTTP协议核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-text">4.2.1  请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-text">4.2.2 响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-text">4.2.3 响应状态码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-HTTPS"><span class="toc-text">4.2.4 HTTPS</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E4%BD%BF%E7%94%A8Node%E6%90%AD%E5%BB%BAHTTP%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-text">4.3 使用Node搭建HTTP服务器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">4.3.1 基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E6%A0%B9%E6%8D%AE%E8%AF%B7%E6%B1%82%E5%A4%84%E7%90%86%E5%93%8D%E5%BA%94"><span class="toc-text">4.3.2 根据请求处理响应</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-%E5%93%8D%E5%BA%94%E5%AE%8C%E6%95%B4%E9%A1%B5%E9%9D%A2"><span class="toc-text">4.3.3 响应完整页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-4-%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E4%BD%93"><span class="toc-text">4.3.4 设置响应体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-5-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">4.3.5 重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%8F%82%E6%95%B0%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">4.4 参数的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-GET%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">4.4.1 GET请求参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-POST%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0"><span class="toc-text">4.4.2 POST请求参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Node%E6%A8%A1%E5%9D%97%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">5.Node模块系统的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-node-js%E4%B8%AD%E6%A8%A1%E5%9D%97%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-text">5.1 node.js中模块的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E7%B3%BB%E7%BB%9F%E6%A0%B8%E5%BF%83%E6%A8%A1%E5%9D%97"><span class="toc-text">5.2 系统核心模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9D%97"><span class="toc-text">5.3 用户自定义模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD"><span class="toc-text">5.3.1 模块的加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AF%BC%E5%87%BA"><span class="toc-text">5.3.2 模块的导出</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-text">6.模块化规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97"><span class="toc-text">6.1 为什么要使用模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-AMD"><span class="toc-text">6.2 AMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-AMD%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83"><span class="toc-text">6.2.1 AMD模块规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-AMD%E6%A8%A1%E5%9D%97%E6%A1%88%E4%BE%8B"><span class="toc-text">6.2.2 AMD模块案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-CMD"><span class="toc-text">6.3 CMD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-1-CMD%E6%A8%A1%E5%9D%97%E8%A7%84%E8%8C%83"><span class="toc-text">6.3.1 CMD模块规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-2-CMD%E6%A8%A1%E5%9D%97%E6%A1%88%E4%BE%8B"><span class="toc-text">6.3.2 CMD模块案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-4-AMD%E5%92%8CCMD%E5%8C%BA%E5%88%AB"><span class="toc-text">6.4 AMD和CMD区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-5-CommonJS"><span class="toc-text">6.5 CommonJS</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-1-CommonJS%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-text">6.5.1 CommonJS模块化规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-2-%E5%AF%BC%E5%87%BA%E5%8D%95%E4%B8%AA%E5%92%8C%E5%A4%9A%E4%B8%AA%E6%88%90%E5%91%98"><span class="toc-text">6.5.2 导出单个和多个成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-3-%E6%A8%A1%E5%9D%97%E7%9A%84%E7%BC%93%E5%AD%98"><span class="toc-text">6.5.3 模块的缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-4-require%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="toc-text">6.5.4 require加载规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-5-%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0"><span class="toc-text">6.5.5  同步加载与异步函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E5%90%8C%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-text">a) 同步加载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0"><span class="toc-text">b) 异步函数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%8C%85%E7%AE%A1%E7%90%86"><span class="toc-text">7.包管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%8C%85%E8%AF%B4%E6%98%8E%E6%96%87%E4%BB%B6"><span class="toc-text">7.1 包说明文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-package-json"><span class="toc-text">7.1.1 package.json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-package-lock-json"><span class="toc-text">7.1.2 package-lock.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-NPM"><span class="toc-text">7.2 NPM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-%E4%BB%8B%E7%BB%8D"><span class="toc-text">7.2.1 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-NPM%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%EF%BC%9A"><span class="toc-text">7.2.2 NPM常用命令：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-3-NPM%E7%BF%BB%E5%A2%99"><span class="toc-text">7.2.3 NPM翻墙</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-4-NRM%E4%BD%BF%E7%94%A8"><span class="toc-text">7.2.4 NRM使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-5-YARN%E5%B7%A5%E5%85%B7%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">7.2.5 YARN工具基本使用</span></a></li></ol></li></ol></li></ol>
    </div>
</aside>
</div>


		
			<a href="#modal" class="second">
				<div class="i">
						<i style="font-size:20px" class="DearMsDanIconFont icon-sousuo">
						<span style="font-size:0px"><br/>目<br/>录</span>
						</i>
				</div>
			</a>




<script>
	$(".second .i").mouseover(function(){
  $(".second .i span").css("font-size","18px");
});
	$(".second .i").mouseleave(function(){
  $(".second .i span").css("font-size","0px");
});
</script>











		<div>
			  <article>
				<h1 id="1-服务端开发基础"><a href="#1-服务端开发基础" class="headerlink" title="1.服务端开发基础"></a>1.服务端开发基础</h1><h2 id="1-1-Web开发入门"><a href="#1-1-Web开发入门" class="headerlink" title="1.1 Web开发入门"></a>1.1 Web开发入门</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Web服务软件分为两种</span></span><br><span class="line"><span class="comment">//1. C/S (Client - Server  客户端-服务器端)</span></span><br><span class="line">典型应用：QQ软件 ，飞秋，红蜘蛛。</span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>）必须下载特定的客户端程序。</span><br><span class="line"><span class="number">2</span>）服务器端升级，客户端升级。</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. B/S （Broswer -Server 浏览器端- 服务器端）</span></span><br><span class="line">典型应用： 腾讯官方（www.qq.com）  <span class="number">163</span>新闻网站， </span><br><span class="line">特点：</span><br><span class="line"><span class="number">1</span>）不需要安装特定的客户端（只需要安装浏览器即可！！）</span><br><span class="line"><span class="number">2</span>）服务器端升级，浏览器不需要升级！！！！</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h2 id="1-2-需要什么"><a href="#1-2-需要什么" class="headerlink" title="1.2 需要什么"></a>1.2 需要什么</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">网页开发技术（硬性）</span><br><span class="line"></span><br><span class="line">HTML —— 网页内容结构（GUI）</span><br><span class="line">CSS —— 网页外观样式（GUI）</span><br><span class="line">JavaScript —— 编程语言（可以用于调用浏览器提供的 API）</span><br><span class="line"></span><br><span class="line">Web APIs —— 网页交互（界面功能）</span><br><span class="line">jQuery —— 便捷手段（糖果而已，不是必要的）</span><br><span class="line">编程能力 / 编程思想 / 解决问题的思路（软性）</span><br></pre></td></tr></table></figure>

<pre><code>至此，我们已经可以独立完成网页开发了，具体能完成的东西就是一个一个的网页，而且还能给这个页面加上一些动态的交互。但是这距离成为一个网站还有一些路要走。</code></pre>
<h2 id="1-3-还需要什么"><a href="#1-3-还需要什么" class="headerlink" title="1.3 还需要什么"></a>1.3 还需要什么</h2><pre><code>想要完成完整的 Web 网站，还需要学习什么？</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">搭建 WEB 服务器（提供网站服务的机器）</span><br><span class="line">HTTP（浏览器与服务端的通讯协议）</span><br><span class="line">服务端开发（动态网页技术）</span><br><span class="line">数据库操作（服务端存储数据方式）</span><br><span class="line">AJAX（浏览器与服务端的数据交互方式）</span><br></pre></td></tr></table></figure>

<h2 id="1-4-网络基础概念"><a href="#1-4-网络基础概念" class="headerlink" title="1.4 网络基础概念"></a>1.4 网络基础概念</h2><h3 id="1-4-1-IP介绍"><a href="#1-4-1-IP介绍" class="headerlink" title="1.4.1 IP介绍"></a>1.4.1 IP介绍</h3><pre><code>设备在某一个网络中的地址，目前最常见的格式： [0-255].[0-255].[0-255].[0-255] 即为四个 0-255 的数字组</code></pre>
<p>成。<br>    IP作用就是标识一个网络设备（计算机、手机、电视）在某一个具体的网络当中的地址。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//IP4地址：IP地址本质上是一个由32位的二进制数组成的数据。后来为了方便记忆，就把IP4地址切成了4份，每份是8位。</span></span><br><span class="line"><span class="number">00000000</span>-<span class="number">00000000</span>-<span class="number">00000000</span>-<span class="number">00000000</span>  </span><br><span class="line"><span class="number">2</span>^<span class="number">8</span> – <span class="number">2</span>^<span class="number">8</span> -<span class="number">2</span>^<span class="number">8</span> -<span class="number">2</span>^<span class="number">8</span>，大概<span class="number">42</span>亿个，其中<span class="number">30</span>亿在北美，亚洲<span class="number">4</span>亿。<span class="number">2011</span>年初已经用尽。</span><br><span class="line"></span><br><span class="line"><span class="comment">//IP6 ：是一个由128位二进制数组成的数据</span></span><br><span class="line"></span><br><span class="line">Ipconfig ：查看本机ip ，<span class="number">192.168</span><span class="number">.10</span>．<span class="number">1</span></span><br><span class="line">Ping www.baidu.com  ：查看能否连接百度</span><br><span class="line"><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> 是本地回环地址</span><br></pre></td></tr></table></figure>

<h4 id="a-局域网IP-地址"><a href="#a-局域网IP-地址" class="headerlink" title="a) 局域网IP 地址"></a>a) 局域网IP 地址</h4><pre><code>在单个局域网下，结构非常简单，就是我们所连接的网络设备（网关）给我们分配了一个地址，在这个范围之内我们都可以通过这个地址找到我们的这个设备。</code></pre>
<blockquote>
<p>如果设备没有连接任何网络情况下，我们会有一个本地回环地址 127.0.0.1</p>
</blockquote>
<p><img src="media/p7.png"></p>
<h4 id="b-公网IP地址"><a href="#b-公网IP地址" class="headerlink" title="b) 公网IP地址"></a>b) 公网IP地址</h4><pre><code>IP是互联网的唯一定位地址，作用相当于门牌号，比如有2000台电脑，电脑通过[路由交换机](https://www.baidu.com/s?wd=%E8%B7%AF%E7%94%B1%E4%BA%A4%E6%8D%A2%E6%9C%BA&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao)形成一个局域网，就像一个大楼，大楼内部找人，有301室，302室。但是对外面的人来说，是无法进行、获取到内部地址的，她们找查找的时候只能找到XX大楼，大楼的大门号就相当于[公网IP](https://www.baidu.com/s?wd=%E5%85%AC%E7%BD%91IP&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao)

所以同一个路由器交换机下的公网ip都是一致的。同一wifi下算是组建了一个小型局域网，路由器算作一个网关，路由器将有唯一的IP对外网进行转发传输，而外网数据在到达路由器后，由于在此局域网的用户IP是唯一的，路由器可以轻松进行进一步ARP地址匹配数据包进行连接传输，每位用户在路由器内部拥有唯一的ARP指向区，不会造成混乱。</code></pre>
<p><img src="media/ip01.png"></p>
<h3 id="1-4-2-域名"><a href="#1-4-2-域名" class="headerlink" title="1.4.2. 域名"></a>1.4.2. 域名</h3><pre><code>由于 IP 地址都是没有规律的一些数字组成的，很难被人记住，不利于广泛传播，所以就有人想出来要给 IP 起名字（别名）。</code></pre>
<blockquote>
<p>域名是需要花钱注册的</p>
</blockquote>
<h3 id="1-4-3-DNS与Hosts文件"><a href="#1-4-3-DNS与Hosts文件" class="headerlink" title="1.4.3. DNS与Hosts文件"></a>1.4.3. DNS与Hosts文件</h3><pre><code>通过宽带运营商提供的服务器解析一个域名背后对应的 IP，这个过程叫做 DNS 寻址，帮你完成 DNS 寻址过程的服务器叫做 DNS 服务器。

DNS寻址过程：浏览器---&gt;操作系统缓存----&gt;本机hosts文件---&gt;DNS服务器

操作系统在发起对 DNS 服务器的查询请求之前，会优先检查浏览器缓存的DNS和本机的 hosts 文件。如果有包含了对当前需要解析的域名的配置，则不再发起对 DNS 服务器的请求，直接使用浏览器缓存或者本机hosts文件中的配置。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.浏览器缓存中DNS查看</span></span><br><span class="line">chrome:<span class="comment">//net-internals/#dns</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.hosts文件所在路径：</span></span><br><span class="line">Windows： C:\Windows\System32\drivers\etc\hosts</span><br><span class="line">macOS： /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.注意：</span></span><br><span class="line">本机的 hosts 文件配置只能到影响本机的 DNS 寻址</span><br><span class="line">只有以管理员权限运行的编辑器才有权利修改 hosts 文件</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.常用DNS服务器</span></span><br><span class="line">北京联通      <span class="number">202.106</span><span class="number">.0</span><span class="number">.20</span>  	<span class="number">202.106</span><span class="number">.196</span><span class="number">.115</span></span><br><span class="line">阿里          <span class="number">223.5</span><span class="number">.5</span><span class="number">.5</span>  <span class="number">223.6</span><span class="number">.6</span><span class="number">.6</span>              </span><br><span class="line"><span class="number">114</span>          <span class="number">114.114</span><span class="number">.114</span><span class="number">.114</span>   </span><br><span class="line"><span class="comment">//114是国内移动、电信和联通通用的DNS，手机和电脑端都可以使用，干净无广告，解析成功率相对来说更高，国内用户使用的比较多，而且速度相对快、稳定，是国内用户上网常用的DNS</span></span><br><span class="line">南方电信      <span class="number">180.153</span><span class="number">.225</span><span class="number">.136</span></span><br><span class="line">百度          <span class="number">180.76</span><span class="number">.76</span><span class="number">.76</span>                 </span><br><span class="line"><span class="number">360</span>          <span class="number">101.226</span><span class="number">.4</span><span class="number">.5</span></span><br><span class="line">谷歌          <span class="number">8.8</span><span class="number">.8</span><span class="number">.8</span>                </span><br></pre></td></tr></table></figure>

<p><img src="media/d10.png"></p>
<h3 id="1-4-4-端口"><a href="#1-4-4-端口" class="headerlink" title="1.4.4. 端口"></a>1.4.4. 端口</h3><pre><code>计算机本身是一个封闭的环境，就像是一个大楼，如果需要有数据通信往来，必须有门，这个门在术语中就叫端口。

端口号是每个应用程序在终端设备上的唯一标识。</code></pre>
<blockquote>
<p>一般我们把“占门”的过程叫做监听</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -an                   查看本机端口使用情况</span><br><span class="line">netstat -aon|findstr <span class="string">&quot;80&quot;</span>     查看指定端口的情况</span><br><span class="line">taskkill /pid <span class="number">4136</span> -t -f      根据pid杀死指定的进程</span><br></pre></td></tr></table></figure>



<p><img src="media/p9.png"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3</span></span><br><span class="line">https:<span class="comment">//baike.baidu.com/item/%E7%AB%AF%E5%8F%A3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//端口号的取值范围0~65535 ，1024以下端口(0~1023端口)被系统占用，不可以使用。</span></span><br><span class="line"><span class="number">1024</span>~<span class="number">49151</span>端口是系统绑定的松散服务（其中一些端口是可以使用的）。</span><br><span class="line"><span class="number">49152</span>~<span class="number">65535</span> 是可以使用的端口。</span><br><span class="line"></span><br><span class="line"><span class="comment">//常用端口：</span></span><br><span class="line">Mysql:<span class="number">3306</span></span><br><span class="line">Oracle:<span class="number">1521</span> </span><br><span class="line">Tomcat:<span class="number">8080</span></span><br><span class="line">QQ:<span class="number">4000</span></span><br><span class="line">FeiQ:<span class="number">2425</span></span><br><span class="line">http:<span class="number">80</span></span><br><span class="line">https:<span class="number">443</span></span><br></pre></td></tr></table></figure>

<h3 id="1-4-5-URL和URI"><a href="#1-4-5-URL和URI" class="headerlink" title="1.4.5. URL和URI"></a>1.4.5. URL和URI</h3><pre><code>URL（Uniform Resource Locator），统一资源定位符，通俗点来说就是表示网络当中某一个网页的完整访问地址，它具有一定的格式：</code></pre>
<p><img src="media/p10.png"></p>
<pre><code>URI：统一资源标识符，用来标识互联网上的资源。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>完全URI的组成： scheme:<span class="comment">//authority/path?query#fragment。只要满则这个格式的都是URI</span></span><br><span class="line"><span class="number">2.</span>URI可以分为绝对的URI和相对的URI</span><br><span class="line">  <span class="number">2.1</span> 绝对的URI：需要有完整的格式(除了scheme和authority必须要有，其余可以省略)。其实这边就是URL了。</span><br><span class="line">  <span class="number">2.2</span> 相对的URI：不以scheme开始的非完整格式(比如在网页开发中会用到很多相对URI)。</span><br><span class="line"></span><br><span class="line"><span class="comment">//URI和URL区别</span></span><br><span class="line"><span class="number">1.</span>URI类只标识资源,URL类既能标识资源,又能获取资源</span><br><span class="line"><span class="number">2.</span>URL是URI的子集</span><br><span class="line"><span class="number">3.</span>URL具有唯一性</span><br></pre></td></tr></table></figure>

<h2 id="1-5-搭建-Web-服务器"><a href="#1-5-搭建-Web-服务器" class="headerlink" title="1.5 搭建 Web 服务器"></a>1.5 搭建 Web 服务器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">服务器（提供服务）指的就是一台安装特定的软件的公共计算机，用于专门用于提供特定的服务。</span><br><span class="line">按照服务类型的不同，又划分为：Web服务器、数据库服务器、邮件服务器等等。</span><br><span class="line"></span><br><span class="line">客户端（使用服务）指的是在一次服务过程中使用这个服务的设备（网络端点）。</span><br><span class="line">目前咱们最常见的客户端就是浏览器</span><br></pre></td></tr></table></figure>

<pre><code>我们手头上的这些网页，如果想要成为一个网站，首先要完成的第一件事就是有一台公共的 Web 服务器，把这一系列的页面放到这台 Web 服务器上，让用户可以通过服务器的地址访问到这些网页</code></pre>
<p><img src="media/p1.png"></p>
<pre><code>我们手头上的电脑都可以是一台服务器，因为服务器是一个相对的概念，只要能提供服务就可以是一个服务器（提供服务的时候就是服务端，使用服务的时候就是客户端）。

既然服务器就是安装特定的软件的计算机，那么要让自己的成为 Web 服务器就是要安装一个 Web 服务器软件。</code></pre>
<h3 id="1-5-1-Web-服务器软件介绍"><a href="#1-5-1-Web-服务器软件介绍" class="headerlink" title="1.5.1  Web 服务器软件介绍"></a>1.5.1  Web 服务器软件介绍</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//web服务软件的作用：把本地的资源共享给外部访问。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//常用的web服务软件</span></span><br><span class="line">Apache ······························································· PHP</span><br><span class="line">IIS ···································································ASP.NET</span><br><span class="line">Tomcat(WebLogic/WebSphere/JBoss) ····································· Java</span><br><span class="line">Node ···································································不需要安装软件</span><br></pre></td></tr></table></figure>

<h3 id="1-5-2-Web服务软件-apache"><a href="#1-5-2-Web服务软件-apache" class="headerlink" title="1.5.2 Web服务软件-apache"></a>1.5.2 Web服务软件-apache</h3><h4 id="a-apache安装"><a href="#a-apache安装" class="headerlink" title="a) apache安装"></a>a) apache安装</h4><pre><code>这里我们选择一个比较常用的 Web 服务器软件：Apache HTTP Server。</code></pre>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">由于最新的 Apache 已经不提供 Windows 的安装版本了，所以我们这里使用的是解压版。</span><br><span class="line"></span><br><span class="line">下载地址：https:<span class="comment">//www.apachelounge.com/download/</span></span><br><span class="line">使用说明：https:<span class="comment">//httpd.apache.org/docs/current/platform/windows.html</span></span><br></pre></td></tr></table></figure>

<pre><code>安装方式如下，先解压到纯英文路径的文件夹，然后执行以下命令：</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 注意：需要使用管理员身份运行命令行！！！</span><br><span class="line"># 切换到 Apache 解压路径中的 bin 目录</span><br><span class="line">$ cd &lt;解压目录&gt;/bin</span><br><span class="line"># 安装 Apache 服务，‐n 参数是指定服务名称</span><br><span class="line">$ httpd.exe -k install -n <span class="string">&quot;Apache&quot;</span></span><br><span class="line"># 如果需要卸载 Apache，可以执行以下命令</span><br><span class="line">$ httpd.exe -k uninstall -n <span class="string">&quot;Apache&quot;</span></span><br></pre></td></tr></table></figure>

<pre><code>执行安装命令过后会报一个错，原因是默认的配置文件有问题，需要先调整一下配置文件 conf/httpd.conf ，才能正常启动服务。</code></pre>
<p><img src="media/p2.png"></p>
<pre><code>找到 Apache 解压目录中的 conf 目录下的 httpd.conf 文件，定位到 37 行，将 c:/Apache24 改为解压目录，我这里解压到路径是 C:/Develop/apache ，所以我这里修改</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p3.png"></p>
<pre><code>修改完以后，执行以下命令重新测试配置文件是否通过。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ httpd.exe ‐t</span><br></pre></td></tr></table></figure>

<pre><code>这里任然报错：</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p4.png"></p>
<pre><code>通过错误信息得知，这里是因为另外一个地方配置的目录不存在导致的，所以接着调整 246 行的 DocumentRoot选项：</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p5.png"></p>
<pre><code>随即，我们发现这个配置文件中有很多默认配置选项中的路径都是 c:/Apache24 ，所以我们批量都修改为我们解压的目录路径。
然后重新执行 httpd.exe -t 测试配置文件，这时候应该提示 Syntax OK 。</code></pre>
<blockquote>
<p>如果有关于 ServerName 的警告提示，不用管它，暂时还不会影响我们接下来的使用和操作。</p>
</blockquote>
<pre><code>接着运行以下命令重新启动 Apache 服务：</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 注意：需要使用管理员身份运行命令行！！！</span><br><span class="line">$ httpd.exe -k start -n <span class="string">&quot;Apache&quot;</span></span><br><span class="line"># 重新启动 Apache 服务</span><br><span class="line">$ httpd.exe -k restart -n <span class="string">&quot;Apache&quot;</span></span><br><span class="line"># 停止 Apache 服务</span><br><span class="line">$ httpd.exe -k stop -n <span class="string">&quot;Apache&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>回到浏览器中，地址栏输入：http://localhost/，回车访问，这时正常应该看到 It works!</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p6.png"></p>
<h4 id="b-提供-Web-服务"><a href="#b-提供-Web-服务" class="headerlink" title="b) 提供 Web 服务"></a>b) 提供 Web 服务</h4><pre><code>启动 Apache，让别人可以使用你机器上安装的 Apache 提供的 Web 服务，访问你机器上的网站。这种情况下你的机器就是服务器，别人的机器就是客户端。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注意：</span></span><br><span class="line"><span class="number">1.</span>确保配置文件语法检查通过</span><br><span class="line"><span class="number">2.</span>确保 <span class="number">80</span> 端口没有被其他程序占用</span><br><span class="line"><span class="number">3.</span>确保防火墙允许 <span class="number">80</span> 端口的请求，或者干脆关掉防火墙</span><br><span class="line"><span class="number">4.</span>如果出现 Forbidden 情况，确保配置文件 httpd.conf 中 <span class="number">247</span> 行（ DocumentRoot 之后）的 Directory 配</span><br><span class="line">置的与 DocumentRoot 路径相同</span><br><span class="line"><span class="number">5.</span>我们在开发阶段大多数都是自己访问自己机器上的网站，那这种情况下，我们既是服务端又是客户端。对于新手来说，最常见的问题就是分不清楚哪是客户端应该有的，哪是服务端应该有的。这种时候一定要保持清醒，客户端局限在浏览器窗口，代码以及 Apache 相关的文件和配置都是放在服务端的</span><br></pre></td></tr></table></figure>

<h4 id="c-配置-Apache"><a href="#c-配置-Apache" class="headerlink" title="c) 配置 Apache"></a>c) 配置 Apache</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">配置文档：http:&#x2F;&#x2F;httpd.apache.org&#x2F;docs&#x2F;current&#x2F;</span><br><span class="line">配置文件中行首的 # 指的是注释</span><br><span class="line">注意：以下所记录的行号仅供参考，不同版本的配置文件可能不尽相同。</span><br></pre></td></tr></table></figure>

<h5 id="a-监听端口"><a href="#a-监听端口" class="headerlink" title="a. 监听端口"></a>a. 监听端口</h5><pre><code>监听端口可以随意修改为任意一个未被其他程序监听的端口，可以通过设置配置文件 httpd.conf 中的 Listen</code></pre>
<p>指令后面的数字修改。</p>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p12.png"></p>
<h5 id="b-网站根目录"><a href="#b-网站根目录" class="headerlink" title="b. 网站根目录"></a>b. 网站根目录</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">网站根目录就是存放我们网站文件的最顶层目录，通常 URL 中域名后面的第一个斜线对应（映射）的就是网站根目录。</span><br></pre></td></tr></table></figure>

<pre><code>默认 Apache 的网站根目录是安装目录中的 htdocs 文件夹，为了方便对网站文件的管理，一般我们会将其设置在一个自定义目录中（如果你不介意其实不修改也无所谓）。
如果需要设置网站根目录，可以通过修改配置文件 httpd.conf 中的网站根目录选项切换。</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p13.png"></p>
<h5 id="c-默认文档"><a href="#c-默认文档" class="headerlink" title="c. 默认文档"></a>c. 默认文档</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当客户端访问的是一个目录而不是具体文件时，服务端默认返回这个目录下的某个文档（文件），这个文档就称之为默认文档。</span><br></pre></td></tr></table></figure>

<pre><code>配置文件 httpd.conf 的 280 行的 DirectoryIndex ，默认文档可以配置多个（有前到后依次去找，找到为止，如果没找到任何一个则启用目录浏览）：</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p14.png"></p>
<h5 id="d-虚拟主机"><a href="#d-虚拟主机" class="headerlink" title="d. 虚拟主机"></a>d. 虚拟主机</h5><pre><code>如果一台机器上只有一个网站的话，没有任何问题，但是如果想要在一台机器上部署多个站点，就必须通过配置虚拟主机的方式解决。一旦配置虚拟主机之后，**原来的apacke的网站根目录就不能用了**。

由于后期对虚拟主机的配置操作非常常见，所以我们一般将虚拟主机的配置单独放到一个配置文件中，然后</code></pre>
<p>在主配置文件中引入，避免破坏主配置文件中的其他配置。<br>    Include conf/extra/httpd-vhosts.conf 配置的作用就将另外一个配置文件引入（使其生效）</p>
<pre><code>具体的操作方式就是在主配置文件 httpd.conf 的 505 行取消注释：</code></pre>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/08.Node/readme/media/p15.png"></p>
<pre><code>然后找到 Apache 的虚拟主机配置文件，添加一个如下的虚拟主机配置节点，然后重新启动 Apache。</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个文件中有两个默认的示例配置，可以注释掉 (Alt+shif+上下箭头)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:8081&gt; </span><br><span class="line">    DocumentRoot &quot;D:&#x2F;code&quot;</span><br><span class="line">    ServerName mytest.me</span><br><span class="line">	&lt;Directory &quot;D:&#x2F;code&quot;&gt;</span><br><span class="line">		Options FollowSymLinks Indexes </span><br><span class="line">		AllowOverride none</span><br><span class="line">		Require all granted</span><br><span class="line">	&lt;&#x2F;Directory&gt;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;这边要使用mytest.me这个域名来访问，需要修改 hosts 文件，原因很简单：这个域名不是我们自己的，我们没有办法修改这个域名在公网上的 DNS</span><br></pre></td></tr></table></figure>

<p><strong>注意：还需要修改httpd.conf中的</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;Directory&gt;</span><br><span class="line">   AllowOverride none</span><br><span class="line">   # Require all denied</span><br><span class="line">   Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注意</span></span><br><span class="line">如果使用了虚拟主机，则默认必须全使用虚拟主机，即之前的默认网站也必须通过虚拟主机方式配置，否则访问不到。参考：http:<span class="comment">//skypegnu1.blog.51cto.com/8991766/1532454</span></span><br><span class="line"></span><br><span class="line">如果虚拟主机的端口使用的不是 <span class="number">80</span> ，则需要在主配置文件中添加一个对这个端口的监听</span><br></pre></td></tr></table></figure>

<h3 id="1-5-3-Web服务软件-集成环境"><a href="#1-5-3-Web服务软件-集成环境" class="headerlink" title="1.5.3 Web服务软件-集成环境"></a>1.5.3 Web服务软件-集成环境</h3><pre><code>      wamp(windows  apache  mysql  php)

  直接点击安装就可以。

  默认会访问安装目录下的index.html/index.php    </code></pre>
<h4 id="a-允许所有请求"><a href="#a-允许所有请求" class="headerlink" title="a) 允许所有请求"></a>a) 允许所有请求</h4><pre><code>在安装目录的apache下面找到httpd.conf文件修改如下。修改之后需要重启apache，别人就可以通过ip来访问当前主机了。

![1537712690593](media/wamp01.png)</code></pre>
<h4 id="b-配置虚拟主机"><a href="#b-配置虚拟主机" class="headerlink" title="b) 配置虚拟主机"></a>b) 配置虚拟主机</h4><pre><code>有时候我们想要在apache上运行多个站点，这个时候就需要配置虚拟主机

1) 具体的操作方式就是在主配置文件 httpd.conf 的 505 行取消注释：</code></pre>
<p><img src="media/p15.png"></p>
<pre><code>2) 然后找到 Apache 的虚拟主机配置文件，添加一个如下的虚拟主机配置节点(需要确保相关文件夹存在)，然后重新启动 Apache。</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">这个文件中有两个默认的示例配置，可以注释掉 (Alt+shif+上下箭头)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:80&gt;</span><br><span class="line">    #绑定域名</span><br><span class="line">    ServerName localhost</span><br><span class="line">    #默认首页</span><br><span class="line">    DirectoryIndex index.html index.php</span><br><span class="line">    #指定网站根目录</span><br><span class="line">    DocumentRoot &quot;E:&#x2F;wamp&#x2F;Apache2&#x2F;htdocs&quot;</span><br><span class="line">    #指定目录分配权限</span><br><span class="line">    &lt;Directory &quot;E:&#x2F;wamp&#x2F;Apache2&#x2F;htdocs&quot;&gt;</span><br><span class="line">        #没有首页就显示列表（开发阶段可以这样）取值：all none Index</span><br><span class="line">        Options Indexes</span><br><span class="line">        #规定Deny,Allow的执行顺序, Order Deny,Allow ： 先执行Deny，再执行Allow</span><br><span class="line">        Order Deny,Allow</span><br><span class="line">        #全部禁止访问 取值：all none 指定ip</span><br><span class="line">        Deny from All</span><br><span class="line">        #但是，允许自己访问  取值：all none 指定ip</span><br><span class="line">        Allow from 127.0.0.1</span><br><span class="line">    &lt;&#x2F;Directory&gt;</span><br><span class="line">&lt;&#x2F;VirtualHost&gt;</span><br></pre></td></tr></table></figure>

<p><img src="media/wamp03.png"></p>
<ol start="3">
<li>修改C:\Windows\System32\drivers\etc\hosts配置，需要管理员权限</li>
</ol>
<p><img src="media/wamp04.png"></p>
<h2 id="1-6-请求响应流程"><a href="#1-6-请求响应流程" class="headerlink" title="1.6 请求响应流程"></a>1.6 请求响应流程</h2><pre><code> 安装配置完成服务器之后，我们把网页部署到服务器，浏览器通过指定网址访问到的是服务器的资源。这里就是一个简易的网站。</code></pre>
<p><img src="media/p11.png"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. 用户打开浏览器</span><br><span class="line">2. 地址栏输入我们需要访问的网站网址（URL）</span><br><span class="line">3. 浏览器通过 DNS 服务器获取即将访问的网站 IP 地址</span><br><span class="line">4. 浏览器发起一个对这个 IP 的请求</span><br><span class="line">5. 服务端接收到这个请求，进行相应的处理</span><br><span class="line">6. 服务端将处理完的结果返回给客户端浏览器</span><br><span class="line">7. 浏览器将服务端返回的结果呈现到界面上</span><br></pre></td></tr></table></figure>



<h1 id="2-Node介绍"><a href="#2-Node介绍" class="headerlink" title="2.Node介绍"></a>2.Node介绍</h1><h2 id="2-1-Javascript回顾"><a href="#2-1-Javascript回顾" class="headerlink" title="2.1 Javascript回顾"></a>2.1 Javascript回顾</h2><pre><code>前端全栈工程师 ： 全栈就是全干。全栈：前端、后端。

之前学的javascript是运行在浏览器上的脚本语言。包含三个部分：ECMAScript 、BOM、DOM</code></pre>
<h2 id="2-2-初识Nodejs"><a href="#2-2-初识Nodejs" class="headerlink" title="2.2 初识Nodejs"></a>2.2 初识Nodejs</h2><pre><code>Node.js 是一种基于Google的V8引擎的 non-blocking (非阻塞）的event-driven （事件驱动） I/O平台.。简单的说 Node.js 就是运行在服务端的 JavaScript。

Node.js平台使用的开发语言是JavaScript，平台提供了操作系统低层的API，方便做服务器端编程，具体包括文件操作、进程操作、通信操作等系统模块</code></pre>
<blockquote>
<p>作者Ryan Dahl   瑞恩·达尔</p>
<ul>
<li>2004 纽约 读数学博士 </li>
<li>2006 退学到智利 转向开发 </li>
<li>2009.5对外宣布node项目，年底js大会发表演讲 </li>
<li>2010 加入Joyent云计算公司 </li>
<li>2012 退居幕后</li>
</ul>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"># 1.Node.js特点：</span><br><span class="line">①是一个javascript运行环境或者平台(可以解释执行js代码)，不是编程语言也不是js框架</span><br><span class="line">②依赖于Chrome V8引擎进行代码解释</span><br><span class="line">③基于事件驱动</span><br><span class="line">④异步式I/O(非阻塞I/O)</span><br><span class="line">⑤单进程、单线程、基于事件回调</span><br><span class="line">⑥轻量、可伸缩，适用于实时数据交互应用</span><br><span class="line"></span><br><span class="line"># 2.Node.js中包含下面内容：</span><br><span class="line">① Ecmascript(没有BOM和DOM)</span><br><span class="line">② 一些服务器级别的API</span><br><span class="line">    文件读写</span><br><span class="line">    网络服务</span><br><span class="line">    网络通信</span><br><span class="line">    http服务器</span><br><span class="line">③ 在Node.js中使用npm包管理工具来下载和管理package </span><br><span class="line"></span><br><span class="line"># 3.关于v8引擎</span><br><span class="line"><span class="number">1.</span>浏览器内核又可以分成两部分：渲染引擎(layout engineer或者RenderingEngine)和JS引擎。</span><br><span class="line"><span class="number">2.</span>渲染引擎:负责对网页语法的解释（如HTML、JavaScript）并渲染网页。当前主流渲染引擎内核：</span><br><span class="line">	a) firefox使用gecko引擎</span><br><span class="line">　   b) IE使用Trident引擎</span><br><span class="line">　   c) <span class="number">2015</span>年微软推出自己新的浏览器，原名叫斯巴达，后改名edge,使用edge引擎</span><br><span class="line">　   d) opera最早使用Presto引擎，后来弃用</span><br><span class="line">　   e) chrome\safari\opera使用webkit引擎</span><br><span class="line">　   f) <span class="number">13</span>年chrome和opera开始使用Blink引擎</span><br><span class="line"><span class="number">3.</span>JS引擎:最开始渲染引擎和js引擎并没有区分的很明确，后来JS引擎越来越独立，内核就倾向于只指渲染引擎</span><br><span class="line">	<span class="number">1</span> ) Mozilla</span><br><span class="line">         Rhino，由Mozilla基金会管理，开放源代码，完全以Java编写。</span><br><span class="line">         SpiderMonkey，第一款JavaScript引擎，由BrendanEich在NetscapeCommunications时编写，用于Mozilla Firefox1<span class="number">.0</span>～<span class="number">3.0</span>版本。</span><br><span class="line">         TraceMonkey，基于实时编译的引擎，其中部份代码取自Tamarin引擎，用于 Mozilla Firefox <span class="number">3.5</span>～<span class="number">3.6</span>版本。</span><br><span class="line">         JägerMonkey，（JägerMonkey，也有人拼写成JagerMonkey）德文Jäger原意为猎人，结合追踪和组合码技术大幅提高效能，部分技术借凿了V8、JavaScriptCore、WebKit，用于Mozilla Firefox <span class="number">4.0</span>以上版本。</span><br><span class="line">	<span class="number">2</span>）Google</span><br><span class="line">         V8，开放源代码，由Google丹麦开发，是Google Chrome的一部分。#V8引擎目前最快</span><br><span class="line">	<span class="number">3</span>）微软</span><br><span class="line">         Chakra，中文译名为查克拉，用于Internet Explorer <span class="number">9</span>。</span><br><span class="line">         JScript 是由微软公司开发的活动脚本语言，是微软对ECMAScript规范的实现.IE <span class="number">3.0</span>-IE8<span class="number">.0</span>使用的JS引擎</span><br><span class="line">	<span class="number">4</span>）其它</span><br><span class="line">   		KJS，KDE的ECMAScript/JavaScript引擎，最初由Harri Porten开发，用于KDE项目的 Konqueror网页浏览器中。</span><br><span class="line">   		Narcissus，开放源代码，由BrendanEich编写（他也参与编写了第一个SpiderMonkey）。</span><br><span class="line">   		Tamarin，由AdobeLabs编写，Flash Player <span class="number">9</span>所使用的引擎。</span><br><span class="line">   		Nitro（原名SquirrelFish），为Safari <span class="number">4</span>编写。</span><br><span class="line">   		Carakan，由Opera软件公司编写，自Opera10<span class="number">.50</span>版本开始使用。</span><br></pre></td></tr></table></figure>

<h2 id="2-3-Node-js的应用场景"><a href="#2-3-Node-js的应用场景" class="headerlink" title="2.3 Node.js的应用场景"></a>2.3 Node.js的应用场景</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># Node.js适合应用在高并发、I/O密集、少量业务逻辑的场景</span><br><span class="line">	Node.js善于I/O，不善于计算。因为Node.js最擅长的就是任务调度，如果你的业务有很多的CPU计算，实际上也相当于这个计算阻塞了这个单线程，就不适合Node开发。</span><br><span class="line">	当应用程序需要处理大量并发的I/O，而在向客户端发出响应之前，应用程序内部并不需要进行非常复杂的处理的时候，Node.js非常适合。Node.js也非常适合与web socket配合，开发长连接的实时交互应用程序。</span><br><span class="line"></span><br><span class="line"># Node.js适用场景：</span><br><span class="line"><span class="number">1.</span> 用户表单收集</span><br><span class="line"><span class="number">2.</span> 考试系统</span><br><span class="line"><span class="number">3.</span> 聊天室</span><br><span class="line"><span class="number">4.</span> 图文直播</span><br><span class="line"><span class="number">5.</span> 提供<span class="built_in">JSON</span>的API（为前台Angular Vue使用）</span><br><span class="line"><span class="number">6.</span> 命令行工具  npm  git  hexo</span><br><span class="line"></span><br><span class="line"># Node.js不适合的场景：</span><br><span class="line"><span class="number">1.</span>计算密集型应用(计算密集需要花费大量的CPU资源)</span><br><span class="line"><span class="number">2.</span>单用户多任务的程序  比如<span class="number">360</span>安全卫士</span><br><span class="line"><span class="number">3.</span>逻辑十分复杂的事务  </span><br><span class="line"><span class="number">4.</span>unicode与国际化</span><br></pre></td></tr></table></figure>

<h2 id="2-4-node-js-学习资料"><a href="#2-4-node-js-学习资料" class="headerlink" title="2.4 node.js 学习资料"></a>2.4 node.js 学习资料</h2><ol>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/">node.js官方网站</a></li>
<li><a target="_blank" rel="noopener" href="http://nodejs.cn/">node.js中文网</a></li>
<li><a target="_blank" rel="noopener" href="https://cnodejs.org/">node.js 中文社区</a></li>
<li>深入浅出Node.js</li>
<li>Node.js权威指南</li>
<li>cnode社区  <a target="_blank" rel="noopener" href="https://cnodejs.org/">https://cnodejs.org</a></li>
</ol>
<h2 id="2-5-CMD终端基本使用"><a href="#2-5-CMD终端基本使用" class="headerlink" title="2.5.CMD终端基本使用"></a>2.5.CMD终端基本使用</h2><h3 id="2-5-1-打开应用"><a href="#2-5-1-打开应用" class="headerlink" title="2.5.1 打开应用"></a>2.5.1 打开应用</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- notepad 打开记事本</span><br><span class="line">- mspaint 打开画图</span><br><span class="line">- calc 打开计算机</span><br><span class="line">- write 写字板</span><br><span class="line">- sysdm.cpl 打开环境变量设置窗口</span><br></pre></td></tr></table></figure>

<h3 id="2-5-2-常用命令"><a href="#2-5-2-常用命令" class="headerlink" title="2.5.2 常用命令"></a>2.5.2 常用命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- md                           创建目录</span><br><span class="line">- rmdir(rd)                  删除目录，目录内没有文档。</span><br><span class="line">- echo on &gt; a.txt        创建空文件</span><br><span class="line">   echo 123 &gt; a.txt      向a.txt写入123 </span><br><span class="line">   echo 456 &gt;&gt; a.txt    向a.txt追加456</span><br><span class="line">- del                            删除文件</span><br><span class="line">- rm 文件名                 删除文件</span><br><span class="line">- cat 文件名                查看文件内容</span><br><span class="line">- cat &gt; 文件名             向文件中写上内容，按住ctrl+c退出</span><br><span class="line">  cat &gt;&gt; 文件名           向文件中追加内容，按住ctrl+c退出</span><br></pre></td></tr></table></figure>

<h2 id="2-6-Node-js的安装"><a href="#2-6-Node-js的安装" class="headerlink" title="2.6.Node.js的安装"></a>2.6.Node.js的安装</h2><h3 id="2-6-1-普通安装方式"><a href="#2-6-1-普通安装方式" class="headerlink" title="2.6.1 普通安装方式"></a>2.6.1 普通安装方式</h3><ol>
<li>普通安装方式<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/">官方网站</a></li>
<li>官网：长期支持版(主流版本) 和 当前发布版(含有一些最新功能)</li>
<li>在安装node的时候，如果之前安装过了老版本，会自动覆盖之前的版本</li>
<li>安装node的时候，一定要add path添加环境变量</li>
</ol>
<h3 id="2-6-2-多版本安装方式"><a href="#2-6-2-多版本安装方式" class="headerlink" title="2.6.2 多版本安装方式"></a>2.6.2 多版本安装方式</h3><ol>
<li><p>卸载已有的Node.js</p>
</li>
<li><p>下载<a target="_blank" rel="noopener" href="https://github.com/coreybutler/nvm-windows">nvm</a> ,下载nvm-noinstall.zip   </p>
</li>
<li><p>在C盘创建目录dev</p>
</li>
<li><p>在dev目中中创建两个子目录nvm和nodejs</p>
</li>
<li><p>并且把nvm包解压进去nvm目录中</p>
</li>
<li><p>在install.cmd文件上面右键选择【以管理员身份运行】</p>
</li>
<li><p>打开的cmd窗口直接回车会生成一个settings.txt文件，将setting.txt保存到当前dev下的nvm下面</p>
<blockquote>
<p>root: C:\dev\nvm<br>path: C:\dev\nodejs<br>arch: 64<br>proxy: none</p>
</blockquote>
</li>
<li><p>配置nvm和Node.js环境变量</p>
<blockquote>
<p>NVM_HOME:C:\dev\nvm</p>
<p>NVM_SYMLINK:C:\dev\nodejs</p>
</blockquote>
</li>
<li><p>把配置好的两个环境变量加到Path中</p>
<blockquote>
<p>;%NVM_HOME%;%NVM_SYMLINK%;</p>
</blockquote>
</li>
</ol>
<h3 id="2-6-3-nvm常用的命令"><a href="#2-6-3-nvm常用的命令" class="headerlink" title="2.6.3 nvm常用的命令"></a>2.6.3 nvm常用的命令</h3><ul>
<li>nvm version                        查看nvm版本号</li>
<li>nvm list                                查看当前安装的Node.js所有版本</li>
<li>nvm install 10.14.1            安装指定版本的Node.js</li>
<li>nvm uninstall 版本号         卸载指定版本的Node.js</li>
<li>nvm use 10.14.1                 选择指定版本的Node.js</li>
</ul>
<h1 id="3-Node-js常用API"><a href="#3-Node-js常用API" class="headerlink" title="3.Node.js常用API"></a>3.Node.js常用API</h1><h2 id="3-1-HelloWorld"><a href="#3-1-HelloWorld" class="headerlink" title="3.1 HelloWorld"></a>3.1 HelloWorld</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.新建helloword.js</span></span><br><span class="line"><span class="keyword">const</span> foo = <span class="string">&#x27;hello nodejs&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 包含文件名称的全路径</span></span><br><span class="line"><span class="built_in">console</span>.log(__filename);</span><br><span class="line"><span class="comment">// 文件的所处的目录的绝对路径（不包含文件名称）</span></span><br><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定时函数，用法与浏览器中的定时函数类似</span></span><br><span class="line"><span class="keyword">var</span> timer = <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">123</span>);</span><br><span class="line">&#125;,<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;,<span class="number">4000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在Node.js中没有window对象，但是有一个类似的对象global，访问全局成员的时候可以省略global</span></span><br><span class="line"><span class="built_in">global</span>.console.log(<span class="number">123456</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// argv是一个数组，默认情况下，前两项数据分别是：Node.js环境的路径；当前执行的js文件的全路径</span></span><br><span class="line"><span class="comment">// 从第三个参数开始表示命令行参数</span></span><br><span class="line"><span class="built_in">console</span>.log(process.argv);</span><br><span class="line"><span class="comment">// 打印当前系统的架构（64位或者32位）</span></span><br><span class="line"><span class="built_in">console</span>.log(process.arch);</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.运行helloworld.js </span></span><br><span class="line">命令使用  node helloworld.js  ，会看到在命令窗口中输出hello nodejs</span><br><span class="line"></span><br><span class="line">#注意：</span><br><span class="line"><span class="number">1.</span>文件名不要命名为node.js,文件名尽量避免使用中文</span><br><span class="line"><span class="number">2.</span>node.js中没有dom和bom，所以不要使用dom和bom操作的api，比如<span class="built_in">document</span>、<span class="built_in">window</span>之类的</span><br></pre></td></tr></table></figure>

<h2 id="3-2-文件操作"><a href="#3-2-文件操作" class="headerlink" title="3.2 文件操作"></a>3.2 文件操作</h2><h3 id="3-2-1-查看文件状态-fs-stat"><a href="#3-2-1-查看文件状态-fs-stat" class="headerlink" title="3.2.1 查看文件状态 fs.stat()"></a>3.2.1 查看文件状态 fs.stat()</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">//异步方法</span></span><br><span class="line">fs.stat(<span class="string">&#x27;./js&#x27;</span>,<span class="function">(<span class="params">err,stat</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 一般回调函数的第一个参数是错误对象，如果err为null,表示没有错误，否则表示报错了</span></span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">if</span>(stat.isFile())&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(<span class="string">&#x27;文件&#x27;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stat.isDirectory())&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;目录&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(stat);</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     atime 文件访问时间</span></span><br><span class="line"><span class="comment">     ctime 文件的状态信息发生变化的时间（比如文件的权限）</span></span><br><span class="line"><span class="comment">     mtime 文件数据发生变化的时间</span></span><br><span class="line"><span class="comment">     birthtime 文件创建的时间</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步操作</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">let</span> ret = fs.statSync(<span class="string">&#x27;./data.txt&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ret);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"># API方法中如果没有Sync，往往是同步方法，否则是异步方法</span><br></pre></td></tr></table></figure>

<h3 id="3-3-2-读取文件-fs-readFile"><a href="#3-3-2-读取文件-fs-readFile" class="headerlink" title="3.3.2 读取文件 fs.readFile()"></a>3.3.2 读取文件 fs.readFile()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器中的 JavaScript 是没有文件操作的能力的。但是 Node 中的 JavaScript 具有文件操作的能力</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fs 是 file-system 的简写，就是文件系统的意思。在 Node 中如果想要进行文件操作，就必须引入 fs 这个核心模块</span></span><br><span class="line"><span class="comment">// 在 fs 这个核心模块中，就提供了所有的文件操作相关的 API 。例如：fs.readFile 就是用来读取文件的</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 使用 require 方法加载 fs 核心模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 读取文件</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    第一个参数就是要读取的文件路径</span></span><br><span class="line"><span class="comment">    第二个参数是一个回调函数</span></span><br><span class="line"><span class="comment">        成功 (data 数据 ，error null)</span></span><br><span class="line"><span class="comment">        失败  (data undefined没有数据 ,error 错误对象)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./data/a.txt&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// &lt;Buffer 68 65 6c 6c 6f 20 6e 6f 64 65 6a 73 0d 0a&gt;</span></span><br><span class="line">  <span class="comment">// 文件中存储的其实都是二进制数据 0 1。这里为什么看到的不是 0 和 1 呢？原因是二进制转为 16 进制了</span></span><br><span class="line">  <span class="comment">// 在这里就可以通过判断 error 来确认是否有错误发生</span></span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败了&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-3-写入文件-fs-writeFile"><a href="#3-3-3-写入文件-fs-writeFile" class="headerlink" title="3.3.3 写入文件 fs.writeFile()"></a>3.3.3 写入文件 fs.writeFile()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 第一个参数：文件路径</span></span><br><span class="line"><span class="comment"> 第二个参数：文件内容</span></span><br><span class="line"><span class="comment"> 第三个参数：回调函数</span></span><br><span class="line"><span class="comment">    成功：</span></span><br><span class="line"><span class="comment">      文件写入成功</span></span><br><span class="line"><span class="comment">      error 是 null</span></span><br><span class="line"><span class="comment">    失败：</span></span><br><span class="line"><span class="comment">      文件写入失败</span></span><br><span class="line"><span class="comment">      error 就是错误对象</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./data/你好.md&#x27;</span>, <span class="string">&#x27;大家好，给大家介绍一下，我是Node.js&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;写入失败&#x27;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;写入成功了&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3-3-4-文件流操作-stream"><a href="#3-3-4-文件流操作-stream" class="headerlink" title="3.3.4 文件流操作 stream"></a>3.3.4 文件流操作 stream</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> spath = path.join(__dirname,<span class="string">&#x27;./a.js&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> dpath = path.join(__dirname,<span class="string">&#x27;./a1.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//文件输入流</span></span><br><span class="line"><span class="keyword">let</span> readStream = fs.createReadStream(spath);</span><br><span class="line"><span class="comment">//文件输出流</span></span><br><span class="line"><span class="keyword">let</span> writeStream = fs.createWriteStream(dpath);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 基于事件的处理方式</span></span><br><span class="line">readStream.on(<span class="string">&#x27;data&#x27;</span>,<span class="function">(<span class="params">chunk</span>)=&gt;</span>&#123;</span><br><span class="line">     writeStream.write(chunk);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readStream.on(<span class="string">&#x27;end&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">&#x27;文件处理完成&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// pipe的作用直接把输入流和输出流  管道流</span></span><br><span class="line"><span class="comment">//fs.createReadStream(spath).pipe(fs.createWriteStream(dpath));</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-5-文件操作-promise"><a href="#3-3-5-文件操作-promise" class="headerlink" title="3.3.5 文件操作-promise"></a>3.3.5 文件操作-promise</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> fsPromises = fs.promises;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fsPromises.stat(<span class="string">&quot;./tt&quot;</span>)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;tt目录已经存在&quot;</span>);</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> fsPromises.mkdir(<span class="string">&quot;./tt&quot;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;创建目录成功&quot;</span>);</span><br><span class="line">	<span class="keyword">const</span> data = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(Buffer.from(<span class="string">&#x27;Node.js中文网&#x27;</span>));</span><br><span class="line">	<span class="keyword">return</span> fsPromises.writeFile(<span class="string">&quot;./tt/bb.txt&quot;</span>,data);</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;创建目录失败&quot;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;写入信息成功&quot;</span>)</span><br><span class="line">&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;写入信息失败&quot;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="3-3-路径操作"><a href="#3-3-路径操作" class="headerlink" title="3.3 路径操作"></a>3.3 路径操作</h2><h3 id="3-3-1-基本操作"><a href="#3-3-1-基本操作" class="headerlink" title="3.3.1 基本操作"></a>3.3.1 基本操作</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 路径操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径的最后一部分</span></span><br><span class="line"><span class="built_in">console</span>.log(path.basename(<span class="string">&#x27;/foo/bar/baz/asdf/quux.html&#x27;</span>));</span><br><span class="line"><span class="comment">// 去掉后缀</span></span><br><span class="line"><span class="built_in">console</span>.log(path.basename(<span class="string">&#x27;/foo/bar/baz/asdf/quux.html&#x27;</span>, <span class="string">&#x27;.html&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取路径</span></span><br><span class="line"><span class="built_in">console</span>.log(__dirname);</span><br><span class="line"><span class="built_in">console</span>.log(path.dirname(<span class="string">&#x27;/abc/qqq/www/abc&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取扩展名称</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(<span class="string">&#x27;index.html&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 两个特殊属性</span></span><br><span class="line"><span class="built_in">console</span>.log(path.delimiter);<span class="comment">//表示路径分隔符（windows是\ Linux是/）</span></span><br><span class="line"><span class="built_in">console</span>.log(path.sep);<span class="comment">//环境变量分隔符(windows中使用; linux中使用:)</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-绝对路径和相对路径"><a href="#3-4-2-绝对路径和相对路径" class="headerlink" title="3.4.2 绝对路径和相对路径"></a>3.4.2 绝对路径和相对路径</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#1. 相对路径</span><br><span class="line"><span class="comment">//在读写文件的时候，./的含义是相对于执行node命令所处的路径</span></span><br><span class="line"><span class="comment">//比如在C:/code下执行 node app.js，./相对于的就是code目录</span></span><br><span class="line"><span class="comment">//比如在C下执行node  code/app.js，./相对于的就是C盘根目录</span></span><br><span class="line">fs.readFile( <span class="string">&#x27;./a.js&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">#2. 绝对路径</span><br><span class="line"><span class="comment">//总是拿到当前a.js的绝对路径</span></span><br><span class="line">fs.readFile(path.join(__dirname, <span class="string">&#x27;./a.js&#x27;</span>), <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">#3.结论：在服务器开发的时候，使用相对路径是不可靠的，尽量多使用绝对路径</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 关于路径：</span><br><span class="line">在读写文件的时候，./的含义是相对于执行node命令所处的路径</span><br><span class="line">../表示当前目录的上一级目录</span><br><span class="line">如果这么写：../../表示当前目录的上上级目录</span><br><span class="line">/表示根目录(也即本地根目录)</span><br></pre></td></tr></table></figure>

<h2 id="3-4-URL和对象的转换"><a href="#3-4-URL和对象的转换" class="headerlink" title="3.4 URL和对象的转换"></a>3.4 URL和对象的转换</h2><h3 id="3-4-1-url-parse和url-format"><a href="#3-4-1-url-parse和url-format" class="headerlink" title="3.4.1 url.parse和url.format"></a>3.4.1 url.parse和url.format</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="comment">// parse方法的作用就是把URL字符串转化为对象</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">&#x27;http://www.baidu.com/abc/qqq?flag=123&amp;keyword=java&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> ret = url.parse(str,<span class="literal">true</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ret.query.keyword);</span><br><span class="line"></span><br><span class="line"><span class="comment">// format的作用就是把对象转化为标准的URL字符串</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">   protocol: <span class="string">&#x27;http:&#x27;</span>,</span><br><span class="line">   slashes: <span class="literal">true</span>,</span><br><span class="line">   auth: <span class="literal">null</span>,</span><br><span class="line">   host: <span class="string">&#x27;www.baidu.com&#x27;</span>,</span><br><span class="line">   port: <span class="literal">null</span>,</span><br><span class="line">   hostname: <span class="string">&#x27;www.baidu.com&#x27;</span>,</span><br><span class="line">   hash: <span class="literal">null</span>,</span><br><span class="line">   search: <span class="string">&#x27;?flag=123&amp;keyword=java&#x27;</span>,</span><br><span class="line">   query: <span class="string">&#x27;flag=123&amp;keyword=java&#x27;</span>,</span><br><span class="line">   pathname: <span class="string">&#x27;/abc/qqq&#x27;</span>,</span><br><span class="line">   path: <span class="string">&#x27;/abc/qqq?flag=123&amp;keyword=java&#x27;</span>,</span><br><span class="line">   href: <span class="string">&#x27;http://www.baidu.com/abc/qqq?flag=123&amp;keyword=java&#x27;</span> </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> ret1 = url.format(obj);</span><br><span class="line"><span class="built_in">console</span>.log(ret1);</span><br></pre></td></tr></table></figure>

<h3 id="3-4-2-querystring-parse和querystring-stringify"><a href="#3-4-2-querystring-parse和querystring-stringify" class="headerlink" title="3.4.2 querystring.parse和querystring.stringify"></a>3.4.2 querystring.parse和querystring.stringify</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parse方法的作用就是把字符串转成对象</span></span><br><span class="line"><span class="keyword">let</span> param = <span class="string">&#x27;username=lisi&amp;password=123&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> param = <span class="string">&#x27;foo=bar&amp;abc=xyz&amp;abc=123&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> obj = querystring.parse(param);</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br><span class="line"></span><br><span class="line"><span class="comment">// stringify的作用就是把对象转成字符串</span></span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;</span><br><span class="line">     flag : <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">     abc : [<span class="string">&#x27;hello&#x27;</span>,<span class="string">&#x27;hi&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> str1 = querystring.stringify(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(str1);</span><br></pre></td></tr></table></figure>

<h2 id="3-5-目录操作"><a href="#3-5-目录操作" class="headerlink" title="3.5 目录操作"></a>3.5 目录操作</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> 目录操作</span></span><br><span class="line"><span class="comment"> 1、创建目录</span></span><br><span class="line"><span class="comment"> fs.mkdir(path[, mode], callback)</span></span><br><span class="line"><span class="comment"> fs.mkdirSync(path[, mode])</span></span><br><span class="line"><span class="comment"> 2、读取目录</span></span><br><span class="line"><span class="comment"> fs.readdir(path[, options], callback)</span></span><br><span class="line"><span class="comment"> fs.readdirSync(path[, options])</span></span><br><span class="line"><span class="comment"> 3、删除目录</span></span><br><span class="line"><span class="comment"> fs.rmdir(path, callback)</span></span><br><span class="line"><span class="comment"> fs.rmdirSync(path)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建目录</span></span><br><span class="line">fs.mkdir(path.join(__dirname,<span class="string">&#x27;abc&#x27;</span>),<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 读取目录</span></span><br><span class="line">fs.readdir(__dirname,<span class="function">(<span class="params">err,files</span>)=&gt;</span>&#123;</span><br><span class="line">    files.forEach(<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">        fs.stat(path.join(__dirname,item),<span class="function">(<span class="params">err,stat</span>)=&gt;</span>&#123;</span><br><span class="line">             <span class="keyword">if</span>(stat.isFile())&#123;</span><br><span class="line">                 <span class="built_in">console</span>.log(item,<span class="string">&#x27;文件&#x27;</span>);</span><br><span class="line">             &#125;<span class="keyword">else</span> <span class="keyword">if</span>(stat.isDirectory())&#123;</span><br><span class="line">                 <span class="built_in">console</span>.log(item,<span class="string">&#x27;目录&#x27;</span>);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">     &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.stat(<span class="string">&quot;./tt&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,stats</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//如果有错误说明tt目录不存在</span></span><br><span class="line">	<span class="keyword">if</span> (err) &#123;</span><br><span class="line">		<span class="comment">//tt目录不存在我们就创建tt目录</span></span><br><span class="line">		fs.mkdir(<span class="string">&quot;./tt&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span> (err) &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">&quot;目录创建错误&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">			<span class="comment">//向tt目录下的bb.txt中写文件</span></span><br><span class="line">			fs.writeFile(<span class="string">&quot;./tt/bb.txt&quot;</span>,data,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(err)&#123;</span><br><span class="line">					<span class="built_in">console</span>.log(err)</span><br><span class="line">					<span class="keyword">return</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">&quot;tt写文件成功&quot;</span>);</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line">fs.rmdir(path.join(__dirname,<span class="string">&#x27;abc&#x27;</span>),<span class="function">(<span class="params">err</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果文件夹里面有其他文件，则该文件夹不可以直接被删除</span></span><br><span class="line"><span class="comment">//递归删除文件/文件夹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteall</span>(<span class="params">path</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> files = [];</span><br><span class="line">	<span class="comment">//1.判断文件或者文件夹是否存在</span></span><br><span class="line">	<span class="keyword">if</span>(fs.existsSync(path)) &#123;</span><br><span class="line">		<span class="comment">//如果存在，则读取文件夹信息</span></span><br><span class="line">		files = fs.readdirSync(path);</span><br><span class="line">		<span class="comment">//遍历每一个文件</span></span><br><span class="line">		files.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">file, index</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> curPath = path + <span class="string">&quot;/&quot;</span> + file;</span><br><span class="line">			<span class="comment">//如果是目录 删除目录</span></span><br><span class="line">			<span class="keyword">if</span>(fs.statSync(curPath).isDirectory()) &#123; </span><br><span class="line">				deleteall(curPath);</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">				<span class="comment">//删除文件</span></span><br><span class="line">				fs.unlinkSync(curPath);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">		fs.rmdirSync(path);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="3-6-node中的REPL"><a href="#3-6-node中的REPL" class="headerlink" title="3.6 node中的REPL"></a>3.6 node中的REPL</h2><p>REPL就类似于浏览器中的控制台，我们可以在cmd控制台中输入指定信息进行调试。<br>REPL：read  eval  print  loop     读取用户输入—&gt;执行用户输入—&gt;打印用户输入—-&gt;等待下一次用户输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REPL用法：</span><br><span class="line">	1.在任意目录下打开命令行，输入指令node</span><br><span class="line">	2.然后就可以使用node控制台了</span><br><span class="line">	3.在REPL环境中，_表示最后一次执行结果; .exit 可以退出REPL环境</span><br></pre></td></tr></table></figure>

<p><img src="assets/1543826304858.png" alt="1543826304858"></p>
<h1 id="4-Node和HTTP"><a href="#4-Node和HTTP" class="headerlink" title="4.Node和HTTP"></a>4.Node和HTTP</h1><h2 id="4-1-HTTP协议介绍"><a href="#4-1-HTTP协议介绍" class="headerlink" title="4.1 HTTP协议介绍"></a>4.1 HTTP协议介绍</h2><h3 id="4-1-1-定义"><a href="#4-1-1-定义" class="headerlink" title="4.1.1 定义"></a>4.1.1 定义</h3><pre><code>HTTP（HyperText Transfer Protocol，超文本传输协议）最早就是计算机与计算机之间沟通的一种标准协议，这种协议限制了通讯内容的格式以及各项内容的含义。默认使用80端口。最新版本是HTTP 2.0，目前是用最广泛的是HTTP 1.1。

HTTP协议： 对客户端和服务器端之间数据传输的格式规范。</code></pre>
<p><img src="media/b1.png"></p>
<pre><code>随着时代的发展，技术的变迁，这种协议现在广泛的应用在各种领域，也不仅仅局限于计算机与计算机之间，手机、电视等各种智能设备很多时候都在使用这种协议通讯，所以一般现在称 HTTP 为端与端之间的通讯协议。

Web 属于 B/S 架构的应用软件，在 B/S 架构中，浏览器与服务器沟通的协议就是 HTTP 协议，作为一个合格的Web 开发者，了解 HTTP 协议中约定的内容是一门必修课。</code></pre>
<h3 id="4-1-2-HTTP协议约定内容"><a href="#4-1-2-HTTP协议约定内容" class="headerlink" title="4.1.2 HTTP协议约定内容"></a>4.1.2 HTTP协议约定内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">请求 &#x2F; 响应报文格式</span><br><span class="line">请求方法 —— GET &#x2F; POST</span><br><span class="line">响应状态 —— 200 &#x2F; 404 &#x2F; 302 &#x2F; 304</span><br><span class="line">预设的请求 &#x2F; 响应头</span><br></pre></td></tr></table></figure>

<h3 id="4-1-3-HTTP协议工作流程"><a href="#4-1-3-HTTP协议工作流程" class="headerlink" title="4.1.3 HTTP协议工作流程"></a>4.1.3 HTTP协议工作流程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 客户端通过随机端口与服务端某个固定端口（一般为80）建立连接 三次握手</span><br><span class="line">2. 客户端通过这个连接发送请求到服务端（这里的请求是名词）</span><br><span class="line">3. 服务端监听端口得到的客户端发送过来的请求</span><br><span class="line">4. 服务端通过连接响应给客户端状态和内容</span><br></pre></td></tr></table></figure>

<pre><code>要求：接下来的一个月，每次上网打开任何一个页面时都要能够脑补这个画面，默念这个流程。</code></pre>
<p><img src="media/d10.png"></p>
<h3 id="4-1-4-HTTP协议的三次握手"><a href="#4-1-4-HTTP协议的三次握手" class="headerlink" title="4.1.4 HTTP协议的三次握手"></a>4.1.4 HTTP协议的三次握手</h3><pre><code>HTTP是基于传输层的TCP协议，而TCP是一个端到端的面向连接的协议。所谓的端到端可以理解为进程到进程之间的通信。所以HTTP在开始传输之前，首先需要建立TCP连接，而TCP连接的过程需要所谓的“三次握手”。

下图所示TCP连接的三次握手。在TCP三次握手之后，建立了TCP连接，此时HTTP就可以进行传输了。一个重要的概念是面向连接，既HTTP在传输完成之前并不断开TCP连接。在HTTP1.1中(通过Connection头设置)这是默认行为。</code></pre>
<p><img src="assets/1539259434258.png" alt="1539259434258"></p>
<h3 id="4-1-5-HTTP协议的特点"><a href="#4-1-5-HTTP协议的特点" class="headerlink" title="4.1.5 HTTP协议的特点"></a>4.1.5 HTTP协议的特点</h3><pre><code>无状态：同一个客户端的这次请求和上次请求是没有对应关系，对HTTP服务器来说，它并不知道这两个请求来自同一个客户端。这意味着，每一个请求的是独立的，任何两个请求之间无任何记忆关系。如果服务端处理一个请求需要前面的信息，则该信息必须重传。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//除了上面无状态这个特点，还有几个其他小特点：</span></span><br><span class="line"><span class="number">1.</span> 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。每种方法规定了客户与服务器联系的类型不同。由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。</span><br><span class="line"><span class="number">2.</span> 灵活：HTTP允许传输任意类型的数据对象。正在传输的类型由Content-Type加以标记。</span><br><span class="line"><span class="number">3.</span> 在HTTP/<span class="number">1.1</span>之前，使用非持续连接，客户端（浏览器）和服务器每次连接只处理一个请求。服务器处理完客户端的请求，对客户端做出应答后，即断开连接。</span><br><span class="line">   HTTP/<span class="number">1.1</span>开始，默认开启了Keep-Alive，保持连接特性，简单地说，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭，如果客户端再次访问这个服务器上的网页，会继续使用这一条已经建立的连接。Keep-Alive不会永久保持连接，它有一个保持时间，可以在不同的服务器软件（如Apache）中设定这个时间。</span><br></pre></td></tr></table></figure>

<h2 id="4-2-HTTP协议核心概念"><a href="#4-2-HTTP协议核心概念" class="headerlink" title="4.2 HTTP协议核心概念"></a>4.2 HTTP协议核心概念</h2><h3 id="4-2-1-请求报文"><a href="#4-2-1-请求报文" class="headerlink" title="4.2.1  请求报文"></a>4.2.1  请求报文</h3><p><img src="media/b3.png"></p>
<p><img src="media/b4.png"></p>
<ol>
<li>请求行 </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;demo.php HTTP&#x2F;1.1</span><br><span class="line">请求方式 + 空格 + 请求路径 + 空格 + HTTP 协议版本</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GET：字面意思：拿，获取</span><br><span class="line">POST：发送</span><br></pre></td></tr></table></figure>

<p><img src="media/b8.png"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">GET请求无害：get是等幂的，无论执行多少遍不影响最终的结果。</span><br><span class="line">POST是不等幂的，每次post调用都会创建新的资源。</span><br><span class="line"></span><br><span class="line"><span class="comment">//IE下GET请求的缓存(POST请求无缓存)：</span></span><br><span class="line"><span class="comment">//Ajax使用GET方式发送请求时，在IE下会产生缓存。很多情况下，ajax都会获取实时数据，如果存在缓存问题，就会影响数据真实性。可使用以下两种方式清除缓存：</span></span><br><span class="line"><span class="number">1.</span>URL随机后缀：在get请求时增加一个随机后缀，用来区分每一次访问的URL地址</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        type: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">        url: <span class="string">&quot;http://localhost/index.php?s=&quot;</span>+<span class="built_in">Math</span>.random(),</span><br><span class="line">        data: <span class="literal">null</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(data);      </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);	</span><br><span class="line"> 		</span><br><span class="line">    <span class="comment">//在jquery中可以通过$.ajaxSetup(&#123;cache:false&#125;)去除get请求缓存 	</span></span><br><span class="line">	$.ajaxSetup(&#123;<span class="attr">cache</span>:<span class="literal">false</span>&#125;);</span><br><span class="line">	$(<span class="string">&quot;#box&quot;</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		$.ajax(&#123;</span><br><span class="line">             type: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">             url: <span class="string">&quot;http://localhost/index.php&quot;</span>,</span><br><span class="line">             data: <span class="literal">null</span>,</span><br><span class="line">             success: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">                 <span class="built_in">console</span>.log(data);      </span><br><span class="line">             &#125;</span><br><span class="line">         &#125;);</span><br><span class="line">	&#125;)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>请求头</p>
<p>  客户端想要告诉服务端的一些额外信息，以下为常见的请求头：</p>
</li>
</ol>
<p><img src="media/b6.png"></p>
<ol start="3">
<li><p>请求体</p>
<p>  这次请求客户端想要发送给服务端的数据正文，只有POST请求才有请求体</p>
</li>
</ol>
<h3 id="4-2-2-响应报文"><a href="#4-2-2-响应报文" class="headerlink" title="4.2.2 响应报文"></a>4.2.2 响应报文</h3><p><img src="media/b5.png"></p>
<ol>
<li>状态行</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HTTP&#x2F;1.1 200 OK</span><br><span class="line">HTTP 协议版本 + 空格 + 状态码 + 空格 + 状态描述</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>响应头</p>
<p>   服务端想要告诉客户端的一些额外信息，常见的有以下：</p>
</li>
</ol>
<p><img src="media/b7.png"></p>
<pre><code>请求服务端想要返回给客户端的数据正文，一般返回的都是 HTML，也可以返回 JavaScript 或者 CSS（需要修改响应头中的响应类型）。</code></pre>
<h3 id="4-2-3-响应状态码"><a href="#4-2-3-响应状态码" class="headerlink" title="4.2.3 响应状态码"></a>4.2.3 响应状态码</h3><blockquote>
<p><a target="_blank" rel="noopener" href="http://www.w3school.com.cn/tags/html_ref_httpmessages.asp">http://www.w3school.com.cn/tags/html_ref_httpmessages.asp</a></p>
</blockquote>
<pre><code>状态代码由三位数字组成，第一个数字定义了响应的类别，且有五种可能取值。</code></pre>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1xx：指示信息 —— 表示请求已接收，继续处理。</span><br><span class="line">2xx：成功 —— 表示请求已被成功接收、理解、接受。</span><br><span class="line">3xx：重定向 —— 要完成请求必须进行更进一步的操作。</span><br><span class="line">4xx：客户端错误 —— 请求有语法错误或请求无法实现。</span><br><span class="line">5xx：服务器端错误 —— 服务器未能实现合法的请求</span><br></pre></td></tr></table></figure>

<pre><code>常见状态代码、状态描述的说明如下</code></pre>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">200</span> OK：客户端请求成功。</span><br><span class="line"><span class="comment">/*客户端错误*/</span></span><br><span class="line"><span class="number">400</span> Bad Request：客户端请求有语法错误，不能被服务器所理解。</span><br><span class="line"><span class="number">401</span> Unauthorized：请求未经授权，这个状态代码必须和 WWW-Authenticate 报头域一起使用。</span><br><span class="line"><span class="number">403</span> Forbidden：服务器收到请求，但是拒绝提供服务。</span><br><span class="line"><span class="number">404</span> Not Found：请求资源不存在，举个例子：输入了错误的URL。</span><br><span class="line"><span class="comment">/*服务器错误*/</span></span><br><span class="line"><span class="number">500</span> Internal Server <span class="built_in">Error</span>：服务器发生不可预期的错误。</span><br><span class="line"><span class="number">503</span> Server Unavailable：服务器当前不能处理客户端的请求，一段时间后可能恢复正常。</span><br></pre></td></tr></table></figure>

<h3 id="4-2-4-HTTPS"><a href="#4-2-4-HTTPS" class="headerlink" title="4.2.4 HTTPS"></a>4.2.4 HTTPS</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#HTTPS协议：简单来说，可以理解为安全版的HTTP协议，基于TCP/IP协议和SSL/TLS协议之上的应用层协议。默认端口<span class="number">443</span>。</span><br><span class="line"></span><br><span class="line">#HTTP协议和HTTPS协议的区别</span><br><span class="line"><span class="number">1.</span>HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此HTTP协议不适合传输一些敏感信息，比如密码等。</span><br><span class="line"><span class="number">2.</span>HTTPS为安全套接字层超文本传输协议。HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。 </span><br><span class="line"></span><br><span class="line">#HTTPS和HTTP的区别主要为以下四点：</span><br><span class="line"><span class="number">1.</span>https协议需要到ca申请证书，一般免费证书很少，需要交费。</span><br><span class="line"><span class="number">2.</span>http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。</span><br><span class="line"><span class="number">3.</span>http和https使用的是完全不同的连接方式，用的端口也不一样，前者是<span class="number">80</span>，后者是<span class="number">443</span>。</span><br><span class="line"><span class="number">4.</span>http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。</span><br></pre></td></tr></table></figure>

<h2 id="4-3-使用Node搭建HTTP服务器"><a href="#4-3-使用Node搭建HTTP服务器" class="headerlink" title="4.3 使用Node搭建HTTP服务器"></a>4.3 使用Node搭建HTTP服务器</h2><p>传统的动态网站开发需要应用软件：</p>
<blockquote>
<p>PHP ： Apache + php模块<br>java ：Tomcat 、Weblogic<br>Node.js  : 不需要应用软件（可以自己实现）</p>
</blockquote>
<h3 id="4-3-1-基本使用"><a href="#4-3-1-基本使用" class="headerlink" title="4.3.1 基本使用"></a>4.3.1 基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 Node 中专门提供了一个核心模块：http。http 这个模块的职责就是帮你创建编写服务器的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">// 1. 创建服务器实例对象，提供对数据的服务</span></span><br><span class="line"><span class="comment">// let server = http.createServer();</span></span><br><span class="line"><span class="comment">// 2. 绑定请求事件</span></span><br><span class="line"><span class="comment">// server.on(&#x27;request&#x27;,(req,res)=&gt;&#123;</span></span><br><span class="line"><span class="comment">//     res.end(&#x27;hello&#x27;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// 3. 监听端口</span></span><br><span class="line"><span class="comment">// server.listen(3000);</span></span><br><span class="line"><span class="comment">// 4. 访问web服务器</span></span><br><span class="line"> <span class="comment">// 4.1 node  http.js 启动web服务器。按住ctrl+c可以停止web服务</span></span><br><span class="line"><span class="comment">//  4.2 通过 http://127.0.0.1:3000/访问web服务器</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 使用ES6的语法简写如下：</span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    res.end(<span class="string">&#x27;ok&#x27;</span>);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="string">&#x27;192.168.0.106&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-根据请求处理响应"><a href="#4-3-2-根据请求处理响应" class="headerlink" title="4.3.2 根据请求处理响应"></a>4.3.2 根据请求处理响应</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># 注意：之前的web服务器在开启一个新的demo的时候需要重启web服务器</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    处理请求路径的分发</span></span><br><span class="line"><span class="comment">    1、req对象是http.IncomingMessage的实例对象，请求对象可以用来获取客户端的一些请求信息，例如请求路径</span></span><br><span class="line"><span class="comment">    2、res对象是http.ServerResponse的实例对象， 响应对象可以用来给客户端发送响应消息</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// req.url可以获取URL中的路径（端口之后部分）</span></span><br><span class="line">    <span class="comment">// http://127.0.0.1:3000/ /</span></span><br><span class="line">    <span class="comment">// http://127.0.0.1:3000/a /a</span></span><br><span class="line">    <span class="comment">// http://127.0.0.1:3000/foo/b /foo/b</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;收到客户端的请求了，请求路径是：&#x27;</span> + req.url)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;请求我的客户端的地址是：&#x27;</span>, req.socket.remoteAddress, req.socket.remotePort);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/index&#x27;</span>))&#123;</span><br><span class="line">        <span class="comment">// write向客户端响应内容,可以写多次</span></span><br><span class="line">        res.write(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">        res.write(<span class="string">&#x27;hi&#x27;</span>);</span><br><span class="line">        res.write(<span class="string">&#x27;nihao&#x27;</span>);</span><br><span class="line">        <span class="comment">// end方法用来完成响应，只能执行一次</span></span><br><span class="line">        res.end();</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/about&#x27;</span>))&#123;</span><br><span class="line">        res.end(<span class="string">&#x27;about&#x27;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        res.end(<span class="string">&#x27;no content&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="string">&#x27;192.168.0.106&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-3-3-响应完整页面"><a href="#4-3-3-响应完整页面" class="headerlink" title="4.3.3 响应完整页面"></a>4.3.3 响应完整页面</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据路径读取文件的内容，并且响应到浏览器端</span></span><br><span class="line"><span class="keyword">let</span> readFile = <span class="function">(<span class="params">url,res</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(path.join(__dirname,<span class="string">&#x27;www&#x27;</span>,url),<span class="string">&#x27;utf8&#x27;</span>,<span class="function">(<span class="params">err,fileContent</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.end(<span class="string">&#x27;server error&#x27;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.end(fileContent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">// 处理路径的分发</span></span><br><span class="line">    <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/index&#x27;</span>))&#123;</span><br><span class="line">        readFile(<span class="string">&#x27;index.html&#x27;</span>,res);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/about&#x27;</span>))&#123;</span><br><span class="line">        readFile(<span class="string">&#x27;about.html&#x27;</span>,res);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/list&#x27;</span>))&#123;</span><br><span class="line">        readFile(<span class="string">&#x27;list.html&#x27;</span>,res);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// 设置响应的类型和编码</span></span><br><span class="line">        res.writeHead(<span class="number">200</span>,&#123;</span><br><span class="line">            <span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/plain; charset=utf8&#x27;</span></span><br><span class="line">        &#125;);</span><br><span class="line">        res.end(<span class="string">&#x27;页面被狗狗叼走了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="string">&#x27;192.168.0.106&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="4-3-4-设置响应体"><a href="#4-3-4-设置响应体" class="headerlink" title="4.3.4 设置响应体"></a>4.3.4 设置响应体</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MIME type 指的是文件类型， 像 text/css ， text/html ， text/plain ， applcation/javascript</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> mime = <span class="built_in">require</span>(<span class="string">&#x27;./mime.json&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   浏览器在不知道服务器响应内容的编码的情况下会按照当前操作系统的默认编码去解析，中文操作系统默认是 gbk</span></span><br><span class="line"><span class="comment">  </span></span><br><span class="line"><span class="comment">   在 http 协议中，Content-Type 就是用来告知对方我给你发送的数据内容是什么类型</span></span><br><span class="line"><span class="comment">     res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;)</span></span><br><span class="line"><span class="comment">     res.end(&#x27;hello 世界&#x27;)</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    fs.readFile(path.join(__dirname,<span class="string">&#x27;www&#x27;</span>,req.url),<span class="function">(<span class="params">err,fileContent</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            <span class="comment">// 没有找到对应文件</span></span><br><span class="line">            res.writeHead(<span class="number">404</span>,&#123;</span><br><span class="line">                <span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/plain; charset=utf8&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.end(<span class="string">&#x27;页面被狗狗叼走了&#x27;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> dtype = <span class="string">&#x27;text/html&#x27;</span>;</span><br><span class="line">            <span class="comment">// 获取请求文件的后缀</span></span><br><span class="line">            <span class="keyword">let</span> ext = path.extname(req.url);</span><br><span class="line">            <span class="comment">// 从mime.json文件中获取标准的响应格式</span></span><br><span class="line">            <span class="keyword">if</span>(mime[ext])&#123;</span><br><span class="line">                dtype = mime[ext];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 如果响应的内容是文本，就设置成utf8编码</span></span><br><span class="line">            <span class="keyword">if</span>(dtype.startsWith(<span class="string">&#x27;text&#x27;</span>))&#123;</span><br><span class="line">                dtype += <span class="string">&#x27;; charset=utf8&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 设置响应头信息</span></span><br><span class="line">            res.writeHead(<span class="number">200</span>,&#123;</span><br><span class="line">                <span class="string">&#x27;Content-Type&#x27;</span>:dtype</span><br><span class="line">            &#125;);</span><br><span class="line">            res.end(fileContent);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//如果是css和js文件，对应的css和js文件需要在页面被引用后效果才能显现</span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-5-重定向"><a href="#4-3-5-重定向" class="headerlink" title="4.3.5 重定向"></a>4.3.5 重定向</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 导入http模块</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="comment">// 2. 导入文件模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// 3. 导入路径模块</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="comment">// 4. 创建服务器</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer();</span><br><span class="line"><span class="comment">// 5. 监听客户端请求</span></span><br><span class="line">server.on(<span class="string">&#x27;request&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.url);</span><br><span class="line">    <span class="keyword">if</span> (req.url === <span class="string">&#x27;/index&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// 通过响应头来实现服务端重定向</span></span><br><span class="line">        res.writeHead(<span class="number">302</span>,&#123;</span><br><span class="line">            <span class="string">&#x27;Location&#x27;</span>: <span class="string">&#x27;http://127.0.0.1:3000/login&#x27;</span></span><br><span class="line">        &#125;)   </span><br><span class="line">        res.end();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.url === <span class="string">&#x27;/login&#x27;</span>) &#123;</span><br><span class="line">        fs.readFile(path.join(__dirname,<span class="string">&#x27;login.html&#x27;</span>),<span class="function"><span class="keyword">function</span> (<span class="params">err,data</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="keyword">throw</span> err;</span><br><span class="line">            &#125;</span><br><span class="line">            res.end(data)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 6. 启用服务器</span></span><br><span class="line">server.listen(<span class="number">3000</span>,<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="built_in">console</span>.log(<span class="string">&#x27;启用成功&#x27;</span>); &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 关于重定向：</span><br><span class="line"><span class="number">301</span> 是永久重定向，浏览器会记住，本来是去请求a.html，服务器重定向到b.html，下次在去请求a.html的时候由于浏览器记住了状态，会直接来到b.html页面</span><br><span class="line"></span><br><span class="line"><span class="number">302</span> 是临时重定向， 浏览器不会记住，本来是去请求a.html，服务器重定向到b.html，下次在去请求a.html的时候还是会经历服务器重定向的过程</span><br></pre></td></tr></table></figure>

<h2 id="4-4-参数的处理"><a href="#4-4-参数的处理" class="headerlink" title="4.4 参数的处理"></a>4.4 参数的处理</h2><h3 id="4-4-1-GET请求参数"><a href="#4-4-1-GET请求参数" class="headerlink" title="4.4.1 GET请求参数"></a>4.4.1 GET请求参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> obj = url.parse(req.url,<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//获取get请求参数</span></span><br><span class="line">    res.end(obj.query.username + <span class="string">&#x27;=========&#x27;</span> + obj.query.password);</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running....&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="4-4-2-POST请求参数"><a href="#4-4-2-POST请求参数" class="headerlink" title="4.4.2 POST请求参数"></a>4.4.2 POST请求参数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function">(<span class="params">req,res</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(req.url.startsWith(<span class="string">&#x27;/login&#x27;</span>))&#123;</span><br><span class="line">        <span class="keyword">let</span> pdata = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        <span class="comment">//POST请求使用req.on方法处理请求参数</span></span><br><span class="line">        req.on(<span class="string">&#x27;data&#x27;</span>,<span class="function">(<span class="params">chunk</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 每次获取一部分数据</span></span><br><span class="line">            pdata += chunk;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        req.on(<span class="string">&#x27;end&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// 这里才能得到完整的数据</span></span><br><span class="line">            <span class="built_in">console</span>.log(pdata);</span><br><span class="line">            <span class="keyword">let</span> obj = querystring.parse(pdata);</span><br><span class="line">            <span class="built_in">console</span>.log(obj);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).listen(<span class="number">3000</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;running...&#x27;</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="5-Node模块系统的使用"><a href="#5-Node模块系统的使用" class="headerlink" title="5.Node模块系统的使用"></a>5.Node模块系统的使用</h1><h2 id="5-1-node-js中模块的分类"><a href="#5-1-node-js中模块的分类" class="headerlink" title="5.1 node.js中模块的分类"></a>5.1 node.js中模块的分类</h2><pre><code>Node.js中模块的分类：系统核心模块、用户自定义模块、第三方模块(arttemplate)</code></pre>
<h2 id="5-2-系统核心模块"><a href="#5-2-系统核心模块" class="headerlink" title="5.2 系统核心模块"></a>5.2 系统核心模块</h2><pre><code>Node为javascript提供了很多服务器级别的API，这些API都被封装到了一个具名的模块中。</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//例如文件操作的fs模块，http服务器的模块，path路径操作的模块，os操作的系统模块。</span></span><br><span class="line">- fs 文件操作</span><br><span class="line">- http 网络操作</span><br><span class="line">- path 路径操作</span><br><span class="line">- querystring 查询参数解析</span><br><span class="line">- url url解析</span><br><span class="line">- ......</span><br></pre></td></tr></table></figure>

<pre><code>以后只要需要使用这些模块的功能，都需要通过require引入：</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://nodejs.cn/api/os.html</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">&#x27;os&#x27;</span>)</span><br><span class="line"><span class="comment">// 用来操作路径的</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="comment">// 获取当前机器的 CPU 信息</span></span><br><span class="line"><span class="built_in">console</span>.log(os.cpus())</span><br><span class="line"><span class="comment">// memory 内存</span></span><br><span class="line"><span class="built_in">console</span>.log(os.totalmem())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取一个路径中的扩展名部分</span></span><br><span class="line"><span class="comment">// extname extension name</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(<span class="string">&#x27;c:/a/b/c/d/hello.txt&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="5-3-用户自定义模块"><a href="#5-3-用户自定义模块" class="headerlink" title="5.3 用户自定义模块"></a>5.3 用户自定义模块</h2><h3 id="5-3-1-模块的加载"><a href="#5-3-1-模块的加载" class="headerlink" title="5.3.1 模块的加载"></a>5.3.1 模块的加载</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#1.  a.js</span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&#x27;aaa&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;a start&#x27;</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  	<span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Error: Cannot find module &#x27;b&#x27;    报错，直接当成核心模块引入</span></span><br><span class="line"><span class="comment">// require(&#x27;b&#x27;)   </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 可以</span></span><br><span class="line"><span class="comment">// require(&#x27;./b.js&#x27;)</span></span><br><span class="line"><span class="comment">// 推荐：可以省略后缀名</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;a end&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;foo 的值是：&#x27;</span>, foo)    <span class="comment">//这里面foo的值仍然是当前a.js中的值，不会是b.js中的值</span></span><br><span class="line"></span><br><span class="line">#2.  b.js</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;b start&#x27;</span>)</span><br><span class="line"><span class="comment">// console.log(add(10, 20))   报错，找不到add方法</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&#x27;bbb&#x27;</span></span><br><span class="line"><span class="built_in">require</span>(<span class="string">&#x27;./c.js&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;b end&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#3.  c.js</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ccc&#x27;</span>)</span><br><span class="line"></span><br><span class="line">#4. 注意点：</span><br><span class="line"><span class="number">1.</span>模块作用域：模块外部访问不到内部的信息，模块内部也访问不到外部的信息</span><br><span class="line"><span class="number">2.</span><span class="built_in">require</span>(<span class="string">&quot;./b.js&quot;</span>) 中.js可以省略。但是前面的./不可以省略，如果省略会当做核心模块引入</span><br><span class="line">   推荐使用<span class="built_in">require</span>(<span class="string">&quot;./b&quot;</span>)。</span><br></pre></td></tr></table></figure>

<h3 id="5-3-2-模块的导出"><a href="#5-3-2-模块的导出" class="headerlink" title="5.3.2 模块的导出"></a>5.3.2 模块的导出</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#1.   b.js</span><br><span class="line"><span class="comment">//    在每个文件模块中都提供了一个对象：exports。 exports 默认是一个空对象</span></span><br><span class="line"><span class="comment">//    我们可以将需要被外部访问的成员挂载到这个 exports 对象中</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&#x27;bbb&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// console.log(exports)</span></span><br><span class="line"><span class="built_in">exports</span>.foo = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">exports</span>.add = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line"> 	 <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#2. a.js</span><br><span class="line"><span class="keyword">var</span> bExports = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bExports.foo)</span><br><span class="line"><span class="built_in">console</span>.log(bExports.add(<span class="number">10</span>, <span class="number">30</span>))</span><br><span class="line"><span class="built_in">console</span>.log(bExports.age)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./a.js&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;读取文件失败&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString())</span><br><span class="line">      &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="6-模块化规范"><a href="#6-模块化规范" class="headerlink" title="6.模块化规范"></a>6.模块化规范</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.传统非模块化开发有如下缺点：命名冲突    文件依赖 </span></span><br><span class="line"><span class="comment">//2.模块化  = 文件作用域+通信规则(模块之间的通信)</span></span><br><span class="line"><span class="comment">//3.标准的前端模块化规范:</span></span><br><span class="line"><span class="number">1.</span>AMD   -----&gt;   <span class="built_in">require</span>.js</span><br><span class="line"><span class="number">2.</span>CMD    -----&gt;   sea.js</span><br><span class="line"><span class="comment">//4.标准的服务端模块化规范：</span></span><br><span class="line"><span class="number">1.</span>CommonJS    ------&gt; Node.js</span><br></pre></td></tr></table></figure>

<p><img src="assets%5C1543897092705.png" alt="1543897092705"></p>
<h2 id="6-1-为什么要使用模块"><a href="#6-1-为什么要使用模块" class="headerlink" title="6.1 为什么要使用模块"></a>6.1 为什么要使用模块</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">#1. test.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js/module1.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js/module2.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> <span class="built_in">module</span>=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;I am module3&#x27;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">module</span>();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">#2.module1.js</span><br><span class="line"><span class="keyword">var</span> <span class="built_in">module</span>=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    cosonle.log(<span class="string">&#x27;I am module1.js&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">#3.module2.js</span><br><span class="line"><span class="keyword">var</span> <span class="built_in">module</span>=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;I am module2.js&quot;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#4. 上面代码的问题</span><br><span class="line">#4.1 加载js的时候，浏览器会停止网页渲染，加载文件越多，网页失去响应的时间就会越长</span><br><span class="line">#4.2 js文件之间存在依赖关系，因此必须严格保证加载顺序（比如上例的1.js要在2.js的前面），依赖性最大的模块一定要放到最后加载，当依赖关系很复杂的时候，代码的编写和维护都会变得困难。</span><br><span class="line">#4.3 多个js文件中声明了同名的变量的时候，会出现命名污染的问题</span><br></pre></td></tr></table></figure>

<h2 id="6-2-AMD"><a href="#6-2-AMD" class="headerlink" title="6.2 AMD"></a>6.2 AMD</h2><h3 id="6-2-1-AMD模块规范"><a href="#6-2-1-AMD模块规范" class="headerlink" title="6.2.1 AMD模块规范"></a>6.2.1 AMD模块规范</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">AMD ： Asynchronous Module Definition。AMD 是 RequireJS 在推广过程中对模块定义的规范化的产出</span><br><span class="line">#1.定义</span><br><span class="line">define(id?,dependencies?,factory);</span><br><span class="line">    - id: 定义中模块的名字;可选；如果没有提供该参数,模块的名字应该默认为模块加载器请求的指定脚本的名字.</span><br><span class="line">    - 依赖dependencies：是一个当前模块依赖的,已被模块定义的模块标识的数组字面量</span><br><span class="line">    - 工厂方法factory,模块初始化要执行的函数或对象.如果为函数,它应该只被执行一次.如果是对象,此对象应该为模块的输出值.</span><br><span class="line">    - 默认情况下文件名即为模块名</span><br><span class="line"></span><br><span class="line">#2.导入</span><br><span class="line"><span class="built_in">require</span>([dependencies],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">    - 第一个参数是一个数组,表示所依赖的模块</span><br><span class="line">    - 第二个参数是一个回调函数,当前面指定的模块都加载成功后,它将被调用.加载的模块会以参数形式传入该函数,从而在回调函数内部就可以使用这些模块</span><br></pre></td></tr></table></figure>

<h3 id="6-2-2-AMD模块案例"><a href="#6-2-2-AMD模块案例" class="headerlink" title="6.2.2 AMD模块案例"></a>6.2.2 AMD模块案例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">#1. test.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">	<span class="comment">//引入require.js</span></span><br><span class="line">    &lt;script src=<span class="string">&quot;js/require.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">//模块的配置</span></span><br><span class="line">        <span class="built_in">require</span>.config(&#123;</span><br><span class="line">            <span class="comment">//baseUrl: &quot;js&quot;,</span></span><br><span class="line">            paths: &#123;</span><br><span class="line">                calculator: <span class="string">&quot;js/calculator&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">		<span class="comment">//引入calculator模块,function中的calculator参数表示模块对象</span></span><br><span class="line">        <span class="built_in">require</span>([<span class="string">&#x27;calculator&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">calculator</span>)</span>&#123;</span><br><span class="line">            alert(calculator.add(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;3&quot;</span>));</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2.calculator.js</span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">    paths: &#123;</span><br><span class="line">        convertor: <span class="string">&quot;js/convertor&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//定义calculator模块，该模块依赖于convertor模块，function中的convertor表示convertor模块对象</span></span><br><span class="line">define(<span class="string">&quot;calculator&quot;</span>, [<span class="string">&#x27;convertor&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params">convertor</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> convertor.convertToNumber(a)+convertor.convertToNumber(b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//导出模块方式一：直接return</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        add: add</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    //导出模块方式二：使用 module.exports</span></span><br><span class="line"><span class="comment">    module.exports = &#123;</span></span><br><span class="line"><span class="comment">        add : add</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">    //导出模块方式三：使用 exports. xx         注意，不能直接给exports赋值，比如exports = &#123;&#125;</span></span><br><span class="line"><span class="comment">    exports. add = add;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.convertor.js</span><br><span class="line"><span class="comment">//定义convertor模块</span></span><br><span class="line">define(<span class="string">&quot;convertor&quot;</span>, [], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> convertToNumber = <span class="function"><span class="keyword">function</span> <span class="title">convertToNumber</span>(<span class="params">input</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">parseFloat</span>(input);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        convertToNumber: convertToNumber</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="6-3-CMD"><a href="#6-3-CMD" class="headerlink" title="6.3 CMD"></a>6.3 CMD</h2><h3 id="6-3-1-CMD模块规范"><a href="#6-3-1-CMD模块规范" class="headerlink" title="6.3.1 CMD模块规范"></a>6.3.1 CMD模块规范</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CMD 即Common Module Definition通用模块定义,CMD规范是国内发展出来的</span><br><span class="line"></span><br><span class="line">#1. 定义</span><br><span class="line">define(id?,d?,factory)</span><br><span class="line">- id : 因为CMD推崇一个文件一个模块,所以经常就用文件名作为模块id</span><br><span class="line">- d : CMD推崇依赖就近,所以一般不在define的参数中写依赖</span><br><span class="line">- factory :函数   <span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>,<span class="built_in">exports</span>,<span class="built_in">module</span></span>)</span></span><br><span class="line"><span class="function">        <span class="title">require</span> 是一个方法,用来获取其他模块提供的接口</span></span><br><span class="line"><span class="function">        <span class="title">exports</span> 是一个对象,用来向外提供模块接口</span></span><br><span class="line"><span class="function">        <span class="title">module</span> 是一个对象,上面存储了与当前模块相关联的一些属性和方法</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">#2. 使用</span></span><br><span class="line"><span class="function"><span class="title">seajs</span>.<span class="title">use</span>(<span class="params"><span class="string">&#x27;mymodel.js&#x27;</span>,<span class="keyword">function</span>(mymodel)&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;</span>)</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-2-CMD模块案例"><a href="#6-3-2-CMD模块案例" class="headerlink" title="6.3.2 CMD模块案例"></a>6.3.2 CMD模块案例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#1. test.html</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Seajs体验&lt;/title&gt;</span><br><span class="line">    &lt;script src=<span class="string">&quot;js2/sea.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="comment">// 在seajs中模块的引入需要相对路径完整写法</span></span><br><span class="line">        seajs.use(<span class="string">&#x27;./js2/calculator.js&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">calculator</span>) </span>&#123;</span><br><span class="line">            <span class="comment">//calculator其实就是calculator.js中的exports对象</span></span><br><span class="line">            <span class="keyword">var</span> value = calculator.add(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;11&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(value);</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#2. calculator.js</span><br><span class="line"><span class="comment">// 定义一个模块，遵循Seajs的写法</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 此处是模块的私有空间</span></span><br><span class="line">    <span class="comment">// 载入convertor.js模块</span></span><br><span class="line">    <span class="keyword">var</span> convertor = <span class="built_in">require</span>(<span class="string">&#x27;./convertor.js&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义模块的私有成员</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> convertor.convertToNumber(a) + convertor.convertToNumber(b);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 暴露模块的公共成员</span></span><br><span class="line">    <span class="built_in">exports</span>.add = add;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    导出模块仍然三种方式</span></span><br><span class="line"><span class="comment">    module.exports</span></span><br><span class="line"><span class="comment">    exports.xxx</span></span><br><span class="line"><span class="comment">    return</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#3.convertor.js</span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>, <span class="built_in">exports</span>, <span class="built_in">module</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 公开一些转换逻辑</span></span><br><span class="line">    <span class="built_in">exports</span>.convertToNumber = <span class="function"><span class="keyword">function</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">parseFloat</span>(input);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="6-4-AMD和CMD区别"><a href="#6-4-AMD和CMD区别" class="headerlink" title="6.4 AMD和CMD区别"></a>6.4 AMD和CMD区别</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>CMD 推崇依赖就近;AMD 推崇依赖前置</span><br><span class="line"><span class="number">2.</span>CMD 是延迟执行,懒加载;AMD 是提前执行</span><br><span class="line"><span class="number">3.</span>CMD性能好,因为只有用户需要的时候才执行;AMD用户体验好,因为没有延迟,依赖模块提前执行了</span><br><span class="line"></span><br><span class="line"># 总结：AMD和CMD最大的区别是对依赖模块的执行时机处理不同,注意不是加载的时机或者方式不同。两者都是异步加载模块。</span><br><span class="line"></span><br><span class="line"><span class="comment">//AMD</span></span><br><span class="line">define([<span class="string">&#x27;./a&#x27;</span>,<span class="string">&#x27;./b&#x27;</span>],<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">      a.doSomething()</span><br><span class="line">      b.dosomething()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="built_in">require</span>,<span class="built_in">exports</span>,<span class="built_in">module</span></span>)</span>&#123;</span><br><span class="line">      <span class="keyword">var</span> a=<span class="built_in">require</span>(<span class="string">&#x27;./a&#x27;</span>)</span><br><span class="line">      a.doSomethimg()</span><br><span class="line">      <span class="keyword">var</span> b=<span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>)</span><br><span class="line">      b.doSomething()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="6-5-CommonJS"><a href="#6-5-CommonJS" class="headerlink" title="6.5 CommonJS"></a>6.5 CommonJS</h2><h3 id="6-5-1-CommonJS模块化规范"><a href="#6-5-1-CommonJS模块化规范" class="headerlink" title="6.5.1 CommonJS模块化规范"></a>6.5.1 CommonJS模块化规范</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Node.js使用了CommonJS模块化规范</span><br><span class="line"> </span><br><span class="line"><span class="comment">//1.加载模块</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">module</span> = <span class="built_in">require</span>(<span class="string">&quot;模块名称&quot;</span>);</span><br><span class="line"></span><br><span class="line">作用：执行被加载模块中的代码</span><br><span class="line">          得到被加载模块中的<span class="built_in">exports</span>对象</span><br><span class="line">          </span><br><span class="line"><span class="comment">//2.导出模块</span></span><br><span class="line">对于希望被其他模块加载的成员，我们可以将它挂载到<span class="built_in">exports</span>对象中</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#01.js</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./test.js&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;我是01.js，我认识a么？&quot;</span> + a);<span class="comment">//访问不到，会报错</span></span><br><span class="line"></span><br><span class="line">#test.js</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;我是test.js文件，我认识a，值是&quot;</span> + a);</span><br><span class="line"></span><br><span class="line">#CommonJS中 一个文件就是一个模块，拥有单独的作用域；</span><br></pre></td></tr></table></figure>

<p><img src="assets%5C1554954010643.png" alt="1554954010643"></p>
<h3 id="6-5-2-导出单个和多个成员"><a href="#6-5-2-导出单个和多个成员" class="headerlink" title="6.5.2 导出单个和多个成员"></a>6.5.2 导出单个和多个成员</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.导出单个成员</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&#x27;bar&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">exports</span>.foo = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"><span class="built_in">exports</span>.add = add</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.导出多个成员</span></span><br><span class="line"><span class="comment">// 如果一个模块需要直接导出某个成员，而非挂载的方式</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  add: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line">  &#125;,</span><br><span class="line">  str: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 导出单个成员和多个成员的原理：</span><br><span class="line">	为了方便，node为每个模块提供一个<span class="built_in">exports</span>变量，其指向<span class="built_in">module</span>.exports，相当于在模块头部加了这句话：</span><br><span class="line">	<span class="keyword">var</span> <span class="built_in">exports</span> = <span class="built_in">module</span>.exports，在对外输出时，可以给<span class="built_in">exports</span>对象添加方法</span><br><span class="line">    PS：<span class="built_in">exports</span>不能直接赋值（因为这样就切断了<span class="built_in">exports</span>和<span class="built_in">module</span>.exports的联系）;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-3-模块的缓存"><a href="#6-5-3-模块的缓存" class="headerlink" title="6.5.3 模块的缓存"></a>6.5.3 模块的缓存</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.a.js</span></span><br><span class="line"><span class="keyword">var</span> fn = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> fn = <span class="built_in">require</span>(<span class="string">&#x27;./b&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(fn)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.b.js</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;b.js 被加载了&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以发现b.js指打印了一次</span></span><br><span class="line"></span><br><span class="line"># 所有代码都运行在模块作用域，不会污染全局作用域；模块可以多次加载，但只会在第一次加载的时候运行一次，然后运行结果就被缓存了，以后再加载，就直接读取缓存结果；模块的加载顺序，按照代码的出现顺序是同步加载的;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-4-require加载规则"><a href="#6-5-4-require加载规则" class="headerlink" title="6.5.4 require加载规则"></a>6.5.4 require加载规则</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1. 非路径形式的模块标识</span></span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">   <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2. 路径形式的模块：</span></span><br><span class="line">  ./  当前目录，不可省略</span><br><span class="line">  ../ 上一级目录，不可省略</span><br><span class="line">  /   表示当前磁盘根目录，几乎不用</span><br><span class="line">  d:<span class="regexp">/a/</span>foo.js   几乎不用</span><br><span class="line"></span><br><span class="line">  <span class="string">`.js 后缀名可以省略`</span></span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&#x27;./foo.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.第三方模块</span></span><br><span class="line">    凡是第三方模块都必须通过 npm 来下载</span><br><span class="line">    使用的时候就可以通过 <span class="built_in">require</span>(<span class="string">&#x27;包名&#x27;</span>) 的方式来进行加载才可以使用</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> template = <span class="built_in">require</span>(<span class="string">&#x27;art-template&#x27;</span>) 查找步骤如下：</span><br><span class="line">      a) 先找到当前文件所处目录中的 node_modules 目录</span><br><span class="line">      b) node_modules/art-template.js 或者art-template.json 或者art-template.node</span><br><span class="line">      c) 找到node_modules/art-template包</span><br><span class="line">      d) 找到node_modules/art-template/package.json 文件中的 main 属性, main 属性中就记录了 art-template 的入口模块</span><br><span class="line">      e) 然后加载使用这个第三方包， 实际上最终加载的还是文件</span><br><span class="line">	  f) 如果 package.json 文件不存在或者 main 指定的入口模块是也没有，则 node 会自动找该目录下的 index.js，也就是说 index.js 会作为一个默认备选项</span><br><span class="line">      g) 如果以上所有任何一个条件都不成立，则会进入上一级目录中的 node_modules 目录查找package.json或者index.js</span><br><span class="line">      h) 如果上一级还没有，则继续往上上一级查找</span><br><span class="line">      i) 如果直到当前磁盘根目录还找不到，最后报错： can not find <span class="built_in">module</span> xxx</span><br><span class="line">            </span><br><span class="line">      </span><br><span class="line"> <span class="comment">//深入Node.js的模块机制 : http://www.cnblogs.com/takemybreathaway/articles/9757342.html</span></span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line"> # 注意：如果是下面这种目录结构，main.js将无法访问到node_modules</span><br><span class="line"> blog</span><br><span class="line">      -- a</span><br><span class="line">          --- node_modules</span><br><span class="line">      -- b</span><br><span class="line">          <span class="comment">//无法访问a目录下的node_modules，只能查找到当前目录和当前目录的父级目录下的node_modules</span></span><br><span class="line">          <span class="comment">//所以一般情况下，node_modules放在项目根目录下</span></span><br><span class="line">          --- main.js</span><br></pre></td></tr></table></figure>

<h3 id="6-5-5-同步加载与异步函数"><a href="#6-5-5-同步加载与异步函数" class="headerlink" title="6.5.5  同步加载与异步函数"></a>6.5.5  同步加载与异步函数</h3><h4 id="a-同步加载"><a href="#a-同步加载" class="headerlink" title="a) 同步加载"></a>a) 同步加载</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>：CommonJS中的<span class="built_in">require</span>是同步加载的</span><br><span class="line"></span><br><span class="line"># CommonJS采用同步方式加载模块，因为所有的模块都存放在本地硬盘，可以同步加载完成，等待时间就是硬盘的读取时间。但是浏览器不能同步加载模块，因为模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器会处于&quot;假死&quot;状态。</span><br></pre></td></tr></table></figure>

<h4 id="b-异步函数"><a href="#b-异步函数" class="headerlink" title="b) 异步函数"></a>b) 异步函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#1.a.jx</span><br><span class="line"><span class="built_in">require</span>(<span class="string">&quot;./b.js&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;你好，我是a.js文件里面的语句&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#2.b.js</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;你好，我是b.js文件里面的语句&quot;</span>);</span><br><span class="line">fs.readFile(<span class="string">&quot;./aa.txt&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&quot;你好，我是b.js回调函数里面的语句&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">#3.node a.js</span><br><span class="line"></span><br><span class="line"><span class="comment">//require的文件中如果有异步语句，此时nodejs不会死等它结束，会返回执行主文件中的程序，如果文件读取完毕，执行回调函数</span></span><br></pre></td></tr></table></figure>

<pre><code>打印顺序如下：</code></pre>
<p><img src="assets%5C1554953361788.png" alt="1554953361788"></p>
<h1 id="7-包管理"><a href="#7-包管理" class="headerlink" title="7.包管理"></a>7.包管理</h1><h2 id="7-1-包说明文件"><a href="#7-1-包说明文件" class="headerlink" title="7.1 包说明文件"></a>7.1 包说明文件</h2><h3 id="7-1-1-package-json"><a href="#7-1-1-package-json" class="headerlink" title="7.1.1 package.json"></a>7.1.1 package.json</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.一般情况下，每个项目都会有一个package.json用来记录当前项目所有依赖的包</span></span><br><span class="line">npm install art-template --save</span><br><span class="line">上面的命令会自动将当前安装的art-template添加到package.json文件中，表示当前项目依赖art-template</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.我们还可以通过npm init 命令来初始化package.json</span></span><br><span class="line"><span class="string">`package.json`</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;blog&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.0.1&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;测试&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;main.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;mazg&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;jquery&quot;</span>: <span class="string">&quot;^3.3.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="assets%5C1543907462062.png" alt="1543907462062"></p>
<h3 id="7-1-2-package-lock-json"><a href="#7-1-2-package-lock-json" class="headerlink" title="7.1.2 package-lock.json"></a>7.1.2 package-lock.json</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package-lock.json有两个作用：</span><br><span class="line"><span class="number">1.</span>记录package.json文件中所有第三方组件的依赖信息，方便下次再去下载</span><br><span class="line"><span class="number">2.</span>锁定第三方组件的版本信息，下次再去下载的时候会去下载指定的版本信息</span><br><span class="line"></span><br><span class="line"> <span class="comment">//package.json中的^表示只要express版本在4.16.4之上的版本都可以</span></span><br><span class="line"> <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;express&quot;</span>: <span class="string">&quot;^4.16.4&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//package-lock.json 当这个文件存在的时候，就固定住了express的版本，下次再去下载的时候只会去下载该版本</span></span><br><span class="line">  <span class="string">&quot;express&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;version&quot;</span>: <span class="string">&quot;4.16.4&quot;</span>,</span><br><span class="line">      <span class="string">&quot;resolved&quot;</span>: <span class="string">&quot;http://registry.npm.taobao.org/express/download/express-4.16.4.tgz&quot;</span>,</span><br><span class="line">      .....</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="7-2-NPM"><a href="#7-2-NPM" class="headerlink" title="7.2 NPM"></a>7.2 NPM</h2><h3 id="7-2-1-介绍"><a href="#7-2-1-介绍" class="headerlink" title="7.2.1 介绍"></a>7.2.1 介绍</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">官网：https:<span class="comment">//www.npmjs.com/</span></span><br><span class="line">我们下载的第三方包都是从这个网站下载下来的</span><br><span class="line"></span><br><span class="line">NPM是Node.js下的一个包管理工具，只要安装了node就会自带NPM</span><br></pre></td></tr></table></figure>

<h3 id="7-2-2-NPM常用命令："><a href="#7-2-2-NPM常用命令：" class="headerlink" title="7.2.2 NPM常用命令："></a>7.2.2 NPM常用命令：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">npm  -version                                       查看npm版本</span><br><span class="line">npm  init</span><br><span class="line">npm  init -y                                            跳过向导，快速生成</span><br><span class="line">npm  install                                           找到package.json中的依赖项，一次性安装依赖  </span><br><span class="line">npm  install  包名1  包名2   包名3</span><br><span class="line">npm  install  包名  --save                      向生产环境添加依赖</span><br><span class="line">npm  install  包名  --save-dev              向开发环境添加依赖，开发的时候用到的工具，比如babel\webpack\gulp等</span><br><span class="line">npm  install  包名  --g                           全局安装</span><br><span class="line">npm  uninstall  包名</span><br><span class="line">npm  uninstall  包名  --save</span><br><span class="line">npm  update 包名</span><br><span class="line">npm  help                                              帮助</span><br><span class="line">npm  install  help                                   查看具体某个命令的帮助</span><br><span class="line">npm  run</span><br></pre></td></tr></table></figure>

<h3 id="7-2-3-NPM翻墙"><a href="#7-2-3-NPM翻墙" class="headerlink" title="7.2.3 NPM翻墙"></a>7.2.3 NPM翻墙</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="comment">//npm.taobao.org/     淘宝开发团队将NPM在国内做了一个备份</span></span><br><span class="line"><span class="comment">//1.安装cnpm</span></span><br><span class="line">npm install cnpm -g           安装cnpm</span><br><span class="line">cnpm install jquery             使用cnpm安装jquery(淘宝镜像)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.修改npm镜像源地址</span></span><br><span class="line">npm install bootstrap --save --registry=https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line"></span><br><span class="line">npm config set registry https:<span class="comment">//registry.npm.taobao.org</span></span><br><span class="line">npm config list                    查看npm的配置文件列表</span><br></pre></td></tr></table></figure>

<pre><code>什么是镜像：原来包刚一开始是只存在于国外的NPM服务器，但是由于网络原因，经常访问不到，这时候我们可以在国内创建一个和官网完全一样的NPM服务器，只不过数据都是从人家那里拿过来的，除此之外使用方式完全一样；</code></pre>
<h3 id="7-2-4-NRM使用"><a href="#7-2-4-NRM使用" class="headerlink" title="7.2.4 NRM使用"></a>7.2.4 NRM使用</h3><pre><code>默认情况下，NPM会自动从registry.npmjs.org网站下载资源，为了解决这个问题，我们需要修改NPM的镜像源。如果我们想快速方便的切换镜像源，我们可以使用NRM。

作用:提供一些常用的NPM包镜像地址，让我们快速的切换安装包时候的服务器地址</code></pre>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install nrm -g</span><br><span class="line">nrm ls                     列出所有镜像源</span><br><span class="line">nrm use taobao     使用某个镜像源</span><br></pre></td></tr></table></figure>

<h3 id="7-2-5-YARN工具基本使用"><a href="#7-2-5-YARN工具基本使用" class="headerlink" title="7.2.5 YARN工具基本使用"></a>7.2.5 YARN工具基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yarn也是一个包管理工具</span><br><span class="line"></span><br><span class="line">npm install -g yarn     安装yarn  </span><br><span class="line">yarn  init                     初始化</span><br><span class="line">yarn install                  安装所有依赖</span><br><span class="line">yar add jquery        </span><br><span class="line">yarn add jquery --dev</span><br><span class="line">yarn  remove  jquery</span><br><span class="line">yarn upgrade jquery    更新包</span><br><span class="line">yarn config set registry url   设置镜像</span><br><span class="line">yarn run</span><br></pre></td></tr></table></figure>

			  </article>
		</div>
		
		


		 	
				<style>
.veditor {
    background: url('https://www.calamus.xyz/wp-content/themes/lensnews2.2/images/loading/comment.gif') no-repeat #fcfcfc!important;
    background-size: auto 130px!important;
    background-position: right bottom!important;
}
</style>
<div id="vcomments" class="comment">

</div>
<script>
	window.valine = new Valine({
		el: '#vcomments',
		appId: 'jNrzXxvqR3NhebnE7swyQBFp-gzGzoHsz',
		appKey: 'iqXsTlkThMqeaKdhYcgajztG',
		avatar: 'robohash',
		placeholder: '留下你的小脚印吧~',
		path: window.location.pathname,   //[重点] 记得添加path路径
	});
	
    // 使用方法 https://valine.js.org/quickstart.html
	/*
		var $vcomments = document.querySelector('.comment');
		var $div= document.createElement('div');
		$div.setAttribute("id","#vcomments");
		$vcomments.appendChild($div);
    new Valine({
        el: '#vcomments',
        appId: 'jNrzXxvqR3NhebnE7swyQBFp-gzGzoHsz',
        appKey: 'iqXsTlkThMqeaKdhYcgajztG',
		avatar: 'robohash',
        placeholder: '输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ',
    });*/
        //placeholder: '输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ',
</script>

<script>
/*//$(function() 
$(window).load(function(){
	// 去valine版权
	$('.info').css("display","none");
	// 去valine位移
	$('.vmeta').css("padding-right","66px");
	$('.vcontrol').css("padding-right","66px");
	$('.vctrl').css("padding-right","66px");
	$('#veditor').removeAttr("placeholder");
	$("#veditor").attr("placeholder","输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ");
	$('.v .vwrap .vheader .vinput:nth-child(3)').removeAttr("placeholder");
	$(".v .vwrap .vheader .vinput:nth-child(3)").attr("placeholder","你的HOME(例：https://www.baidu.com)");
	$(".info").after(" <p>&copy; </p>");
});*/
</script>
			
		
	  
	
		


<div class="copy">
<i></i>
<strong>本文作者：</strong>
	
	 
			风清<br>
        
	
<strong>本文链接：</strong>
	<a href="https://fengqing7511.github.io/2020/09/25/04.node/" title="https:&#x2F;&#x2F;fengqing7511.github.io&#x2F;2020&#x2F;09&#x2F;25&#x2F;04.node&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;fengqing7511.github.io&#x2F;2020&#x2F;09&#x2F;25&#x2F;04.node&#x2F;</a><br>
</div>

	  
	</div>
</div>
<script>
	(function(){
		var jmz = {};
		jmz.GetLength = function(str) {
			var realLength = 0, len = str.length, charCode = -1;
			for (var i = 0; i < len; i++) {
				charCode = str.charCodeAt(i);
				if (charCode >= 0 && charCode <= 128) 
					  realLength += 1;
				else
					  realLength += 1;
			}
			return realLength;
		};
		//console.log(str);
		var article = document.querySelector('.dearmsdan-post article').innerHTML.trim();

		var b = article.replace(/<.*?>/ig,"");
		
		$('.post-count').html(jmz.GetLength(b)+"字");
	})()
</script>


    				
					
	
	<script src="/resources/jscex/jscex.min.js"></script>
	<script src="/resources/jscex/jscex-parser.js"></script>
	<script src="/resources/jscex/jscex-jit.js"></script>
	<script src="/resources/jscex/jscex-builderbase.min.js"></script>
	<script src="/resources/jscex/jscex-async.min.js"></script>
	<script src="/resources/jscex/jscex-async-powerpack.min.js"></script>


<style>
	footer{    
		position: static;
    	padding: 20px;
		/*margin-top: 50px;*/
    	text-align: center;
		font-size: inherit;
}
}
	.footer{
    	padding: 20px;
		/*margin-top: 50px;*/
    	text-align: center;
    	border-radius: 50px;
    	background: rgba(84, 76, 76, 0.08);
}
	.footer:hover{        
    	background: rgba(84, 76, 76, 0.08);
    	/*background-image: url('/resources/snow.gif')!important;*/
    	background-size: contain!important;
		box-shadow: 0 4px 24px rgb(109, 108, 108);
		transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1) 0s;
		text-decoration: none;
}
	.footer a{
		text-decoration: none;
    	color: #7d7dff;
		font-family: initial;
	}
	.footer a:hover{
    color: rgba(255, 255, 255, 0)!important;
	}
	.footer .footer-logo{
		color: #2c97e8;
	}
	.footer .footer-logo img{   
		margin-left: 20px;
	}
	.foor{
	overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
	}
	
	.footer a::after {
	/*	color: #7cc2ff;*/
	  -webkit-transition: width 0.35s;
	  transition: width 0.35s;
	  content: "";
	  right: 0;
	  width: 0;
	  bottom: -2px;
	  position: absolute;
	  border-bottom: 2px solid;
	}
	.footer a:hover:after {
		left: 1%;
		right: 1%;
		opacity: 1;
		-webkit-transition: all .5s;
		-o-transition: all .5s;
		-ms-transition: all .5s;
		transition: all .5s;
	}
</style>


<footer class="footer">	
	<div class="footer-content">
		<div class="foor"></div>
		<div class="foor">
			© 2020 
			hi 风清.  
			 <span id="dearmsdan-time-box"> 
				 网站已经运行了<span id="dearmsdan-time"></span>
			 </span>...
		</div>
		<div class="foor">
			<a style='color:#939393;' href='http://hn.beian.miit.gov.cn/' target='_blank'> <img width='16px' src='https://img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png' />湘ICP备20001824号 </a>·<a target='_blank' href='http://www.beian.gov.cn/portal/registerSystemInfo' style='display:inline-block;text-decoration:none;height:20px;line-height:20px;'><p style='height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;'>湘公网安备 43010302001049号</p></a>
		</div>
	</div>
</footer>
<script>

var $win = $(window);
var clientWidth = $win.width();
var clientHeight = $win.height();

/* $(window).resize(function() {
    var newWidth = $win.width();
    var newHeight = $win.height();
    if (newWidth != clientWidth && newHeight != clientHeight) {
        location.replace(location);
    }
}); */
 
(function($) {
	$.fn.typewriter = function() {
		this.each(function() {
			var $ele = $(this), str = $ele.html(), progress = 0;
			$ele.html('');
			var timer = setInterval(function() {
				var current = str.substr(progress, 1);
				if (current == '<') {
					progress = str.indexOf('>', progress) + 1;
				} else {
					progress++;
				}
				$ele.html(str.substring(0, progress) + (progress & 1 ? '_' : ''));
				if (progress >= str.length) {
					clearInterval(timer);
				}
			}, 75);
		});
		return this;
	};
})(jQuery);
 
function timeElapse(date){
	var current = Date();
	var seconds = (Date.parse(current) - Date.parse(date)) / 1000;
	var days = Math.floor(seconds / (3600 * 24));
	seconds = seconds % (3600 * 24);
	var hours = Math.floor(seconds / 3600);
	if (hours < 10) {
		hours = "0" + hours;
	}
	seconds = seconds % 3600;
	var minutes = Math.floor(seconds / 60);
	if (minutes < 10) {
		minutes = "0" + minutes;
	}
	seconds = seconds % 60;
	if (seconds < 10) {
		seconds = "0" + seconds;
	}
	var result = "第 <span class=\"digit\">" + days + "</span> 天 <span class=\"digit\">" + hours + "</span> 小时 <span class=\"digit\">" + minutes + "</span> 分钟 <span class=\"digit\">" + seconds + "</span> 秒"; 
	$("#dearmsdan-time").html(result);
}
    </script>
	<script>
	
	
	
	
	
	var textAnimate = eval(Jscex.compile("async", function () 
		{
		    var together = new Date();
		    together.setFullYear(2019,11, 25); 			//时间年月日，注意月份是0-11
		    together.setHours(0);						//小时	
		    together.setMinutes(0);						//分钟
		    together.setSeconds(0);						//秒前一位
		    together.setMilliseconds(0);				//秒第二位
            $("#dearmsdan-time-box").fadeIn(500);
            while (true) {
                timeElapse(together);
                $await(Jscex.Async.sleep(1000));
            }
		}));
 
		textAnimate().start();

	
	
	
	
	</script>



				</div>
			</div>
		</div>

		
	
	



<div class="toping"></div>


<script>
      var browsehappy_config = {
        ie: 12,
        type: 'box',
        debug: false,
        tip: "站点目前不支持 IE 请 ↓↓↓",
        show:['chrome','firefox','360','qq','opera']
      };
    </script>
    <script src="https://cdn.jsdelivr.net/gh/a632079/browserhappy@0.0.1/browserhappy.min.js"></script>



<link href="/resources/meuplayer/css/player.css" rel="stylesheet" type="text/css" />


<div id="jp_container_N" class="jp-video jp-video-270p" role="application" aria-label="media player" style="left: 0px; height: 94px; bottom: 20px;">
	<div class="jp-type-playlist">
		<div id="jquery_jplayer_N" class="jp-jplayer" style="width: 90px; height: 90px;">	<img id="jp_poster_0" style="width: 90px; height: 90px; display: inline;" src="">
			<audio id="jp_audio_0" preload="metadata" src="" title="加载中...."></audio>
			<video id="jp_video_0" preload="metadata" title="加载中...." style="width: 0px; height: 0px;"></video>
		</div>
		<div class="jp-gui">
			<div class="jp-video-play" style="display: none;">
				<button class="jp-video-play-icon" role="button" tabindex="0">播放</button>
			</div>
			<div class="jp-interface">
				<div class="jp-progress">
					<div class="jp-seek-bar" style="width: 100%;">
						<div class="jp-play-bar" style="overflow: hidden; width: 0%;"></div>
					</div>
				</div>
				<div class="jp-current-time" role="timer" aria-label="time">00:00</div>
				<div class="jp-duration" role="timer" aria-label="duration">05:25</div>
				<div class="jp-controls-holder">
					<div class="jp-controls">
						<button class="jp-previous" role="button" tabindex="0">上一曲</button>
						<button class="jp-play" role="button" tabindex="0">播放</button>
						<button class="jp-next" role="button" tabindex="0">下一曲</button>
						<button class="jp-stop" role="button" tabindex="0">暂停</button>
					</div>
					<div class="jp-volume-controls">
						<button class="jp-mute" role="button" tabindex="0">静音</button>
						<button class="jp-volume-max" role="button" tabindex="0">最大音量</button>
						<div class="jp-volume-bar">
							<div class="jp-volume-bar-value" style="width: 80%;"></div>
						</div>
					</div>
					<div class="jp-toggles">
						<button class="jp-repeat" role="button" tabindex="0">重复</button>
						<button class="jp-shuffle" role="button" tabindex="0">随机</button>
					</div>
				</div>
				<div class="jp-details" style="display: none;">
				<div class="jp-title" aria-label="title">加载中....</div>
				</div>
			</div>
		</div>
		<div class="jp-playlist">
			<div class="jp-playlist-box" style="height: 0px;">
				<ul style="height: 1000px; display: block; top: 0px;">
					
				</ul>
			</div>
		</div>
		<div class="jp-no-solution" style="display: none;">
			<span style="transform: rotate(180deg);">升级需要</span> 您浏览器赞不支持播放，请更新版本
			<a href="http://get.adobe.com/flashplayer" target="_blank">Flash插件</a>.
		</div>
	</div>

	<div class="scrollBar" style="display: block;">
		<div class="bar" style="top: 0px;"></div>
	</div>

	<button type="button" class="folded_bt" title="点击收缩" id="btnfold" style="top: 0px;">
	<span style="transform: rotate(180deg);"></span>
	</button>

	<div id="listClose"></div>

</div>


<script async src="/resources/meuplayer/player/player.js"></script>
<script async src="/resources/meuplayer/player/playlist.js"></script>
<script type="text/javascript">

   if (window.addEventListener) {window.addEventListener("load",dearmsdanPlaylist, false); } 
   else if (window.attachEvent) { window.attachEvent("onload",dearmsdanPlaylist);}  
   else{window.onload =dearmsdanPlaylist; }
      

function dearmsdanPlaylist(){
	
var myPlaylist = new jPlayerPlaylist({
		jPlayer: "#jquery_jplayer_N",
		cssSelectorAncestor: "#jp_container_N",
		error: function(event){ }
	},[
   
   	{	
    		title: "Right Here Waiting",
			artist: "Richard Marx",
    		mp3: "http://music.163.com/song/media/outer/url?id=3313653.mp3",
    		poster: "http://p2.music.126.net/_62h3kA2WCrYEXWL0yaJ7Q==/1743825441658717.jpg?param=130y130"
	},
   
   	{	
    		title: "勇气",
			artist: "棉子",
    		mp3: "http://music.163.com/song/media/outer/url?id=1411358329.mp3",
    		poster: "http://p2.music.126.net/QcWNRX_0uhckImvF2nN1xA==/109951164573973377.jpg?param=130y130"
	},
   
   	{	
    		title: "东京不太热",
			artist: "封茗囧菌",
    		mp3: "http://music.163.com/song/media/outer/url?id=34723470.mp3",
    		poster: "http://p1.music.126.net/srjmIxgdjRlCXSjZtl2aaw==/109951163825045428.jpg?param=90y90"
	},
   
   	{	
    		title: "空山新雨后",
			artist: "冷十三",
    		mp3: "http://music.163.com/song/media/outer/url?id=1397565121.mp3",
    		poster: "http://p1.music.126.net/jio03zzjVqkuofI0054Syg==/109951164433163481.jpg?param=177y177"
	},
   
   	{	
    		title: "拜拜",
			artist: "小竖琴",
    		mp3: "http://music.163.com/song/media/outer/url?id=1383594415.mp3",
    		poster: "http://p1.music.126.net/aRpHnChT3GFQI7AsqCw6iA==/109951164284919406.jpg?param=130y130"
	},
   
   	{	
    		title: "冬眠",
			artist: "司南",
    		mp3: "http://music.163.com/song/media/outer/url?id=1398663411.mp3",
    		poster: "http://p1.music.126.net/4KDBaQXnQywQovmqvjx-8Q==/109951164444131697.jpg?param=130y130"
	},
   
   	{	
    		title: "我的名字",
			artist: "焦迈奇",
    		mp3: "http://music.163.com/song/media/outer/url?id=554241732.mp3",
    		poster: "http://p1.music.126.net/a_rb8pgC5R_hO-lfm7acSw==/109951164019567772.jpg?param=130y130"
	},
   
   	{	
    		title: "还是分开",
			artist: "张叶蕾",
    		mp3: "http://music.163.com/song/media/outer/url?id=465921195.mp3",
    		poster: "http://p1.music.126.net/tH5FdakJX47uy8mlM0GMWQ==/19218363741925314.jpg?param=130y130"
	},
   
   	{	
    		title: "云烟成雨",
			artist: "房东的猫",
    		mp3: "http://music.163.com/song/media/outer/url?id=513360721.mp3",
    		poster: "http://p1.music.126.net/DSTg1dR7yKsyGq4IK3NL8A==/109951163046050093.jpg?param=130y130"
	},
   
],{
    playlistOptions: {
        autoPlay: true,
        enableRemoveControls: true
    },
	loop: true,
    swfPath: "js/",
    supplied: "webmv, ogv, m4v, oga, mp3",
    useStateClassSkin: true,
    autoBlur: true,
    smoothPlayBar: true,
    keyEnabled: true,
    audioFullScreen: true,
  	volume: .14
});
var latest = [{
    title: "默",
    artist: "那英",
    mp3: "http://music.163.com/song/media/outer/url?id=31473269.mp3 ",
    poster: "http://p1.music.126.net/OCGt5ln0lPPtPbVJ3VEKtA==/109951163020570422.jpg?param=130y130"
}];
var spirit = [{
    title: "M19+20",
    artist: "梶浦由記",
    mp3: "http://music.163.com/song/media/outer/url?id=591753.mp3 ",
    poster: "http://p1.music.126.net/lW4YKD6cMgm32nI66CzWVg==/5702067301704441.jpg?param=130y130"
}];
	
}
	

	
	
	
	
$("#latest li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: latest[k].title,
        artist: latest[k].artist,
        mp3: latest[k].mp3,
        poster: latest[k].poster
    });
    myPlaylist.play(-1);
});
$("#popular li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: popular[k].title,
        artist: popular[k].artist,
        mp3: popular[k].mp3,
        poster: popular[k].poster
    });
    myPlaylist.play(-1);
});
$("#rank li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: rank[k].title,
        artist: rank[k].artist,
        mp3: rank[k].mp3,
        poster: rank[k].poster
    });
    myPlaylist.play(-1);
});
$("#main li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: main[k].title,
        artist: main[k].artist,
        mp3: main[k].mp3,
        poster: main[k].poster
    });
    myPlaylist.play(-1);
});
$("#spirit li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: spirit[k].title,
        artist: spirit[k].artist,
        mp3: spirit[k].mp3,
        poster: spirit[k].poster
    });
    myPlaylist.play(-1);
});
$("#magic li").find("a.playIcon").click(function() {
    var m = $(this).parent("li").index();
    myPlaylist.add({
        title: magic[m].title,
        artist: magic[m].artist,
        mp3: magic[m].mp3,
        poster: magic[m].poster
    });
    myPlaylist.play(-1);
});
$("#playlist-remove").click(function() {
    myPlaylist.remove();
});
$("#listRemove").click(function() {
	alert("删除就都没啦");
    myPlaylist.remove();
});
$("#playlist-next").click(function() {
    myPlaylist.next();
});
$("#playlist-previous").click(function() {
    myPlaylist.previous();
});
$("#playlist-play").click(function() {
    myPlaylist.play();
});
$("#playlist-play--2").click(function() {
    myPlaylist.play(-2);
});
$("#playlist-play--1").click(function() {
    myPlaylist.play(-1);
});
$("#playlist-play-0").click(function() {
    myPlaylist.play(0);
});
$("#playlist-play-1").click(function() {
    myPlaylist.play(1);
});
$("#playlist-play-2").click(function() {
    myPlaylist.play(2);
});
$("#playlist-pause").click(function() {
    myPlaylist.pause();
});
$("#playlist-option-autoPlay-true").click(function() {
    myPlaylist.option("autoPlay", true);
});
$("#playlist-option-autoPlay-false").click(function() {
    myPlaylist.option("autoPlay", false);
});
var $bar = $(".bar");
var $scrollBar = $(".scrollBar");
var $maxH = $scrollBar.innerHeight() - $bar.outerHeight();
var $ul = $(".jp-playlist ul");
var $li = $(".jp-playlist ul li");
var disY = 0;
var iScale = 0;
var iSpeed = 0;
$ul.height(1000);
$bar.mousedown(function(event) {
    var event = event || window.event;
    disY = event.clientY - $(this).position().top;
    $(document).bind("mousemove", function(event) {
        var event = event || window.event;
        var iH = event.clientY - disY;
        iH <= 0 && (iH = 0);
        iH >= $maxH && (iH = $maxH);
        $bar.css({
            top: iH + "px"
        });
        iScale = -iH / $maxH;
        $ul.css({
            top: iScale * ($ul.height() - $(".jp-playlist-box").height()) + "px"
        });
        return false;
    });
    $(document).bind("mouseup", function() {
        $(document).unbind("mousemove");
        $(document).unbind("mouseup");
    });
    return false;
});
$(".jp-playlist-box").mouseover(function() {
    addHandler(this, "mousewheel", mouseWheel);
    addHandler(this, "DOMMouseScroll", mouseWheel);
    return false;
});
function addHandler(element, type, handler) {
    return element.addEventListener ? element.addEventListener(type, handler, false) : element.attachEvent("on" + type, handler, false)
}
function mouseWheel(event) {
    var event = event || window.event;
    if (event.wheelDelta) {
        iSpeed = event.wheelDelta > 0 ? -3 : 3;
    } else if (event.detail) {
        iSpeed = event.detail < 0 ? -3 : 3;
    }
    move();
    if (event.preventDefault) {
        event.preventDefault();
    }
}
;function move() {
    var iH = $bar.position().top;
    iH = iH + iSpeed;
    iH <= 0 && (iH = 0);
    iH >= $maxH && (iH = $maxH);
    $bar.css({
        top: iH + "px"
    });
    iScale = -iH / $maxH;
    $ul.css({
        top: iScale * ($ul.height() - $(".jp-playlist-box").height()) + "px"
    });
    return false;
}
;var fold = true;
$(".jp-video").animate({
/*默认弹出*/
    /* left: 0 */
    left: "-480px"
}, "slow", function() {
    slideOut($(this));
}).delay(0).animate({
    left: "-480px"
}, 350, function() {
    slideIn($(this));
});
$("#btnfold").mouseover(function() {
    if (fold) {
        $(".jp-video").animate({
            left: "-480px"
        }, 350, function() {
            slideIn($(this));
        });
    } else {
        $(".jp-video").animate({
            left: 0
        }, 350, function() {
            slideOut($(this));
        });
    }
});
function slideOut(obj) {
    $("#btnfold").attr({
        "title": "点击收缩"
    });
    obj.find("span").css({
        "transform": "rotate(180deg)"
    });
    obj.find("span").css({
        "MozTransform": "rotate(180deg) translateX(2px)"
    });
    obj.find("span").css({
        "WebkitTransform": "rotate(180deg)"
    });
    fold = true;
}
;function slideIn(obj) {
    $("#btnfold").attr({
        "title": "点击展开"
    });
    obj.find("span").css({
        "transform": "rotate(0deg)"
    });
    obj.find("span").css({
        "MozTransform": "rotate(0deg) translateX(-2px)"
    });
    obj.find("span").css({
        "WebkitTransform": "rotate(0deg)"
    });
    fold = false;
}
;var iOpen = false;
$("#listClose").click(function() {
    if (iOpen) {
        $(".jp-playlist-box").animate({
            height: 0
        }, 100);
        $("#btnfold").css({
            top: "5px"
        });
        $("#listRemove").css({
            display: "none"
        });
        $(".scrollBar").css({
            display: "none"
        });
        $(".jp-video").animate({
            height: "94px",
            bottom: "20px"
        }, 100);
        iOpen = false;
    } else {
        $(".jp-playlist-box").animate({
            height: "80px"
        }, 100);
        $("#btnfold").css({
            top: "52px"
        });
        $("#listRemove").css({
            display: "block"
        });
        $(".scrollBar").css({
            display: "block"
        });
        $(".jp-video").animate({
            height: "175px",
            bottom: "20px"
        }, 100);
        iOpen = true;
    }
});

	
	
	
</script>









<style>

.containerTop {
	position: fixed;
	right: 15px;
	bottom: 30px;
	    opacity: 0.5;
	    z-index: 9999;
}

#myPath path {
  transform: translate(0.125px, 0.033px);
}

.containerTop .heart-wrap {
  cursor: pointer;
  perspective: 200px;
  filter: drop-shadow(0px 10px 10px rgba(174, 196, 238, 0.5));
}

.containerTop .heart {
  position: relative;
  height: 70px;
  width: 80px;
  overflow: hidden;
  background-image: radial-gradient(#c9d8f5 60%, #afc4ee);
	

	

	clip-path: polygon(50% 0%, 100% 100%, 50% 66%, 0 100%);
	

	
}
	

.containerTop .tank {
  position: absolute;
  bottom: 0;
  height: 0;
  width: 80px;
  background-color: #6782bf;
  z-index: 5;
}

.containerTop .curve {
  position: absolute;
  bottom: calc(-1 * 20px);
  width: 80px;
  height: 20px;
}
	.containerTop svg{
		position: fixed;z-index: -1;
	}
.containerTop .curve use {
  animation: cTop 2s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;
}
.containerTop .curve use:nth-child(1) {
  animation-duration: 3s;
}
.containerTop .curve use:nth-child(2) {
  animation-duration: 4s;
}
.containerTop .curve use:nth-child(3) {
  animation-duration: 2s;
}

@keyframes cTop {
  0% {
    transform: translateX(-90px);
  }
  100% {
    transform: translateX(85px);
  }
}

</style>

<script>
! function (o) {
  "use strict";
  o.fn.toTop = function (t) {
    var i = this,
      e = o(window),
      s = o("html, body"),
      n = o.extend({
        autohide: !0,
        offset: 420,
        speed: 500,
        position: !0,
        right: 15,
        bottom: 30
      }, t);
    i.css({
      cursor: "pointer"
    }), n.autohide && i.css("display", "none"), n.position && i.css({
      position: "fixed",
      right: n.right,
      bottom: n.bottom
    }), i.click(function () {
      s.animate({
        scrollTop: 0
      }, n.speed)
    }), e.scroll(function () {
      var o = e.scrollTop();
      n.autohide && (o > n.offset ? i.fadeIn(n.speed) : i.fadeOut(n.speed))
    })
  }
}(jQuery);

</script>

<script>
/*!
 * https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js
 * GSAP 3.2.6
 * https://greensock.com
 * 
 * @license Copyright 2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(e){"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return"string"==typeof t}function o(t){return"function"==typeof t}function p(t){return"number"==typeof t}function q(t){return void 0===t}function r(t){return"object"==typeof t}function s(t){return!1!==t}function t(){return"undefined"!=typeof window}function u(t){return o(t)||n(t)}function K(t){return(l=pt(t,at))&&ie}function L(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function M(t,e){return!e&&console.warn(t)}function N(t,e){return t&&(at[t]=e)&&l&&(l[t]=e)||at}function O(){return 0}function Y(t){var e,i,n=t[0];if(r(n)||o(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=dt.length;i--&&!dt[i].targetTest(n););e=dt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ft(t[i],e)))||t.splice(i,1);return t}function Z(t){return t._gsap||Y(yt(t))[0]._gsap}function $(t,e){var r=t[e];return o(r)?t[e]():q(r)&&t.getAttribute(e)||r}function _(t,e){return(t=t.split(",")).forEach(e)||t}function aa(t){return Math.round(1e5*t)/1e5||0}function ba(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r}function ca(t,e,r){var i,n=p(t[1]),a=(n?2:1)+(e<2?0:1),o=t[a];if(n&&(o.duration=t[1]),o.parent=r,e){for(i=o;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=s(r.vars.inherit)&&r.parent;o.immediateRender=s(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o}function da(){var t,e,r=ot.length,i=ot.slice(0);for(ut={},t=ot.length=0;t<r;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function ea(t,e,r,i){ot.length&&da(),t.render(e,r,i),ot.length&&da()}function fa(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(nt).length<2?e:t}function ga(t){return t}function ha(t,e){for(var r in e)r in t||(t[r]=e[r]);return t}function ia(t,e){for(var r in e)r in t||"duration"===r||"ease"===r||(t[r]=e[r])}function ka(t,e){for(var i in e)t[i]=r(e[i])?ka(t[i]||(t[i]={}),e[i]):e[i];return t}function la(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i}function ma(t){var e=t.parent||F,r=t.keyframes?ia:ha;if(s(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent;return t}function pa(t,e,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=e._prev,a=e._next;n?n._next=a:t[r]===e&&(t[r]=a),a?a._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null}function qa(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function ra(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t}function ua(t){return t._repeat?_t(t._tTime,t=t.duration()+t._rDelay)*t:0}function wa(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function xa(t){return t._end=aa(t._start+(t._tDur/Math.abs(t._ts||t._rts||B)||0))}function ya(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=wa(t.rawTime(),e),(!e._dur||gt(0,e.totalDuration(),r)-e._tTime>B)&&e.render(r,!0)),ra(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)0<=r.rawTime()&&r.totalTime(r._tTime),r=r._dp;t._zTime=-B}}function za(t,e,r,i){return e.parent&&qa(e),e._start=aa(r+e._delay),e._end=aa(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function _addLinkedListItem(t,e,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var a,s=t[i];if(n)for(a=e[n];s&&s[n]>a;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||ya(t,e),t}function Aa(t,e,r,i){return qt(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&d!==Ot.frame?(ot.push(t),t._lazy=[e,i],1):void 0:1}function Da(t,e,r){var i=t._repeat,n=aa(e)||0;return t._dur=n,t._tDur=i?i<0?1e12:aa(n*(i+1)+t._rDelay*i):n,t._time>n&&(t._time=n,t._tTime=Math.min(t._tTime,t._tDur)),r||ra(t.parent),t.parent&&xa(t),t}function Ea(t){return t instanceof Bt?ra(t):Da(t,t._dur)}function Ga(t,e){var r,i,a=t.labels,s=t._recent||mt,o=t.duration()>=R?s.endTime(!1):t._dur;return n(e)&&(isNaN(e)||e in a)?"<"===(r=e.charAt(0))||">"===r?("<"===r?s._start:s.endTime(0<=s._repeat))+(parseFloat(e.substr(1))||0):(r=e.indexOf("="))<0?(e in a||(a[e]=o),a[e]):(i=+(e.charAt(r-1)+e.substr(r+1)),1<r?Ga(t,e.substr(0,r-1))+i:o+i):null==e?o:+e}function Ha(t,e){return t||0===t?e(t):e}function Ja(t){return(t+"").substr((parseFloat(t)+"").length)}function Ma(t,e){return t&&r(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&r(t[0]))&&!t.nodeType&&t!==i}function Pa(t){return t.sort(function(){return.5-Math.random()})}function Qa(t){if(o(t))return t;var p=r(t)?t:{each:t},_=Dt(p.ease),m=p.from||0,g=parseFloat(p.base)||0,v={},e=0<m&&m<1,y=isNaN(m)||e,T=p.axis,b=m,w=m;return n(m)?b=w={center:.5,edges:.5,end:1}[m]||0:!e&&y&&(b=m[0],w=m[1]),function(t,e,r){var i,n,a,s,o,u,h,l,f,d=(r||p).length,c=v[d];if(!c){if(!(f="auto"===p.grid?0:(p.grid||[1,R])[1])){for(h=-R;h<(h=r[f++].getBoundingClientRect().left)&&f<d;);f--}for(c=v[d]=[],i=y?Math.min(f,d)*b-.5:m%f,n=y?d*w/f-.5:m/f|0,l=R,u=h=0;u<d;u++)a=u%f-i,s=n-(u/f|0),c[u]=o=T?Math.abs("y"===T?s:a):j(a*a+s*s),h<o&&(h=o),o<l&&(l=o);"random"===m&&Pa(c),c.max=h-l,c.min=l,c.v=d=(parseFloat(p.amount)||parseFloat(p.each)*(d<f?d-1:T?"y"===T?d/f:f:Math.max(f,d/f))||0)*("edges"===m?-1:1),c.b=d<0?g-d:g,c.u=Ja(p.amount||p.each)||0,_=_&&d<0?zt(_):_}return d=(c[t]-c.min)/c.max||0,aa(c.b+(_?_(d):d)*c.v)+c.u}}function Ra(e){var r=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return~~(Math.round(parseFloat(t)/e)*e*r)/r+(p(t)?0:Ja(t))}}function Sa(u,t){var h,l,e=H(u);return!e&&r(u)&&(h=e=u.radius||R,u.values?(u=yt(u.values),(l=!p(u[0]))&&(h*=h)):u=Ra(u.increment)),Ha(t,e?o(u)?function(t){return l=u(t),Math.abs(l-t)<=h?l:t}:function(t){for(var e,r,i=parseFloat(l?t.x:t),n=parseFloat(l?t.y:0),a=R,s=0,o=u.length;o--;)(e=l?(e=u[o].x-i)*e+(r=u[o].y-n)*r:Math.abs(u[o]-i))<a&&(a=e,s=o);return s=!h||a<=h?u[s]:t,l||s===t||p(t)?s:s+Ja(t)}:Ra(u))}function Ta(t,e,r,i){return Ha(H(t)?!e:!0===r?!!(r=0):!i,function(){return H(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/r)*r*i)/i})}function Xa(e,r,t){return Ha(t,function(t){return e[~~r(t)]})}function $a(t){for(var e,r,i,n,a=0,s="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),n="["===t.charAt(e+7),r=t.substr(e+7,i-e-7).match(n?nt:Q),s+=t.substr(a,e-a)+Ta(n?r:+r[0],+r[1],+r[2]||1e-5),a=i+1;return s+t.substr(a,t.length-a)}function bb(t,e,r){var i,n,a,s=t.labels,o=R;for(i in s)(n=s[i]-e)<0==!!r&&n&&o>(n=Math.abs(n))&&(a=i,o=n);return a}function db(t){return qa(t),t.progress()<1&&bt(t,"onInterrupt"),t}function ib(t,e,r){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*wt+.5|0}function jb(t,e,r){var i,n,a,s,o,u,h,l,f,d,c=t?p(t)?[t>>16,t>>8&wt,t&wt]:0:xt.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),xt[t])c=xt[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(n=t.charAt(2))+n+(a=t.charAt(3))+a),c=[(t=parseInt(t.substr(1),16))>>16,t>>8&wt,t&wt];else if("hsl"===t.substr(0,3))if(c=d=t.match(Q),e){if(~t.indexOf("="))return c=t.match(W),r&&c.length<4&&(c[3]=1),c}else s=+c[0]%360/360,o=c[1]/100,i=2*(u=c[2]/100)-(n=u<=.5?u*(o+1):u+o-u*o),3<c.length&&(c[3]*=1),c[0]=ib(s+1/3,i,n),c[1]=ib(s,i,n),c[2]=ib(s-1/3,i,n);else c=t.match(Q)||xt.transparent;c=c.map(Number)}return e&&!d&&(i=c[0]/wt,n=c[1]/wt,a=c[2]/wt,u=((h=Math.max(i,n,a))+(l=Math.min(i,n,a)))/2,h===l?s=o=0:(f=h-l,o=.5<u?f/(2-h-l):f/(h+l),s=h===i?(n-a)/f+(n<a?6:0):h===n?(a-i)/f+2:(i-n)/f+4,s*=60),c[0]=~~(s+.5),c[1]=~~(100*o+.5),c[2]=~~(100*u+.5)),r&&c.length<4&&(c[3]=1),c}function kb(t){var r=[],i=[],n=-1;return t.split(kt).forEach(function(t){var e=t.match(tt)||[];r.push.apply(r,e),i.push(n+=e.length+1)}),r.c=i,r}function lb(t,e,r){var i,n,a,s,o="",u=(t+o).match(kt),h=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map(function(t){return(t=jb(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),r&&(a=kb(t),(i=r.c).join(o)!==a.c.join(o)))for(s=(n=t.replace(kt,"1").split(tt)).length-1;l<s;l++)o+=n[l]+(~i.indexOf(l)?u.shift()||h+"0,0,0,0)":(a.length?a:u.length?u:r).shift());if(!n)for(s=(n=t.split(kt)).length-1;l<s;l++)o+=n[l]+u[l];return o+n[s]}function ob(t){var e,r=t.join(" ");if(kt.lastIndex=0,kt.test(r))return e=Mt.test(r),t[1]=lb(t[1],e),t[0]=lb(t[0],e,kb(t[1])),!0}function wb(t){var e=(t+"").split("("),r=Pt[e[0]];return r&&1<e.length&&r.config?r.config.apply(null,~t.indexOf("{")?[function _parseObjectInString(t){for(var e,r,i,n={},a=t.substr(1,t.length-3).split(":"),s=a[0],o=1,u=a.length;o<u;o++)r=a[o],e=o!==u-1?r.lastIndexOf(","):r.length,i=r.substr(0,e),n[s]=isNaN(i)?i.replace(St,"").trim():+i,s=r.substr(e+1).trim();return n}(e[1])]:rt.exec(t)[1].split(",").map(fa)):Pt._CE&&At.test(t)?Pt._CE("",t):r}function zb(t,e,r,i){void 0===r&&(r=function easeOut(t){return 1-e(1-t)}),void 0===i&&(i=function easeInOut(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,a={easeIn:e,easeOut:r,easeInOut:i};return _(t,function(t){for(var e in Pt[t]=at[t]=a,Pt[n=t.toLowerCase()]=r,a)Pt[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Pt[t+"."+e]=a[e]}),a}function Ab(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function Bb(r,t,e){function Yk(t){return 1===t?1:i*Math.pow(2,-10*t)*J((t-a)*n)+1}var i=1<=t?t:1,n=(e||(r?.3:.45))/(t<1?t:1),a=n/I*(Math.asin(1/i)||0),s="out"===r?Yk:"in"===r?function(t){return 1-Yk(1-t)}:Ab(Yk);return n=I/n,s.config=function(t,e){return Bb(r,t,e)},s}function Cb(e,r){function el(t){return t?--t*t*((r+1)*t+r)+1:0}void 0===r&&(r=1.70158);var t="out"===e?el:"in"===e?function(t){return 1-el(1-t)}:Ab(el);return t.config=function(t){return Cb(e,t)},t}var F,i,a,h,l,f,d,c,m,g,v,y,T,b,w,x,k,C,P,A,S,z,D,G={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},E={duration:.5,overwrite:!1,delay:0},R=1e8,B=1/R,I=2*Math.PI,U=I/4,X=0,j=Math.sqrt,V=Math.cos,J=Math.sin,H=Array.isArray,Q=/(?:-?\.?\d|\.)+/gi,W=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,tt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,et=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,rt=/\(([^()]+)\)/i,it=/[+-]=-?[\.\d]+/,nt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,at={},st={},ot=[],ut={},ht={},lt={},ft=30,dt=[],ct="",pt=function _merge(t,e){for(var r in e)t[r]=e[r];return t},_t=function _animationCycle(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},mt={_start:0,endTime:O},gt=function _clamp(t,e,r){return r<t?t:e<r?e:r},vt=[].slice,yt=function toArray(t,e){return!n(t)||e||!a&&Ct()?H(t)?function _flatten(t,e,r){return void 0===r&&(r=[]),t.forEach(function(t){return n(t)&&!e||Ma(t,1)?r.push.apply(r,yt(t)):r.push(t)})||r}(t,e):Ma(t)?vt.call(t,0):t?[t]:[]:vt.call(h.querySelectorAll(t),0)},Tt=function mapRange(e,t,r,i,n){var a=t-e,s=i-r;return Ha(n,function(t){return r+(t-e)/a*s})},bt=function _callback(t,e,r){var i,n,a=t.vars,s=a[e];if(s)return i=a[e+"Params"],n=a.callbackScope||t,r&&ot.length&&da(),i?s.apply(n,i):s.call(n)},wt=255,xt={aqua:[0,wt,wt],lime:[0,wt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,wt],navy:[0,0,128],white:[wt,wt,wt],olive:[128,128,0],yellow:[wt,wt,0],orange:[wt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[wt,0,0],pink:[wt,192,203],cyan:[0,wt,wt],transparent:[wt,wt,wt,0]},kt=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in xt)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Mt=/hsl[a]?\(/,Ot=(b=Date.now,w=500,x=33,k=b(),C=k,A=P=1/240,T={time:0,frame:0,tick:function tick(){ck(!0)},wake:function wake(){f&&(!a&&t()&&(i=a=window,h=i.document||{},at.gsap=ie,(i.gsapVersions||(i.gsapVersions=[])).push(ie.version),K(l||i.GreenSockGlobals||!i.gsap&&i||{}),y=i.requestAnimationFrame),g&&T.sleep(),v=y||function(t){return setTimeout(t,1e3*(A-T.time)+1|0)},m=1,ck(2))},sleep:function sleep(){(y?i.cancelAnimationFrame:clearTimeout)(g),m=0,v=O},lagSmoothing:function lagSmoothing(t,e){w=t||1e8,x=Math.min(e,w,0)},fps:function fps(t){P=1/(t||240),A=T.time+P},add:function add(t){S.indexOf(t)<0&&S.push(t),Ct()},remove:function remove(t){var e;~(e=S.indexOf(t))&&S.splice(e,1)},_listeners:S=[]}),Ct=function _wake(){return!m&&Ot.wake()},Pt={},At=/^[\d.\-M][\d.\-,\s]/,St=/["']/g,zt=function _invertEase(e){return function(t){return 1-e(1-t)}},Dt=function _parseEase(t,e){return t&&(o(t)?t:Pt[t]||wb(t))||e};function ck(e){var t,r,i=b()-C,n=!0===e;w<i&&(k+=i-x),C+=i,T.time=(C-k)/1e3,(0<(t=T.time-A)||n)&&(T.frame++,A+=t+(P<=t?.004:P-t),r=1),n||(g=v(ck)),r&&S.forEach(function(t){return t(T.time,i,T.frame,e)})}function vl(t){return t<D?z*t*t:t<.7272727272727273?z*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?z*(t-=2.25/2.75)*t+.9375:z*Math.pow(t-2.625/2.75,2)+.984375}_("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;zb(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},function(t){return 1-Math.pow(1-t,r)},function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2})}),Pt.Linear.easeNone=Pt.none=Pt.Linear.easeIn,zb("Elastic",Bb("in"),Bb("out"),Bb()),z=7.5625,D=1/2.75,zb("Bounce",function(t){return 1-vl(1-t)},vl),zb("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),zb("Circ",function(t){return-(j(1-t*t)-1)}),zb("Sine",function(t){return 1-V(t*U)}),zb("Back",Cb("in"),Cb("out"),Cb()),Pt.SteppedEase=Pt.steps=at.SteppedEase={config:function config(t,e){void 0===t&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0;return function(t){return((i*gt(0,.99999999,t)|0)+n)*r}}},E.ease=Pt["quad.out"],_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ct+=t+","+t+"Params,"});var Rt,Ft=function GSCache(t,e){this.id=X++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:$,this.set=e?e.getSetter:Zt},Et=((Rt=Animation.prototype).delay=function delay(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Rt.duration=function duration(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Rt.totalDuration=function totalDuration(t){return arguments.length?(this._dirty=0,Da(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Rt.totalTime=function totalTime(t,e){if(Ct(),!arguments.length)return this._tTime;var r=this.parent||this._dp;if(r&&r.smoothChildTiming&&this._ts){for(this._start=aa(r._time-(0<this._ts?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),xa(this),r._dirty||ra(r);r.parent;)r.parent._time!==r._start+(0<=r._ts?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&za(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===B)&&(this._ts||(this._pTime=t),ea(this,t,e)),this},Rt.time=function time(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+ua(this))%this._dur||(t?this._dur:0),e):this._time},Rt.totalProgress=function totalProgress(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Rt.progress=function progress(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+ua(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Rt.iteration=function iteration(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?_t(this._tTime,r)+1:1},Rt.timeScale=function timeScale(t){if(!arguments.length)return this._rts===-B?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?wa(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-B?0:this._rts,function _recacheAncestors(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(gt(0,this._tDur,e),!0))},Rt.paused=function paused(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ct(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=B)&&Math.abs(this._zTime)!==B))),this):this._ps},Rt.startTime=function startTime(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||za(e,this,t-this._delay),this}return this._start},Rt.endTime=function endTime(t){return this._start+(s(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},Rt.rawTime=function rawTime(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wa(e.rawTime(t),this):this._tTime:this._tTime},Rt.repeat=function repeat(t){return arguments.length?(this._repeat=t,Ea(this)):this._repeat},Rt.repeatDelay=function repeatDelay(t){return arguments.length?(this._rDelay=t,Ea(this)):this._rDelay},Rt.yoyo=function yoyo(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Rt.seek=function seek(t,e){return this.totalTime(Ga(this,t),s(e))},Rt.restart=function restart(t,e){return this.play().totalTime(t?-this._delay:0,s(e))},Rt.play=function play(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Rt.reverse=function reverse(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Rt.pause=function pause(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Rt.resume=function resume(){return this.paused(!1)},Rt.reversed=function reversed(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-B:0)),this):this._rts<0},Rt.invalidate=function invalidate(){return this._initted=0,this._zTime=-B,this},Rt.isActive=function isActive(t){var e,r=this.parent||this._dp,i=this._start;return!(r&&!(this._ts&&(this._initted||!t)&&r.isActive(t)&&(e=r.rawTime(!0))>=i&&e<this.endTime(!0)-B))},Rt.eventCallback=function eventCallback(t,e,r){var i=this.vars;return 1<arguments.length?(e?(i[t]=e,r&&(i[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},Rt.then=function then(t){var i=this;return new Promise(function(e){function Km(){var t=i.then;i.then=null,o(r)&&(r=r(i))&&(r.then||r===i)&&(i.then=t),e(r),i.then=t}var r=o(t)?t:ga;i._initted&&1===i.totalProgress()&&0<=i._ts||!i._tTime&&i._ts<0?Km():i._prom=Km})},Rt.kill=function kill(){db(this)},Animation);function Animation(t,e){var r=t.parent||F;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Da(this,+t.duration,1),this.data=t.data,m||Ot.wake(),r&&za(r,this,e||0===e?e:r._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}ha(Et.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-B,_prom:0,_ps:!1,_rts:1});var Bt=function(i){function Timeline(t,e){var r;return void 0===t&&(t={}),(r=i.call(this,t,e)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=s(t.sortChildren),r.parent&&ya(r.parent,_assertThisInitialized(r)),r}_inheritsLoose(Timeline,i);var t=Timeline.prototype;return t.to=function to(t,e,r,i){return new Ut(t,ca(arguments,0,this),Ga(this,p(e)?i:r)),this},t.from=function from(t,e,r,i){return new Ut(t,ca(arguments,1,this),Ga(this,p(e)?i:r)),this},t.fromTo=function fromTo(t,e,r,i,n){return new Ut(t,ca(arguments,2,this),Ga(this,p(e)?n:i)),this},t.set=function set(t,e,r){return e.duration=0,e.parent=this,ma(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ut(t,e,Ga(this,r),1),this},t.call=function call(t,e,r){return za(this,Ut.delayedCall(0,t,e),Ga(this,r))},t.staggerTo=function staggerTo(t,e,r,i,n,a,s){return r.duration=e,r.stagger=r.stagger||i,r.onComplete=a,r.onCompleteParams=s,r.parent=this,new Ut(t,r,Ga(this,n)),this},t.staggerFrom=function staggerFrom(t,e,r,i,n,a,o){return r.runBackwards=1,ma(r).immediateRender=s(r.immediateRender),this.staggerTo(t,e,r,i,n,a,o)},t.staggerFromTo=function staggerFromTo(t,e,r,i,n,a,o,u){return i.startAt=r,ma(i).immediateRender=s(i.immediateRender),this.staggerTo(t,e,i,n,a,o,u)},t.render=function render(t,e,r){var i,n,a,s,o,u,h,l,f,d,c,p,_=this._time,m=this._dirty?this.totalDuration():this._tDur,g=this._dur,v=this!==F&&m-B<t&&0<=t?m:t<B?0:t,y=this._zTime<0!=t<0&&(this._initted||!g);if(v!==this._tTime||r||y){if(_!==this._time&&g&&(v+=this._time-_,t+=this._time-_),i=v,f=this._start,u=!(l=this._ts),y&&(g||(_=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(c=this._yoyo,o=g+this._rDelay,(g<(i=aa(v%o))||m===v)&&(i=g),(s=~~(v/o))&&s===v/o&&(i=g,s--),c&&1&s&&(i=g-i,p=1),s!==(d=_t(this._tTime,o))&&!this._lock)){var T=c&&1&d,b=T===(c&&1&s);if(s<d&&(T=!T),_=T?0:g,this._lock=1,this.render(_,e,!g)._lock=0,!e&&this.parent&&bt(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),_!==this._time||u!=!this._ts)return this;if(b&&(this._lock=2,_=T?g+1e-4:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!u)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function _findNextPauseTween(t,e,r){var i;if(e<r)for(i=t._first;i&&i._start<=r;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,aa(_),aa(i)))&&(v-=i-(i=h._start)),this._tTime=v,this._time=i,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),_||!i||e||bt(this,"onStart"),_<=i&&0<=t)for(n=this._first;n;){if(a=n._next,(n._act||i>=n._start)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(0<n._ts?(i-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(i-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!u){h=0,a&&(v+=this._zTime=-B);break}}n=a}else{n=this._last;for(var w=t<0?t:i;n;){if(a=n._prev,(n._act||w<=n._end)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(0<n._ts?(w-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(w-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!u){h=0,a&&(v+=this._zTime=w?-B:B);break}}n=a}}if(h&&!e&&(this.pause(),h.render(_<=i?0:-B)._zTime=_<=i?1:-1,this._ts))return this._start=f,xa(this),this.render(t,e,r);this._onUpdate&&!e&&bt(this,"onUpdate",!0),(v===m&&m>=this.totalDuration()||!v&&this._ts<0)&&(f!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||(!t&&g||!(t&&0<this._ts||!v&&this._ts<0)||qa(this,1),e||t<0&&!_||(bt(this,v===m?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},t.add=function add(t,e){var r=this;if(p(e)||(e=Ga(this,e)),!(t instanceof Et)){if(H(t))return t.forEach(function(t){return r.add(t,e)}),ra(this);if(n(t))return this.addLabel(t,e);if(!o(t))return this;t=Ut.delayedCall(0,t)}return this!==t?za(this,t,e):this},t.getChildren=function getChildren(t,e,r,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=-R);for(var n=[],a=this._first;a;)a._start>=i&&(a instanceof Ut?e&&n.push(a):(r&&n.push(a),t&&n.push.apply(n,a.getChildren(!0,e,r)))),a=a._next;return n},t.getById=function getById(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},t.remove=function remove(t){return n(t)?this.removeLabel(t):o(t)?this.killTweensOf(t):(pa(this,t),t===this._recent&&(this._recent=this._last),ra(this))},t.totalTime=function totalTime(t,e){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=aa(Ot.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),i.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},t.addLabel=function addLabel(t,e){return this.labels[t]=Ga(this,e),this},t.removeLabel=function removeLabel(t){return delete this.labels[t],this},t.addPause=function addPause(t,e,r){var i=Ut.delayedCall(0,e||O,r);return i.data="isPause",this._hasPause=1,za(this,i,Ga(this,t))},t.removePause=function removePause(t){var e=this._first;for(t=Ga(this,t);e;)e._start===t&&"isPause"===e.data&&qa(e),e=e._next},t.killTweensOf=function killTweensOf(t,e,r){for(var i=this.getTweensOf(t,r),n=i.length;n--;)Lt!==i[n]&&i[n].kill(t,e);return this},t.getTweensOf=function getTweensOf(t,e){for(var r,i=[],n=yt(t),a=this._first;a;)a instanceof Ut?!ba(a._targets,n)||e&&!a.isActive("started"===e)||i.push(a):(r=a.getTweensOf(n,e)).length&&i.push.apply(i,r),a=a._next;return i},t.tweenTo=function tweenTo(t,e){e=e||{};var r=this,i=Ga(r,t),n=e.startAt,a=e.onStart,s=e.onStartParams,o=Ut.to(r,ha(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(n&&"time"in n?n.time:r._time))/r.timeScale())||B,onStart:function onStart(){r.pause();var t=e.duration||Math.abs((i-r._time)/r.timeScale());o._dur!==t&&Da(o,t).render(o._time,!0,!0),a&&a.apply(o,s||[])}}));return o},t.tweenFromTo=function tweenFromTo(t,e,r){return this.tweenTo(e,ha({startAt:{time:Ga(this,t)}},r))},t.recent=function recent(){return this._recent},t.nextLabel=function nextLabel(t){return void 0===t&&(t=this._time),bb(this,Ga(this,t))},t.previousLabel=function previousLabel(t){return void 0===t&&(t=this._time),bb(this,Ga(this,t),1)},t.currentLabel=function currentLabel(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+B)},t.shiftChildren=function shiftChildren(t,e,r){void 0===r&&(r=0);for(var i,n=this._first,a=this.labels;n;)n._start>=r&&(n._start+=t),n=n._next;if(e)for(i in a)a[i]>=r&&(a[i]+=t);return ra(this)},t.invalidate=function invalidate(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return i.prototype.invalidate.call(this)},t.clear=function clear(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._time=this._tTime=0,t&&(this.labels={}),ra(this)},t.totalDuration=function totalDuration(t){var e,r,i,n,a=0,s=this,o=s._last,u=R;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),u<(i=o._start)&&s._sort&&o._ts&&!s._lock?(s._lock=1,za(s,o,i-o._delay,1)._lock=0):u=i,i<0&&o._ts&&(a-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1e20),u=0),a<(r=xa(o))&&o._ts&&(a=r),o=e;Da(s,s===F&&s._time>a?s._time:Math.min(R,a),1),s._dirty=0}return s._tDur},Timeline.updateRoot=function updateRoot(t){if(F._ts&&(ea(F,wa(t,F)),d=Ot.frame),Ot.frame>=ft){ft+=G.autoSleep||120;var e=F._first;if((!e||!e._ts)&&G.autoSleep&&Ot._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ot.sleep()}}},Timeline}(Et);ha(Bt.prototype,{_lock:0,_hasPause:0,_forcing:0});function Jb(t,e,i,a,s,u){var h,l,f,d;if(ht[t]&&!1!==(h=new ht[t]).init(s,h.rawVars?e[t]:function _processVars(t,e,i,a,s){if(o(t)&&(t=Yt(t,s,e,i,a)),!r(t)||t.style&&t.nodeType||H(t))return n(t)?Yt(t,s,e,i,a):t;var u,h={};for(u in t)h[u]=Yt(t[u],s,e,i,a);return h}(e[t],a,s,u,i),i,a,u)&&(i._pt=l=new ee(i._pt,s,t,0,1,h.render,h,0,h.priority),i!==c))for(f=i._ptLookup[i._targets.indexOf(s)],d=h._props.length;d--;)f[h._props[d]]=l;return h}var Lt,It=function _addPropTween(t,e,r,i,a,s,u,h,l){o(i)&&(i=i(a||0,t,s));var f,d=t[e],c="get"!==r?r:o(d)?l?t[e.indexOf("set")||!o(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,p=o(d)?l?Vt:jt:Xt;if(n(i)&&(~i.indexOf("random(")&&(i=$a(i)),"="===i.charAt(1)&&(i=parseFloat(c)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(Ja(c)||0))),c!==i)return isNaN(c+i)?(d||e in t||L(e,i),function _addComplexStringPropTween(t,e,r,i,n,a,s){var o,u,h,l,f,d,c,p,_=new ee(this._pt,t,e,0,1,Qt,null,n),m=0,g=0;for(_.b=r,_.e=i,r+="",(c=~(i+="").indexOf("random("))&&(i=$a(i)),a&&(a(p=[r,i],t,e),r=p[0],i=p[1]),u=r.match(et)||[];o=et.exec(i);)l=o[0],f=i.substring(m,o.index),h?h=(h+1)%5:"rgba("===f.substr(-5)&&(h=1),l!==u[g++]&&(d=parseFloat(u[g-1])||0,_._pt={_next:_._pt,p:f||1===g?f:",",s:d,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-d,m:h&&h<4?Math.round:0},m=et.lastIndex);return _.c=m<i.length?i.substring(m,i.length):"",_.fp=s,(it.test(i)||c)&&(_.e=0),this._pt=_}.call(this,t,e,c,i,p,h||G.stringFilter,l)):(f=new ee(this._pt,t,e,+c||0,i-(c||0),"boolean"==typeof d?Ht:Jt,0,p),l&&(f.fp=l),u&&f.modifier(u,this,t),this._pt=f)},qt=function _initTween(t,e){var r,i,n,a,o,u,h,l,f,d,c,p,_=t.vars,m=_.ease,g=_.startAt,v=_.immediateRender,y=_.lazy,T=_.onUpdate,b=_.onUpdateParams,w=_.callbackScope,x=_.runBackwards,k=_.yoyoEase,M=_.keyframes,O=_.autoRevert,C=t._dur,P=t._startAt,A=t._targets,S=t.parent,z=S&&"nested"===S.data?S.parent._targets:A,D="auto"===t._overwrite,R=t.timeline;if(!R||M&&m||(m="none"),t._ease=Dt(m,E.ease),t._yEase=k?zt(Dt(!0===k?m:k,E.ease)):0,k&&t._yoyo&&!t._repeat&&(k=t._yEase,t._yEase=t._ease,t._ease=k),!R){if(P&&P.render(-1,!0).kill(),g){if(qa(t._startAt=Ut.set(A,ha({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:s(y),startAt:null,delay:0,onUpdate:T,onUpdateParams:b,callbackScope:w,stagger:0},g))),v)if(0<e)O||(t._startAt=0);else if(C)return}else if(x&&C)if(P)O||(t._startAt=0);else if(e&&(v=!1),qa(t._startAt=Ut.set(A,pt(la(_,st),{overwrite:!1,data:"isFromStart",lazy:v&&s(y),immediateRender:v,stagger:0,parent:S}))),v){if(!e)return}else _initTween(t._startAt,B);for(r=la(_,st),p=(l=A[t._pt=0]?Z(A[0]).harness:0)&&_[l.prop],y=C&&s(y)||y&&!C,i=0;i<A.length;i++){if(h=(o=A[i])._gsap||Y(A)[i]._gsap,t._ptLookup[i]=d={},ut[h.id]&&da(),c=z===A?i:z.indexOf(o),l&&!1!==(f=new l).init(o,p||r,t,c,z)&&(t._pt=a=new ee(t._pt,o,f.name,0,1,f.render,f,0,f.priority),f._props.forEach(function(t){d[t]=a}),f.priority&&(u=1)),!l||p)for(n in r)ht[n]&&(f=Jb(n,r,t,c,o,z))?f.priority&&(u=1):d[n]=a=It.call(t,o,n,"get",r[n],c,z,0,_.stringFilter);t._op&&t._op[i]&&t.kill(o,t._op[i]),D&&t._pt&&(Lt=t,F.killTweensOf(o,d,"started"),Lt=0),t._pt&&y&&(ut[h.id]=1)}u&&te(t),t._onInit&&t._onInit(t)}t._from=!R&&!!_.runBackwards,t._onUpdate=T,t._initted=1},Yt=function _parseFuncOrString(t,e,r,i,a){return o(t)?t.call(e,r,i,a):n(t)&&~t.indexOf("random(")?$a(t):t},Nt=ct+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Gt=(Nt+",id,stagger,delay,duration,paused").split(","),Ut=function(A){function Tween(t,e,i,n){var a;"number"==typeof e&&(i.duration=e,e=i,i=null);var o,h,l,f,d,c,_,m,g=(a=A.call(this,n?e:ma(e),i)||this).vars,v=g.duration,y=g.delay,T=g.immediateRender,b=g.stagger,w=g.overwrite,x=g.keyframes,k=g.defaults,C=a.parent,P=(H(t)?p(t[0]):"length"in e)?[t]:yt(t);if(a._targets=P.length?Y(P):M("GSAP target "+t+" not found. https://greensock.com",!G.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=w,x||b||u(v)||u(y)){if(e=a.vars,(o=a.timeline=new Bt({data:"nested",defaults:k||{}})).kill(),o.parent=_assertThisInitialized(a),x)ha(o.vars.defaults,{ease:"none"}),x.forEach(function(t){return o.to(P,t,">")});else{if(f=P.length,_=b?Qa(b):O,r(b))for(d in b)~Nt.indexOf(d)&&((m=m||{})[d]=b[d]);for(h=0;h<f;h++){for(d in l={},e)Gt.indexOf(d)<0&&(l[d]=e[d]);l.stagger=0,m&&pt(l,m),e.yoyoEase&&!e.repeat&&(l.yoyoEase=e.yoyoEase),c=P[h],l.duration=+Yt(v,_assertThisInitialized(a),h,c,P),l.delay=(+Yt(y,_assertThisInitialized(a),h,c,P)||0)-a._delay,!b&&1===f&&l.delay&&(a._delay=y=l.delay,a._start+=y,l.delay=0),o.to(c,l,_(h,c,P))}v=y=0}v||a.duration(v=o.duration())}else a.timeline=0;return!0===w&&(Lt=_assertThisInitialized(a),F.killTweensOf(P),Lt=0),C&&ya(C,_assertThisInitialized(a)),(T||!v&&!x&&a._start===C._time&&s(T)&&function _hasNoPausedAncestors(t){return!t||t._ts&&_hasNoPausedAncestors(t.parent)}(_assertThisInitialized(a))&&"nested"!==C.data)&&(a._tTime=-B,a.render(Math.max(0,-y))),a}_inheritsLoose(Tween,A);var t=Tween.prototype;return t.render=function render(t,e,r){var i,n,a,s,o,u,h,l,f,d=this._time,c=this._tDur,p=this._dur,_=c-B<t&&0<=t?c:t<B?0:t;if(p){if(_!==this._tTime||!t||r||this._startAt&&this._zTime<0!=t<0){if(i=_,l=this.timeline,this._repeat){if(s=p+this._rDelay,(p<(i=aa(_%s))||c===_)&&(i=p),(a=~~(_/s))&&a===_/s&&(i=p,a--),(u=this._yoyo&&1&a)&&(f=this._yEase,i=p-i),o=_t(this._tTime,s),i===d&&!r&&this._initted)return this;a!==o&&(!this.vars.repeatRefresh||u||this._lock||(this._lock=r=1,this.render(s*a,!0).invalidate()._lock=0))}if(!this._initted){if(Aa(this,i,r,e))return this._tTime=0,this;if(p!==this._dur)return this.render(t,e,r)}for(this._tTime=_,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(f||this._ease)(i/p),this._from&&(this.ratio=h=1-h),d||!i||e||bt(this,"onStart"),n=this._pt;n;)n.r(h,n.d),n=n._next;l&&l.render(t<0?t:!i&&u?-B:l._dur*h,e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),bt(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!e&&this.parent&&bt(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,r),!t&&p||!(t&&0<this._ts||!_&&this._ts<0)||qa(this,1),e||t<0&&!d||_<c&&0<this.timeScale()||(bt(this,_===c?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function _renderZeroDurationTween(t,e,r,i){var n,a=t._zTime<0?0:1,s=e<0?0:1,o=t._rDelay,u=0;if(o&&t._repeat&&(u=gt(0,t._tDur,e),_t(u,o)!==_t(t._tTime,o)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!Aa(t,e,i,r))&&(s!==a||i||t._zTime===B||!e&&t._zTime)){for(t._zTime=e||(r?B:0),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=u,r||bt(t,"onStart"),n=t._pt;n;)n.r(s,n.d),n=n._next;!s&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,i),t._onUpdate&&(r||bt(t,"onUpdate")),u&&t._repeat&&!r&&t.parent&&bt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(t.ratio&&qa(t,1),r||(bt(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}(this,t,e,r);return this},t.targets=function targets(){return this._targets},t.invalidate=function invalidate(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),A.prototype.invalidate.call(this)},t.kill=function kill(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return db(this);if(this.timeline)return this.timeline.killTweensOf(t,e,Lt&&!0!==Lt.vars.overwrite),this;var r,i,a,s,o,u,h,l=this._targets,f=t?yt(t):l,d=this._ptLookup,c=this._pt;if((!e||"all"===e)&&function _arraysMatch(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0}(l,f))return db(this);for(r=this._op=this._op||[],"all"!==e&&(n(e)&&(o={},_(e,function(t){return o[t]=1}),e=o),e=function _addAliasesToVars(t,e){var r,i,n,a,s=t[0]?Z(t[0]).harness:0,o=s&&s.aliases;if(!o)return e;for(i in r=pt({},e),o)if(i in r)for(n=(a=o[i].split(",")).length;n--;)r[a[n]]=r[i];return r}(l,e)),h=l.length;h--;)if(~f.indexOf(l[h]))for(o in i=d[h],"all"===e?(r[h]=e,s=i,a={}):(a=r[h]=r[h]||{},s=e),s)(u=i&&i[o])&&("kill"in u.d&&!0!==u.d.kill(o)||pa(this,u,"_pt"),delete i[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&c&&db(this),this},Tween.to=function to(t,e,r){return new Tween(t,e,r)},Tween.from=function from(t,e){return new Tween(t,ca(arguments,1))},Tween.delayedCall=function delayedCall(t,e,r,i){return new Tween(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},Tween.fromTo=function fromTo(t,e,r){return new Tween(t,ca(arguments,2))},Tween.set=function set(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new Tween(t,e)},Tween.killTweensOf=function killTweensOf(t,e,r){return F.killTweensOf(t,e,r)},Tween}(Et);ha(Ut.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_("staggerTo,staggerFrom,staggerFromTo",function(r){Ut[r]=function(){var t=new Bt,e=vt.call(arguments,0);return e.splice("staggerFromTo"===r?5:4,0,0),t[r].apply(t,e)}});function Ub(t,e,r){return t.setAttribute(e,r)}function ac(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)}var Xt=function _setterPlain(t,e,r){return t[e]=r},jt=function _setterFunc(t,e,r){return t[e](r)},Vt=function _setterFuncWithParam(t,e,r,i){return t[e](i.fp,r)},Zt=function _getSetter(t,e){return o(t[e])?jt:q(t[e])&&t.setAttribute?Ub:Xt},Jt=function _renderPlain(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Ht=function _renderBoolean(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Qt=function _renderComplexString(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},$t=function _renderPropTweens(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},Wt=function _addPluginModifier(t,e,r,i){for(var n,a=this._pt;a;)n=a._next,a.p===i&&a.modifier(t,e,r),a=n},Kt=function _killPropTweensOf(t){for(var e,r,i=this._pt;i;)r=i._next,i.p===t&&!i.op||i.op===t?pa(this,i,"_pt"):i.dep||(e=1),i=r;return!e},te=function _sortPropTweensByPriority(t){for(var e,r,i,n,a=t._pt;a;){for(e=a._next,r=i;r&&r.pr>a.pr;)r=r._next;(a._prev=r?r._prev:n)?a._prev._next=a:i=a,(a._next=r)?r._prev=a:n=a,a=e}t._pt=i},ee=(PropTween.prototype.modifier=function modifier(t,e,r){this.mSet=this.mSet||this.set,this.set=ac,this.m=t,this.mt=r,this.tween=e},PropTween);function PropTween(t,e,r,i,n,a,s,o,u){this.t=e,this.s=i,this.c=n,this.p=r,this.r=a||Jt,this.d=s||this,this.set=o||Xt,this.pr=u||0,(this._next=t)&&(t._prev=this)}_(ct+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",function(t){return st[t]=1}),at.TweenMax=at.TweenLite=Ut,at.TimelineLite=at.TimelineMax=Bt,F=new Bt({sortChildren:!1,defaults:E,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),G.stringFilter=ob;var re={registerPlugin:function registerPlugin(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t){return function _createPlugin(t){var e=(t=!t.name&&t.default||t).name,r=o(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:O,render:$t,add:It,kill:Kt,modifier:Wt,rawVars:0},a={targetTest:0,get:0,getSetter:Zt,aliases:{},register:0};if(Ct(),t!==i){if(ht[e])return;ha(i,ha(la(t,n),a)),pt(i.prototype,pt(n,la(t,a))),ht[i.prop=e]=i,t.targetTest&&(dt.push(i),st[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}N(e,i),t.register&&t.register(ie,i,ee)}(t)})},timeline:function timeline(t){return new Bt(t)},getTweensOf:function getTweensOf(t,e){return F.getTweensOf(t,e)},getProperty:function getProperty(i,t,e,r){n(i)&&(i=yt(i)[0]);var a=Z(i||{}).get,s=e?ga:fa;return"native"===e&&(e=""),i?t?s((ht[t]&&ht[t].get||a)(i,t,e,r)):function(t,e,r){return s((ht[t]&&ht[t].get||a)(i,t,e,r))}:i},quickSetter:function quickSetter(r,e,i){if(1<(r=yt(r)).length){var n=r.map(function(t){return ie.quickSetter(t,e,i)}),a=n.length;return function(t){for(var e=a;e--;)n[e](t)}}r=r[0]||{};var s=ht[e],o=Z(r),u=s?function(t){var e=new s;c._pt=0,e.init(r,i?t+i:t,c,0,[r]),e.render(1,e),c._pt&&$t(1,c)}:o.set(r,e);return s?u:function(t){return u(r,e,i?t+i:t,o,1)}},isTweening:function isTweening(t){return 0<F.getTweensOf(t,!0).length},defaults:function defaults(t){return t&&t.ease&&(t.ease=Dt(t.ease,E.ease)),ka(E,t||{})},config:function config(t){return ka(G,t||{})},registerEffect:function registerEffect(t){var n=t.name,i=t.effect,e=t.plugins,a=t.defaults,s=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!ht[t]&&!at[t]&&M(n+" effect requires "+t+" plugin.")}),lt[n]=function(t,e,r){return i(yt(t),ha(e||{},a),r)},s&&(Bt.prototype[n]=function(t,e,i){return this.add(lt[n](t,r(e)?e:(i=e)&&{},this),i)})},registerEase:function registerEase(t,e){Pt[t]=Dt(e)},parseEase:function parseEase(t,e){return arguments.length?Dt(t,e):Pt},getById:function getById(t){return F.getById(t)},exportRoot:function exportRoot(t,e){void 0===t&&(t={});var r,i,n=new Bt(t);for(n.smoothChildTiming=s(t.smoothChildTiming),F.remove(n),n._dp=0,n._time=n._tTime=F._time,r=F._first;r;)i=r._next,!e&&!r._dur&&r instanceof Ut&&r.vars.onComplete===r._targets[0]||za(n,r,r._start-r._delay),r=i;return za(F,n,0),n},utils:{wrap:function wrap(e,t,r){var i=t-e;return H(e)?Xa(e,wrap(0,e.length),t):Ha(r,function(t){return(i+(t-e)%i)%i+e})},wrapYoyo:function wrapYoyo(e,t,r){var i=t-e,n=2*i;return H(e)?Xa(e,wrapYoyo(0,e.length-1),t):Ha(r,function(t){return e+(i<(t=(n+(t-e)%n)%n)?n-t:t)})},distribute:Qa,random:Ta,snap:Sa,normalize:function normalize(t,e,r){return Tt(t,e,0,1,r)},getUnit:Ja,clamp:function clamp(e,r,t){return Ha(t,function(t){return gt(e,r,t)})},splitColor:jb,toArray:yt,mapRange:Tt,pipe:function pipe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function unitize(e,r){return function(t){return e(parseFloat(t))+(r||Ja(t))}},interpolate:function interpolate(e,r,t,i){var a=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!a){var s,o,u,h,l,f=n(e),d={};if(!0===t&&(i=1)&&(t=null),f)e={p:e},r={p:r};else if(H(e)&&!H(r)){for(u=[],h=e.length,l=h-2,o=1;o<h;o++)u.push(interpolate(e[o-1],e[o]));h--,a=function func(t){t*=h;var e=Math.min(l,~~t);return u[e](t-e)},t=r}else i||(e=pt(H(e)?[]:{},e));if(!u){for(s in r)It.call(d,e,s,"get",r[s]);a=function func(t){return $t(t,d)||(f?e.p:e)}}}return Ha(t,a)},shuffle:Pa},install:K,effects:lt,ticker:Ot,updateRoot:Bt.updateRoot,plugins:ht,globalTimeline:F,core:{PropTween:ee,globals:N,Tween:Ut,Timeline:Bt,Animation:Et,getCache:Z,_removeLinkedListItem:pa}};_("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return re[t]=Ut[t]}),Ot.add(Bt.updateRoot),c=re.to({},{duration:0});function ec(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r}function gc(t,a){return{name:t,rawVars:1,init:function init(t,i,e){e._onInit=function(t){var e,r;if(n(i)&&(e={},_(i,function(t){return e[t]=1}),i=e),a){for(r in e={},i)e[r]=a(i[r]);i=e}!function _addModifiers(t,e){var r,i,n,a=t._targets;for(r in e)for(i=a.length;i--;)(n=(n=t._ptLookup[i][r])&&n.d)&&(n._pt&&(n=ec(n,r)),n&&n.modifier&&n.modifier(e[r],t,a[i],r))}(t,i)}}}}var ie=re.registerPlugin({name:"attr",init:function init(t,e,r,i,n){for(var a in e)this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,n,0,0,a),this._props.push(a)}},{name:"endArray",init:function init(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},gc("roundProps",Ra),gc("modifiers"),gc("snap",Sa))||re;Ut.version=Bt.version=ie.version="3.2.6",f=1,t()&&Ct();function Rc(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Sc(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Tc(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Uc(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)}function Vc(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Wc(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Xc(t,e,r){return t.style[e]=r}function Yc(t,e,r){return t.style.setProperty(e,r)}function Zc(t,e,r){return t._gsap[e]=r}function $c(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r}function _c(t,e,r,i,n){var a=t._gsap;a.scaleX=a.scaleY=r,a.renderTransform(n,a)}function ad(t,e,r,i,n){var a=t._gsap;a[e]=r,a.renderTransform(n,a)}function ed(t,e){var r=ae.createElementNS?ae.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ae.createElement(t);return r.style?r:ae.createElement(t)}function fd(t,e,r){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(Fe,"-$1").toLowerCase())||i.getPropertyValue(e)||!r&&fd(t,Ne(e)||e,1)||""}function id(){!function _windowExists(){return"undefined"!=typeof window}()||(ne=window,ae=ne.document,se=ae.documentElement,ue=ed("div")||{style:{}},he=ed("div"),Ie=Ne(Ie),qe=Ne(qe),ue.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",fe=!!Ne("perspective"),oe=1)}function jd(t){var e,r=ed("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(se.appendChild(r),r.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=jd}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),se.removeChild(r),this.style.cssText=a,e}function kd(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])}function ld(e){var r;try{r=e.getBBox()}catch(t){r=jd.call(e,!0)}return r&&(r.width||r.height)||e.getBBox===jd||(r=jd.call(e,!0)),!r||r.width||r.x||r.y?r:{x:+kd(e,["x","cx","x1"])||0,y:+kd(e,["y","cy","y1"])||0,width:0,height:0}}function md(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!ld(t))}function nd(t,e){if(e){var r=t.style;e in Se&&(e=Ie),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(Fe,"-$1").toLowerCase())):r.removeAttribute(e)}}function od(t,e,r,i,n,a){var s=new ee(t._pt,e,r,0,1,a?Wc:Vc);return(t._pt=s).b=i,s.e=n,t._props.push(r),s}function qd(t,e,r,i){var n,a,s,o,u=parseFloat(r)||0,h=(r+"").trim().substr((u+"").length)||"px",l=ue.style,f=Ee.test(e),d="svg"===t.tagName.toLowerCase(),c=(d?"client":"offset")+(f?"Width":"Height"),p="px"===i,_="%"===i;return i===h||!u||Ge[i]||Ge[h]?u:("px"===h||p||(u=qd(t,e,r,"px")),o=t.getCTM&&md(t),_&&(Se[e]||~e.indexOf("adius"))?aa(u/(o?t.getBBox()[f?"width":"height"]:t[c])*100):(l[f?"width":"height"]=100+(p?h:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,o&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==ae&&a.appendChild||(a=ae.body),(s=a._gsap)&&_&&s.width&&f&&s.time===Ot.time?aa(u/s.width*100):(!_&&"%"!==h||(l.position=fd(t,"position")),a===t&&(l.position="static"),a.appendChild(ue),n=ue[c],a.removeChild(ue),l.position="absolute",f&&_&&((s=Z(a)).time=Ot.time,s.width=a[c]),aa(p?n*u/100:n&&u?100/n*u:0))))}function rd(t,e,r,i){var n;return oe||id(),e in Le&&"transform"!==e&&~(e=Le[e]).indexOf(",")&&(e=e.split(",")[0]),Se[e]&&"transform"!==e?(n=Ze(t,i),n="transformOrigin"!==e?n[e]:Je(fd(t,qe))+" "+n.zOrigin+"px"):(n=t.style[e])&&"auto"!==n&&!i&&!~(n+"").indexOf("calc(")||(n=Xe[e]&&Xe[e](t,e,r)||fd(t,e)||$(t,e)||("opacity"===e?1:0)),r&&!~(n+"").indexOf(" ")?qd(t,e,n,r)+r:n}function sd(t,e,r,i){if(!r||"none"===r){var n=Ne(e,t,1),a=n&&fd(t,n,1);a&&a!==r&&(e=n,r=a)}var s,o,u,h,l,f,d,c,p,_,m,g,v=new ee(this._pt,t.style,e,0,1,Qt),y=0,T=0;if(v.b=r,v.e=i,r+="","auto"===(i+="")&&(t.style[e]=i,i=fd(t,e)||i,t.style[e]=r),ob(s=[r,i]),i=s[1],u=(r=s[0]).match(tt)||[],(i.match(tt)||[]).length){for(;o=tt.exec(i);)d=o[0],p=i.substring(y,o.index),l?l=(l+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(l=1),d!==(f=u[T++]||"")&&(h=parseFloat(f)||0,m=f.substr((h+"").length),(g="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),c=parseFloat(d),_=d.substr((c+"").length),y=tt.lastIndex-_.length,_||(_=_||G.units[e]||m,y===i.length&&(i+=_,v.e+=_)),m!==_&&(h=qd(t,e,f,_)||0),v._pt={_next:v._pt,p:p||1===T?p:",",s:h,c:g?g*c:c-h,m:l&&l<4?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===e&&"none"===i?Wc:Vc;return it.test(i)&&(v.e=0),this._pt=v}function ud(t){var e=t.split(" "),r=e[0],i=e[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==i&&"right"!==i||(t=r,r=i,i=t),e[0]=Ue[r]||r,e[1]=Ue[i]||i,e.join(" ")}function vd(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,i,n,a=e.t,s=a.style,o=e.u,u=a._gsap;if("all"===o||!0===o)s.cssText="",i=1;else for(n=(o=o.split(",")).length;-1<--n;)r=o[n],Se[r]&&(i=1,r="transformOrigin"===r?qe:Ie),nd(a,r);i&&(nd(a,Ie),u&&(u.svg&&a.removeAttribute("transform"),Ze(a,1),u.uncache=1))}}function zd(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Ad(t){var e=fd(t,Ie);return zd(e)?je:e.substr(7).match(W).map(aa)}function Bd(t,e){var r,i,n,a,s=t._gsap||Z(t),o=t.style,u=Ad(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?je:u:(u!==je||t.offsetParent||t===se||s.svg||(n=o.display,o.display="block",(r=t.parentNode)&&t.offsetParent||(a=1,i=t.nextSibling,se.appendChild(t)),u=Ad(t),n?o.display=n:nd(t,"display"),a&&(i?r.insertBefore(t,i):r?r.appendChild(t):se.removeChild(t))),e&&6<u.length?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)}function Cd(t,e,r,i,n,a){var s,o,u,h=t._gsap,l=n||Bd(t,!0),f=h.xOrigin||0,d=h.yOrigin||0,c=h.xOffset||0,p=h.yOffset||0,_=l[0],m=l[1],g=l[2],v=l[3],y=l[4],T=l[5],b=e.split(" "),w=parseFloat(b[0])||0,x=parseFloat(b[1])||0;r?l!==je&&(o=_*v-m*g)&&(u=w*(-m/o)+x*(_/o)-(_*T-m*y)/o,w=w*(v/o)+x*(-g/o)+(g*T-v*y)/o,x=u):(w=(s=ld(t)).x+(~b[0].indexOf("%")?w/100*s.width:w),x=s.y+(~(b[1]||b[0]).indexOf("%")?x/100*s.height:x)),i||!1!==i&&h.smooth?(y=w-f,T=x-d,h.xOffset=c+(y*_+T*g)-y,h.yOffset=p+(y*m+T*v)-T):h.xOffset=h.yOffset=0,h.xOrigin=w,h.yOrigin=x,h.smooth=!!i,h.origin=e,h.originIsAbsolute=!!r,t.style[qe]="0px 0px",a&&(od(a,h,"xOrigin",f,w),od(a,h,"yOrigin",d,x),od(a,h,"xOffset",c,h.xOffset),od(a,h,"yOffset",p,h.yOffset)),t.setAttribute("data-svg-origin",w+" "+x)}function Fd(t,e,r){var i=Ja(e);return aa(parseFloat(e)+parseFloat(qd(t,"x",r+"px",i)))+i}function Md(t,e,r,i,a,s){var o,u,h=360,l=n(a),f=parseFloat(a)*(l&&~a.indexOf("rad")?ze:1),d=s?f*s:f-i,c=i+d+"deg";return l&&("short"===(o=a.split("_")[1])&&(d%=h)!==d%180&&(d+=d<0?h:-h),"cw"===o&&d<0?d=(d+36e9)%h-~~(d/h)*h:"ccw"===o&&0<d&&(d=(d-36e9)%h-~~(d/h)*h)),t._pt=u=new ee(t._pt,e,r,i,d,Sc),u.e=c,u.u="deg",t._props.push(r),u}function Nd(t,e,r){var i,n,a,s,o,u,h,l=he.style,f=r._gsap;for(n in l.cssText=getComputedStyle(r).cssText+";position:absolute;display:block;",l[Ie]=e,ae.body.appendChild(he),i=Ze(he,1),Se)(a=f[n])!==(s=i[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=Ja(a)!==(h=Ja(s))?qd(r,n,a,h):parseFloat(a),u=parseFloat(s),t._pt=new ee(t._pt,f,n,o,u-o,Rc),t._pt.u=h||0,t._props.push(n));ae.body.removeChild(he)}var ne,ae,se,oe,ue,he,le,fe,de=Pt.Power0,ce=Pt.Power1,pe=Pt.Power2,_e=Pt.Power3,me=Pt.Power4,ge=Pt.Linear,ve=Pt.Quad,ye=Pt.Cubic,Te=Pt.Quart,be=Pt.Quint,we=Pt.Strong,xe=Pt.Elastic,ke=Pt.Back,Me=Pt.SteppedEase,Oe=Pt.Bounce,Ce=Pt.Sine,Pe=Pt.Expo,Ae=Pt.Circ,Se={},ze=180/Math.PI,De=Math.PI/180,Re=Math.atan2,Fe=/([A-Z])/g,Ee=/(?:left|right|width|margin|padding|x)/i,Be=/[\s,\(]\S/,Le={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ie="transform",qe=Ie+"Origin",Ye="O,Moz,ms,Ms,Webkit".split(","),Ne=function _checkPropPrefix(t,e,r){var i=(e||ue).style,n=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Ye[n]+t in i););return n<0?null:(3===n?"ms":0<=n?Ye[n]:"")+t},Ge={deg:1,rad:1,turn:1},Ue={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xe={clearProps:function clearProps(t,e,r,i,n){if("isFromStart"!==n.data){var a=t._pt=new ee(t._pt,e,r,0,0,vd);return a.u=i,a.pr=-10,a.tween=n,t._props.push(r),1}}},je=[1,0,0,1,0,0],Ve={},Ze=function _parseTransform(t,e){var r=t._gsap||new Ft(t);if("x"in r&&!e&&!r.uncache)return r;var i,n,a,s,o,u,h,l,f,d,c,p,_,m,g,v,y,T,b,w,x,k,M,O,C,P,A,S,z,D,R,F,E=t.style,B=r.scaleX<0,L="deg",I=fd(t,qe)||"0";return i=n=a=u=h=l=f=d=c=0,s=o=1,r.svg=!(!t.getCTM||!md(t)),m=Bd(t,r.svg),r.svg&&(O=!r.uncache&&t.getAttribute("data-svg-origin"),Cd(t,O||I,!!O||r.originIsAbsolute,!1!==r.smooth,m)),p=r.xOrigin||0,_=r.yOrigin||0,m!==je&&(T=m[0],b=m[1],w=m[2],x=m[3],i=k=m[4],n=M=m[5],6===m.length?(s=Math.sqrt(T*T+b*b),o=Math.sqrt(x*x+w*w),u=T||b?Re(b,T)*ze:0,(f=w||x?Re(w,x)*ze+u:0)&&(o*=Math.cos(f*De)),r.svg&&(i-=p-(p*T+_*w),n-=_-(p*b+_*x))):(F=m[6],D=m[7],A=m[8],S=m[9],z=m[10],R=m[11],i=m[12],n=m[13],a=m[14],h=(g=Re(F,z))*ze,g&&(O=k*(v=Math.cos(-g))+A*(y=Math.sin(-g)),C=M*v+S*y,P=F*v+z*y,A=k*-y+A*v,S=M*-y+S*v,z=F*-y+z*v,R=D*-y+R*v,k=O,M=C,F=P),l=(g=Re(-w,z))*ze,g&&(v=Math.cos(-g),R=x*(y=Math.sin(-g))+R*v,T=O=T*v-A*y,b=C=b*v-S*y,w=P=w*v-z*y),u=(g=Re(b,T))*ze,g&&(O=T*(v=Math.cos(g))+b*(y=Math.sin(g)),C=k*v+M*y,b=b*v-T*y,M=M*v-k*y,T=O,k=C),h&&359.9<Math.abs(h)+Math.abs(u)&&(h=u=0,l=180-l),s=aa(Math.sqrt(T*T+b*b+w*w)),o=aa(Math.sqrt(M*M+F*F)),g=Re(k,M),f=2e-4<Math.abs(g)?g*ze:0,c=R?1/(R<0?-R:R):0),r.svg&&(m=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!zd(fd(t,Ie)),m&&t.setAttribute("transform",m))),90<Math.abs(f)&&Math.abs(f)<270&&(B?(s*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(o*=-1,f+=f<=0?180:-180)),r.x=((r.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+"px",r.y=((r.yPercent=n&&Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)?0:n)+"px",r.z=a+"px",r.scaleX=aa(s),r.scaleY=aa(o),r.rotation=aa(u)+L,r.rotationX=aa(h)+L,r.rotationY=aa(l)+L,r.skewX=f+L,r.skewY=d+L,r.transformPerspective=c+"px",(r.zOrigin=parseFloat(I.split(" ")[2])||0)&&(E[qe]=Je(I)),r.xOffset=r.yOffset=0,r.force3D=G.force3D,r.renderTransform=r.svg?tr:fe?Ke:He,r.uncache=0,r},Je=function _firstTwoOnly(t){return(t=t.split(" "))[0]+" "+t[1]},He=function _renderNon3DTransforms(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ke(t,e)},Qe="0deg",$e="0px",We=") ",Ke=function _renderCSSTransforms(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,a=r.x,s=r.y,o=r.z,u=r.rotation,h=r.rotationY,l=r.rotationX,f=r.skewX,d=r.skewY,c=r.scaleX,p=r.scaleY,_=r.transformPerspective,m=r.force3D,g=r.target,v=r.zOrigin,y="",T="auto"===m&&t&&1!==t||!0===m;if(v&&(l!==Qe||h!==Qe)){var b,w=parseFloat(h)*De,x=Math.sin(w),k=Math.cos(w);w=parseFloat(l)*De,b=Math.cos(w),a=Fd(g,a,x*b*-v),s=Fd(g,s,-Math.sin(w)*-v),o=Fd(g,o,k*b*-v+v)}_!==$e&&(y+="perspective("+_+We),(i||n)&&(y+="translate("+i+"%, "+n+"%) "),!T&&a===$e&&s===$e&&o===$e||(y+=o!==$e||T?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+We),u!==Qe&&(y+="rotate("+u+We),h!==Qe&&(y+="rotateY("+h+We),l!==Qe&&(y+="rotateX("+l+We),f===Qe&&d===Qe||(y+="skew("+f+", "+d+We),1===c&&1===p||(y+="scale("+c+", "+p+We),g.style[Ie]=y||"translate(0, 0)"},tr=function _renderSVGTransforms(t,e){var r,i,n,a,s,o=e||this,u=o.xPercent,h=o.yPercent,l=o.x,f=o.y,d=o.rotation,c=o.skewX,p=o.skewY,_=o.scaleX,m=o.scaleY,g=o.target,v=o.xOrigin,y=o.yOrigin,T=o.xOffset,b=o.yOffset,w=o.forceCSS,x=parseFloat(l),k=parseFloat(f);d=parseFloat(d),c=parseFloat(c),(p=parseFloat(p))&&(c+=p=parseFloat(p),d+=p),d||c?(d*=De,c*=De,r=Math.cos(d)*_,i=Math.sin(d)*_,n=Math.sin(d-c)*-m,a=Math.cos(d-c)*m,c&&(p*=De,s=Math.tan(c-p),n*=s=Math.sqrt(1+s*s),a*=s,p&&(s=Math.tan(p),r*=s=Math.sqrt(1+s*s),i*=s)),r=aa(r),i=aa(i),n=aa(n),a=aa(a)):(r=_,a=m,i=n=0),(x&&!~(l+"").indexOf("px")||k&&!~(f+"").indexOf("px"))&&(x=qd(g,"x",l,"px"),k=qd(g,"y",f,"px")),(v||y||T||b)&&(x=aa(x+v-(v*r+y*n)+T),k=aa(k+y-(v*i+y*a)+b)),(u||h)&&(s=g.getBBox(),x=aa(x+u/100*s.width),k=aa(k+h/100*s.height)),s="matrix("+r+","+i+","+n+","+a+","+x+","+k+")",g.setAttribute("transform",s),w&&(g.style[Ie]=s)};_("padding,margin,Width,Radius",function(e,r){var t="Right",i="Bottom",n="Left",o=(r<3?["Top",t,i,n]:["Top"+n,"Top"+t,i+t,i+n]).map(function(t){return r<2?e+t:"border"+t+e});Xe[1<r?"border"+e:e]=function(e,t,r,i,n){var a,s;if(arguments.length<4)return a=o.map(function(t){return rd(e,t,r)}),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(i+"").split(" "),s={},o.forEach(function(t,e){return s[t]=a[e]=a[e]||a[(e-1)/2|0]}),e.init(t,s,n)}});var er,rr,ir,nr={name:"css",register:id,targetTest:function targetTest(t){return t.style&&t.nodeType},init:function init(t,e,r,i,n){var a,s,o,u,h,l,f,d,c,p,_,m,g,v,y,T=this._props,b=t.style;for(f in oe||id(),e)if("autoRound"!==f&&(s=e[f],!ht[f]||!Jb(f,e,r,i,t,n)))if(h=typeof s,l=Xe[f],"function"===h&&(h=typeof(s=s.call(r,i,t,n))),"string"===h&&~s.indexOf("random(")&&(s=$a(s)),l)l(this,t,f,s,r)&&(y=1);else if("--"===f.substr(0,2))this.add(b,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",s+"",i,n,0,0,f);else{if(a=rd(t,f),u=parseFloat(a),(p="string"===h&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),o=parseFloat(s),f in Le&&("autoAlpha"===f&&(1===u&&"hidden"===rd(t,"visibility")&&o&&(u=0),od(this,b,"visibility",u?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==f&&"transform"!==f&&~(f=Le[f]).indexOf(",")&&(f=f.split(",")[0])),_=f in Se)if(m||((g=t._gsap).renderTransform||Ze(t),v=!1!==e.smoothOrigin&&g.smooth,(m=this._pt=new ee(this._pt,b,Ie,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===f)this._pt=new ee(this._pt,g,"scaleY",g.scaleY,p?p*o:o-g.scaleY),T.push("scaleY",f),f+="X";else{if("transformOrigin"===f){s=ud(s),g.svg?Cd(t,s,0,v,0,this):((c=parseFloat(s.split(" ")[2])||0)!==g.zOrigin&&od(this,g,"zOrigin",g.zOrigin,c),od(this,b,f,Je(a),Je(s)));continue}if("svgOrigin"===f){Cd(t,s,1,v,0,this);continue}if(f in Ve){Md(this,g,f,u,s,p);continue}if("smoothOrigin"===f){od(this,g,"smooth",g.smooth,s);continue}if("force3D"===f){g[f]=s;continue}if("transform"===f){Nd(this,s,t);continue}}else f in b||(f=Ne(f)||f);if(_||(o||0===o)&&(u||0===u)&&!Be.test(s)&&f in b)(d=(a+"").substr((u+"").length))!==(c=(s+"").substr(((o=o||0)+"").length)||(f in G.units?G.units[f]:d))&&(u=qd(t,f,a,c)),this._pt=new ee(this._pt,_?g:b,f,u,p?p*o:o-u,"px"!==c||!1===e.autoRound||_?Rc:Uc),this._pt.u=c||0,d!==c&&(this._pt.b=a,this._pt.r=Tc);else if(f in b)sd.call(this,t,f,a,s);else{if(!(f in t)){L(f,s);continue}this.add(t,f,t[f],s,i,n)}T.push(f)}y&&te(this)},get:rd,aliases:Le,getSetter:function getSetter(t,e,r){var i=Le[e];return i&&i.indexOf(",")<0&&(e=i),e in Se&&e!==qe&&(t._gsap.x||rd(t,"x"))?r&&le===r?"scale"===e?$c:Zc:(le=r||{})&&("scale"===e?_c:ad):t.style&&!q(t.style[e])?Xc:~e.indexOf("-")?Yc:Zt(t,e)},core:{_removeProperty:nd,_getMatrix:Bd}};ie.utils.checkPrefix=Ne,ir=_((er="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(rr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Se[t]=1}),_(rr,function(t){G.units[t]="deg",Ve[t]=1}),Le[ir[13]]=er+","+rr,_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");Le[e[1]]=ir[e[0]]}),_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){G.units[t]="px"}),ie.registerPlugin(nr);var ar=ie.registerPlugin(nr)||ie,sr=ar.core.Tween;e.Back=ke,e.Bounce=Oe,e.CSSPlugin=nr,e.Circ=Ae,e.Cubic=ye,e.Elastic=xe,e.Expo=Pe,e.Linear=ge,e.Power0=de,e.Power1=ce,e.Power2=pe,e.Power3=_e,e.Power4=me,e.Quad=ve,e.Quart=Te,e.Quint=be,e.Sine=Ce,e.SteppedEase=Me,e.Strong=we,e.TimelineLite=Bt,e.TimelineMax=Bt,e.TweenLite=Ut,e.TweenMax=sr,e.default=ar,e.gsap=ar;if (typeof(window)==="undefined"||window!==e){Object.defineProperty(e,"__esModule",{value:!0})} else {delete e.default}});

</script>
<div style="display: none;" class="containerTop to-top" >
  <div class="heart-wrap">
    <div class="heart">
      <div class="tank"></div>
      <svg class="curve" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g>
          <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(103, 130, 191, 0.5)" />
          <use xlink:href="#gentle-wave" x="48" y="1" fill="rgba(103, 130, 191, 0.3)" />
          <use xlink:href="#gentle-wave" x="48" y="2" fill="rgba(103, 130, 191, 1)" />
        </g>
      </svg>
    </div>
  </div>
	
<svg>
  <clipPath id="myPath" clipPathUnits="objectBoundingBox">
     
     <path d="M0.373,0.967 S0.616,0.866,0.768,0.644 S0.912,0.107,0.739,0 S0.373,0.108,0.373,0.108 S0.166,-0.113,0,-0.002 S-0.159,0.432,-0.021,0.644 S0.373,0.967,0.373,0.967"></path>
	 
	  
  </clipPath>
</svg>
</div>

<script>
	$('.to-top').toTop();
</script>

<script>
$(document).ready(function () {
  let pumpLevels = [25, 30, 45, 0];
  let tankLevels = [25, 45, 70, -20];
  let counter = 0;
  let isAnimating = false;
  
  function pumpHeart() {
    if(isAnimating) {
		alert('点这么快，是心动吗？');
      return;
    }
    
    isAnimating = true;
    //forward
    gsap.to('.heart', {
      translateZ: pumpLevels[counter], 
      duration: 0.5
    });
    
    gsap.to(".curve", {
      bottom: tankLevels[counter],
      transformOrigin: "bottom",
      scaleY: 1,
      duration: 0.5
    })
      gsap.to(".tank", {
      height: counter === 3 ? 0 : tankLevels[counter],
      duration: 0.5
    })
    
    //reverse
    gsap.to(".curve", {
      delay: 0.6,
      bottom: tankLevels[counter],
      transformOrigin: "bottom",
      scaleY: 0.5,
      duration: 0.5
    });
    
    gsap.to('.heart', {

      delay: 0.6,
      translateZ: 0,
      duration: 0.25,
      onComplete: function() {
        isAnimating = false;
      }
    })
    
    if(++counter > 3){
		counter = 0;
		$('.to-top').toTop();
		
	} 
  }
  
  let heart = document.getElementsByClassName('heart')[0];
  heart.addEventListener("click", pumpHeart);
});
</script>






<style>
.vditor-speech {    
	position: absolute;
    display: none;
    background-color: #1d2125;
    border: 1px solid #2ca9e6;
    box-shadow: 0 0.3rem 2rem rgba(0, 255, 149, 0.6);
    border-radius: 3px;
    padding: 6px;
    cursor: pointer;
    color: #b9b9b9;
	margin-top: 20px;
	z-index: 9999;
        }
.vditor-speech--current, .vditor-speech:hover {
            color: #fff
        }
.vditor-speech svg {
            height: 14px;
            width: 14px;
            fill: currentColor;
            display: block;
            stroke-width: 0;
            stroke: currentColor;
        }
</style>
<script>
   if (window.addEventListener) { window.addEventListener("load",dearmsdanread, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanread); }
    else{ window.onload =dearmsdanread; }
	
  function dearmsdanread(){

function speak(text){if(!isBlank(text)){var src="https://api.heycmm.cn/speak/"+text;if(src.length<=2083){var n=document.querySelector(".Audio-speech");if(!n){(n=document.createElement("AUDIO")).className="Audio-speech";}else{document.getElementById("audios").style.display="block";}
n.setAttribute("id","audios");n.setAttribute("src",src);n.setAttribute("controls","controls");n.play()}}else{document.getElementById("audios").pause();document.getElementById("audios").style.display="none"}}
function trim(str){if(str==null){return""}
return str.toString().replace(/(^\s*)|(\s*$)|\r|\n/g,"")}
function isBlank(str){if(str==null||trim(str)==""){return true}
return false}
var play_svg_1='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n'+'<path d="M6 0v32l20-15.977-20-16.023z"></path>\n'+'</svg>\n';var pause_svg_1='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n'+'<path d="M11 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1zM27 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1z"></path>\n'+'</svg>\n';var speechDom=document.querySelector(".vditor-speech");if(!speechDom){speechDom=document.createElement("div");speechDom.className="vditor-speech";document.body.insertAdjacentElement("beforeend",speechDom);speechDom.onclick=function(){if(speechDom.className==="vditor-speech"){var utterThis=speechDom.getAttribute("data-text");
speak(utterThis);speechDom.className="vditor-speech vditor-speech--current";speechDom.innerHTML=pause_svg_1;}
var selection=window.getSelection();selection.removeAllRanges();selection.addRange(window.vditorSpeechRange);};document.body.addEventListener("click",function(){if(getSelection().toString().trim()===""&&speechDom.style.display==="block"){speechDom.className="vditor-speech";speechSynthesis.cancel();speechDom.style.display="none";}});}
document.addEventListener("mouseup",function(event){var text=getSelection().toString().trim();speechSynthesis.cancel();if(getSelection().toString().trim()===""){if(speechDom.style.display==="block"){speechDom.className="vditor-speech";speechDom.style.display="none";}
return;}
window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var rect=getSelection().getRangeAt(0).getBoundingClientRect();speechDom.innerHTML=play_svg_1;speechDom.style.display="block";speechDom.style.top=(rect.top+rect.height+document.querySelector("html").scrollTop-20)+"px";speechDom.style.left=(event.screenX+2)+"px";speechDom.setAttribute("data-text",text);});
	
  }
	
	// 。。。
	
/*	
	   var play_svg_1 = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n' +
       '<path d="M6 0v32l20-15.977-20-16.023z"></path>\n' +
       '</svg>\n';
   var pause_svg_1 = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n' +
       '<path d="M11 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1zM27 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1z"></path>\n' +
       '</svg>\n';
    var speechDom = document.querySelector(".vditor-speech");
    var lang = "zh_CN";
    if (!speechDom) {
        speechDom = document.createElement("div");
        speechDom.className = "vditor-speech";
        document.body.insertAdjacentElement("beforeend", speechDom);
        var getVoice = function () {
            var voices = speechSynthesis.getVoices();
            var currentVoice;
            var defaultVoice;
            voices.forEach(function (item) {
              if (item.lang === lang.replace("_", "-")) {
                    currentVoice = item;
                }
                if (item["default"]) {
                    defaultVoice = item;
                }
            });
            if (!currentVoice) {
                currentVoice = defaultVoice;
            }
            return currentVoice;
        };
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = getVoice;
        }
        var voice_1 = getVoice();
        speechDom.onclick = function () {
            if (speechDom.className === "vditor-speech") {
                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute("data-text"));
                utterThis.voice = voice_1;
                utterThis.onend = function () {
                    speechDom.className = "vditor-speech";
                    speechSynthesis.cancel();
                    speechDom.innerHTML = play_svg_1;
                };
                speechSynthesis.speak(utterThis);
                speechDom.className = "vditor-speech vditor-speech--current";
                speechDom.innerHTML = pause_svg_1;
            }
            else {
                if (speechSynthesis.speaking) {
                    if (speechSynthesis.paused) {
                        speechSynthesis.resume();
                        speechDom.innerHTML = pause_svg_1;
                    }
                    else {
                        speechSynthesis.pause();
                        speechDom.innerHTML = play_svg_1;
                    }
                }
            }
            var selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(window.vditorSpeechRange);
        };
        document.body.addEventListener("click", function () {
            if (getSelection().toString().trim() === "" && speechDom.style.display === "block") {
                speechDom.className = "vditor-speech";
                speechSynthesis.cancel();
                speechDom.style.display = "none";
            }
        });
    }
   document.addEventListener("mouseup", function (event) {
        var text = getSelection().toString().trim();
        speechSynthesis.cancel();
        if (getSelection().toString().trim() === "") {
            if (speechDom.style.display === "block") {
                speechDom.className = "vditor-speech";
                speechDom.style.display = "none";
            }
            return;
        }
        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();
        var rect = getSelection().getRangeAt(0).getBoundingClientRect();
        speechDom.innerHTML = play_svg_1;
        speechDom.style.display = "block";
        speechDom.style.top = (rect.top + rect.height + document.querySelector("html").scrollTop - 20) + "px";
        speechDom.style.left = (event.screenX + 2) + "px";
        speechDom.setAttribute("data-text", text);
    });*/
</script>








<style>
	.navme>li>a:hover, .navme>li>a:focus, .navme>li>a.active{
    background-color: ;
    border-left: 5px solid ;
	}
	.navme > li > div{
    background-color: ;
	}
	.navme >li > div> ul> li:hover{
    background-color: !important
	}
</style>

<script type="text/javascript"> 
	
	
	
	
	function dearmsdanfooter() {
	//https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302
	/* 设置 背景 */
	
		$(".dearmsdan-bg").css("background-image","url('')");
		$(".dearmsdan-bg").css("opacity","0.3");
	
   }


   if (window.addEventListener) { window.addEventListener("load",dearmsdanfooter, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanfooter); }
    else{ window.onload =dearmsdanfooter; }
     
</script>



<script src="/js/diy/date.js"></script>
<script src="/js/diy/particleCanvas.js"></script>
	

<script>
dearmsdanDate();
function dearmsdanDate() {
  document.write('<a href="#" style="display:none" target="_blank"><div id="date"></div><font color="#DF0A10">星期<span id="wk"></span></font>&nbsp;<span id="clk"></span><br />农历<span id="nongli"></span></a>')
  cal_u()
  cal_s()
  setInterval("cal_s()", 999)
}


var season = 0;  // 四季判断标识
var festival = [];  // 节日标识
var dearmsdanCanvas = null;  // 自定义画布标识
(function(d){
var traditional,month,date;
traditional = d[0];
month = d[1];
date = d[2];
	/* console.log("元旦快乐"+month+ '===='+date); */
	if(month == 1 && date == 1){
	   var fv = ['元旦快乐',1.1];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	  };
	
	/* t春节 */
var arr = ['正月初一','正月初二','正月初三','正月初四','正月初五','正月初六','正月初七','正月初八','正月初九','正月初十']; 
	for(var i=0; i <= arr.length; i++){
		if(traditional == arr[i]){
			var fv = ['新年快乐',2.1];
			var festival = function(){
				return fv;
			}
			this.festival = festival();
	   }
	}
	/* t情人节 */
	if(month == 2 && date == 14){
	   var fv = ['情人节快乐',2.14];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	   }
	/* f植树节 */
	if(month == 3 && date == 12){
	   		console.log("植树节"+month+ '====' +date);
	   }
	/* f愚人节 */
	if(month == 4 && date == 1){
	   		console.log("愚人节"+month+ '====' +date);
	   }
	/* t清明节 */
	if ((month == 4) && ((date == 4) || (date == 5) || (date == 6))){
	   var fv = ['清明节安康',4.4];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	}
	/* f劳动节 */
	if(month == 5 && date == 1){
	   		console.log("劳动节"+month+ '====' +date);
	   }
	/* t儿童节 */
	if(month == 6 && date == 1){
	   var fv = ['儿童快乐',6.1];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	   }
	/* f端午节 */
	if(traditional == '五月初五'){
	   		console.log("端午节"+month+ '====' +date);
	   }
	/* t七夕 */
	if(traditional == '七月初七'){
		   var fv = ['七夕快乐',7.7];
		   var festival = function(){
			   return fv;
		   }
		   this.festival = festival();
	   }
	/* f教师节 */
	if(month == 9 && date == 10){
	   		console.log("教师节"+month+ '====' +date);
	   }
	/* f国庆节、国庆、中秋双庆 */
	if(month == 10 && date == 1){
		if(traditional == '八月十五'){
	   		console.log("国庆节、中秋节双庆"+month+ '====' +date);
		   }else{
			   console.log("国庆节"+month+ '====' +date);
		   }
	   }
	/* f中秋 */
	if(traditional == '八月十五'){
		if(month == 10 && date == 1){
			
		}else{
			console.log("中秋节"+month+ '====' +date);
		}
	   }
	/* f重阳节 */
	if(traditional == '九月初九'){
	   		console.log("重阳节"+month+ '====' +date);
	   }
	/* f万圣节 */
	if(month == 11 && date == 1){
	   		console.log("万圣节"+month+ '====' +date);
	   }
	/* f感恩节 */
	if(month == 11 && date == 26){
	   		console.log("感恩节"+month+ '====' +date);
	   }
	/* f平安节 */
	if(month == 12 && date == 24){
	   		console.log("平安夜"+month+ '====' +date);
	   }
	/* f圣诞节 */
	if(month == 12 && date == 25){
	   		console.log("圣诞节"+month+ '====' +date);
	   }
	
	
	
	/*console.log("春季"+month+ '====' +date);*/
	if(month >= 1 && month <= 3){
		var cun = 1;
		var season1 = function(){
        return cun;
    	}
		season = season1();
		
	   }
	/*console.log("夏季"+month+ '====' +date);*/
	if(month >= 4 && month <= 6){
		var cun = 2;
		var season1 = function(){
        return cun;
    	}
		season = season1();
	   }
	/*console.log("秋季"+month+ '====' +date);*/
	if(month >= 7 && month <= 9){
		var cun = 3;
		var season1 = function(){
        return cun;
    	}
		season = season1();
		
	   }
	/*console.log("冬季"+month+ '====' +date);*/
	if(month >= 10 && month <= 12){
		var cun = 4;
		var season1 = function(){
        return cun;
    	}
		season = season1();
	   }
	
})(arrdate);


	//console.log(season);
$(".dearmsdan-festival").attr("id","dearmsdanSeason");
if(season == 1){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/flake.png"
	},
	"number": 5,
	"op": {
		"min": 1,
		"max": 1
	},
	"size": {
		"min": 40,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 2){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/watermelon.png"
	},
	"number": 8,
	"op": {
		"min": 0.4,
		"max": 1
	},
	"size": {
		"min": 30,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 2,
		"max": 2
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 0.8,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 3){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/butterfly.png"
	},
	"number": 30,
	"op": {
		"min": 0.5,
		"max": 1
	},
	"size": {
		"min": 8,
		"max": 22
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 4){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/snowflake.png"
	},
	"number": 50,
	"op": {
		"min": 0.1,
		"max": 1
	},
	"size": {
		"min": 20,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}

</script>



















<style>
	.navred>li>a:hover, .navred>li>a:focus, .navred>li>a.active{
    background-color: rgb(255, 210, 210);
    border-left: 5px solid rgb(222, 41, 41);
	}
	.navred > li > div{
    background-color: #e2a4a4;
	}
	.navred >li > div> ul> li:hover{
    background-color: #f6abab!important
	}
</style>
<script>
if(festival[1] == 1.1){
console.log(festival[0]);
// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 135, 135, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','#ffd1d1');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navred');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 0, 0, 0.5)');
	
	
	
$(".dearmsdan-festival").attr("id","c");
	var w = c.width = window.innerWidth,
		h = c.height = window.innerHeight,
		ctx = c.getContext( '2d' ),
		
		hw = w / 2, // half-width
		hh = h / 2,
		
		opts = {
			strings: [ '元旦到了！' , '用简单装饰祝福你，元旦快乐！','新年新气象~' ],
			charSize: 22,
			charSpacing: 35,
			lineHeight: 50,
			
			cx: w / 2,
			cy: h / 2,
			
			fireworkPrevPoints: 10,
			fireworkBaseLineWidth: 5,
			fireworkAddedLineWidth: 8,
			fireworkSpawnTime: 200,
			fireworkBaseReachTime: 30,
			fireworkAddedReachTime: 30,
			fireworkCircleBaseSize: 20,
			fireworkCircleAddedSize: 10,
			fireworkCircleBaseTime: 30,
			fireworkCircleAddedTime: 30,
			fireworkCircleFadeBaseTime: 10,
			fireworkCircleFadeAddedTime: 5,
			fireworkBaseShards: 5,
			fireworkAddedShards: 5,
			fireworkShardPrevPoints: 3,
			fireworkShardBaseVel: 4,
			fireworkShardAddedVel: 2,
			fireworkShardBaseSize: 3,
			fireworkShardAddedSize: 3,
			gravity: .1,
			upFlow: -.1,
			letterContemplatingWaitTime: 360,
			balloonSpawnTime: 20,
			balloonBaseInflateTime: 10,
			balloonAddedInflateTime: 10,
			balloonBaseSize: 20,
			balloonAddedSize: 20,
			balloonBaseVel: .4,
			balloonAddedVel: .4,
			balloonBaseRadian: -( Math.PI / 2 - .5 ),
			balloonAddedRadian: -1,
		},
		calc = {
			totalWidth: opts.charSpacing * Math.max( opts.strings[0].length, opts.strings[1].length )
		},
		
		Tau = Math.PI * 2,
		TauQuarter = Tau / 4,
		
		letters = [];

ctx.font = opts.charSize + 'px Verdana';

function Letter( char, x, y ){
	this.char = char;
	this.x = x;
	this.y = y;
	
	this.dx = -ctx.measureText( char ).width / 2;
	this.dy = +opts.charSize / 2;
	
	this.fireworkDy = this.y - hh;
	
	var hue = x / calc.totalWidth * 360;
	
	this.color = 'hsl(hue,80%,50%)'.replace( 'hue', hue );
	this.lightAlphaColor = 'hsla(hue,80%,light%,alp)'.replace( 'hue', hue );
	this.lightColor = 'hsl(hue,80%,light%)'.replace( 'hue', hue );
	this.alphaColor = 'hsla(hue,80%,50%,alp)'.replace( 'hue', hue );
	
	this.reset();
}
Letter.prototype.reset = function(){
	
	this.phase = 'firework';
	this.tick = 0;
	this.spawned = false;
	this.spawningTime = opts.fireworkSpawnTime * Math.random() |0;
	this.reachTime = opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random() |0;
	this.lineWidth = opts.fireworkBaseLineWidth + opts.fireworkAddedLineWidth * Math.random();
	this.prevPoints = [ [ 0, hh, 0 ] ];
}
Letter.prototype.step = function(){
	
	if( this.phase === 'firework' ){
		
		if( !this.spawned ){
			
			++this.tick;
			if( this.tick >= this.spawningTime ){
				
				this.tick = 0;
				this.spawned = true;
			}
			
		} else {
			
			++this.tick;
			
			var linearProportion = this.tick / this.reachTime,
					armonicProportion = Math.sin( linearProportion * TauQuarter ),
					
					x = linearProportion * this.x,
					y = hh + armonicProportion * this.fireworkDy;
			
			if( this.prevPoints.length > opts.fireworkPrevPoints )
				this.prevPoints.shift();
			
			this.prevPoints.push( [ x, y, linearProportion * this.lineWidth ] );
			
			var lineWidthProportion = 1 / ( this.prevPoints.length - 1 );
			
			for( var i = 1; i < this.prevPoints.length; ++i ){
				
				var point = this.prevPoints[ i ],
						point2 = this.prevPoints[ i - 1 ];
					
				ctx.strokeStyle = this.alphaColor.replace( 'alp', i / this.prevPoints.length );
				ctx.lineWidth = point[ 2 ] * lineWidthProportion * i;
				ctx.beginPath();
				ctx.moveTo( point[ 0 ], point[ 1 ] );
				ctx.lineTo( point2[ 0 ], point2[ 1 ] );
				ctx.stroke();
			
			}
			
			if( this.tick >= this.reachTime ){
				
				this.phase = 'contemplate';
				
				this.circleFinalSize = opts.fireworkCircleBaseSize + opts.fireworkCircleAddedSize * Math.random();
				this.circleCompleteTime = opts.fireworkCircleBaseTime + opts.fireworkCircleAddedTime * Math.random() |0;
				this.circleCreating = true;
				this.circleFading = false;
				
				this.circleFadeTime = opts.fireworkCircleFadeBaseTime + opts.fireworkCircleFadeAddedTime * Math.random() |0;
				this.tick = 0;
				this.tick2 = 0;
				
				this.shards = [];
				
				var shardCount = opts.fireworkBaseShards + opts.fireworkAddedShards * Math.random() |0,
						angle = Tau / shardCount,
						cos = Math.cos( angle ),
						sin = Math.sin( angle ),
						
						x = 1,
						y = 0;
				
				for( var i = 0; i < shardCount; ++i ){
					var x1 = x;
					x = x * cos - y * sin;
					y = y * cos + x1 * sin;
					
					this.shards.push( new Shard( this.x, this.y, x, y, this.alphaColor ) );
				}
			}
			
		}
	} else if( this.phase === 'contemplate' ){
		
		++this.tick;
		
		if( this.circleCreating ){
			
			++this.tick2;
			var proportion = this.tick2 / this.circleCompleteTime,
					armonic = -Math.cos( proportion * Math.PI ) / 2 + .5;
			
			ctx.beginPath();
			ctx.fillStyle = this.lightAlphaColor.replace( 'light', 50 + 50 * proportion ).replace( 'alp', proportion );
			ctx.beginPath();
			ctx.arc( this.x, this.y, armonic * this.circleFinalSize, 0, Tau );
			ctx.fill();
			
			if( this.tick2 > this.circleCompleteTime ){
				this.tick2 = 0;
				this.circleCreating = false;
				this.circleFading = true;
			}
		} else if( this.circleFading ){
		
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			++this.tick2;
			var proportion = this.tick2 / this.circleFadeTime,
					armonic = -Math.cos( proportion * Math.PI ) / 2 + .5;
			
			ctx.beginPath();
			ctx.fillStyle = this.lightAlphaColor.replace( 'light', 100 ).replace( 'alp', 1 - armonic );
			ctx.arc( this.x, this.y, this.circleFinalSize, 0, Tau );
			ctx.fill();
			
			if( this.tick2 >= this.circleFadeTime )
				this.circleFading = false;
			
		} else {
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
		}
		
		for( var i = 0; i < this.shards.length; ++i ){
			
			this.shards[ i ].step();
			
			if( !this.shards[ i ].alive ){
				this.shards.splice( i, 1 );
				--i;
			}
		}
		
		if( this.tick > opts.letterContemplatingWaitTime ){
			
			this.phase = 'balloon';
			
			this.tick = 0;
			this.spawning = true;
			this.spawnTime = opts.balloonSpawnTime * Math.random() |0;
			this.inflating = false;
			this.inflateTime = opts.balloonBaseInflateTime + opts.balloonAddedInflateTime * Math.random() |0;
			this.size = opts.balloonBaseSize + opts.balloonAddedSize * Math.random() |0;
			
			var rad = opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random(),
					vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();
			
			this.vx = Math.cos( rad ) * vel;
			this.vy = Math.sin( rad ) * vel;
		}
	} else if( this.phase === 'balloon' ){
			
		ctx.strokeStyle = this.lightColor.replace( 'light', 80 );
		
		if( this.spawning ){
			
			++this.tick;
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			if( this.tick >= this.spawnTime ){
				this.tick = 0;
				this.spawning = false;
				this.inflating = true;	
			}
		} else if( this.inflating ){
			
			++this.tick;
			
			var proportion = this.tick / this.inflateTime,
			    x = this.cx = this.x,
					y = this.cy = this.y - this.size * proportion;
			
			ctx.fillStyle = this.alphaColor.replace( 'alp', proportion );
			ctx.beginPath();
			generateBalloonPath( x, y, this.size * proportion );
			ctx.fill();
			
			ctx.beginPath();
			ctx.moveTo( x, y );
			ctx.lineTo( x, this.y );
			ctx.stroke();
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			if( this.tick >= this.inflateTime ){
				this.tick = 0;
				this.inflating = false;
			}
			
		} else {
			
			this.cx += this.vx;
			this.cy += this.vy += opts.upFlow;
			
			ctx.fillStyle = this.color;
			ctx.beginPath();
			generateBalloonPath( this.cx, this.cy, this.size );
			ctx.fill();
			
			ctx.beginPath();
			ctx.moveTo( this.cx, this.cy );
			ctx.lineTo( this.cx, this.cy + this.size );
			ctx.stroke();
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.cx + this.dx, this.cy + this.dy + this.size );
			
			if( this.cy + this.size < -hh || this.cx < -hw || this.cy > hw  )
				this.phase = 'done';
			
		}
	}
}
function Shard( x, y, vx, vy, color ){
	
	var vel = opts.fireworkShardBaseVel + opts.fireworkShardAddedVel * Math.random();
	
	this.vx = vx * vel;
	this.vy = vy * vel;
	
	this.x = x;
	this.y = y;
	
	this.prevPoints = [ [ x, y ] ];
	this.color = color;
	
	this.alive = true;
	
	this.size = opts.fireworkShardBaseSize + opts.fireworkShardAddedSize * Math.random();
}
Shard.prototype.step = function(){
	
	this.x += this.vx;
	this.y += this.vy += opts.gravity;
	
	if( this.prevPoints.length > opts.fireworkShardPrevPoints )
		this.prevPoints.shift();
	
	this.prevPoints.push( [ this.x, this.y ] );
	
	var lineWidthProportion = this.size / this.prevPoints.length;
	
	for( var k = 0; k < this.prevPoints.length - 1; ++k ){
		
		var point = this.prevPoints[ k ],
				point2 = this.prevPoints[ k + 1 ];
		
		ctx.strokeStyle = this.color.replace( 'alp', k / this.prevPoints.length );
		ctx.lineWidth = k * lineWidthProportion;
		ctx.beginPath();
		ctx.moveTo( point[ 0 ], point[ 1 ] );
		ctx.lineTo( point2[ 0 ], point2[ 1 ] );
		ctx.stroke();
		
	}
	
	if( this.prevPoints[ 0 ][ 1 ] > hh )
		this.alive = false;
}
function generateBalloonPath( x, y, size ){
	
	ctx.moveTo( x, y );
	ctx.bezierCurveTo( x - size / 2, y - size / 2,
									 	 x - size / 4, y - size,
									   x,            y - size );
	ctx.bezierCurveTo( x + size / 4, y - size,
									   x + size / 2, y - size / 2,
									   x,            y );
}

function anim(){
	
	window.requestAnimationFrame( anim );
	
	ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
	ctx.fillRect( 0, 0, w, h );
	
	ctx.translate( hw, hh );
	
	var done = true;
	for( var l = 0; l < letters.length; ++l ){
		
		letters[ l ].step();
		if( letters[ l ].phase !== 'done' )
			done = false;
	}
	
	ctx.translate( -hw, -hh );
	
	if( done )
		for( var l = 0; l < letters.length; ++l )
			letters[ l ].reset();
}

for( var i = 0; i < opts.strings.length; ++i ){
	for( var j = 0; j < opts.strings[ i ].length; ++j ){
		letters.push( new Letter( opts.strings[ i ][ j ], 
														j * opts.charSpacing + opts.charSpacing / 2 - opts.strings[ i ].length * opts.charSize / 2,
														i * opts.lineHeight + opts.lineHeight / 2 - opts.strings.length * opts.lineHeight / 2 ) );
	}
}

anim();

window.addEventListener( 'resize', function(){
	
	w = c.width = window.innerWidth;
	h = c.height = window.innerHeight;
	
	hw = w / 2;
	hh = h / 2;
	
	ctx.font = opts.charSize + 'px Verdana';
})
	
}
</script>

	



<style>
</style>
<script>
if(festival[1] == 2.1){
	console.log(festival[0]);

// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 135, 135, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','#ffd1d1');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navred');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 0, 0, 0.5)');
	
	var ctx = document.querySelector('.dearmsdan-festival').getContext('2d')
ctx.canvas.width = window.innerWidth
ctx.canvas.height = window.innerHeight

var sparks = []
var fireworks = []
var i = 20; while(i--) {
   fireworks.push(
      new Firework(Math.random()*window.innerWidth, window.innerHeight*Math.random())
   )
}

render()
function render() {
   setTimeout(render, 1000/60)
   ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
   ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)
   for(var firework of fireworks) {
      if(firework.dead) continue
      firework.move()
      firework.draw()
   }
   for(var spark of sparks) {
      if(spark.dead) continue
      spark.move()
      spark.draw()
   }
   
   if(Math.random() < 0.05) {
      fireworks.push(new Firework())
   }
}

function Spark(x, y, color) {
   this.x = x
   this.y = y
   this.dir = Math.random() * (Math.PI*2)
   this.dead = false
   this.color = color
   this.speed = Math.random() * 3 + 3;
   this.walker = new Walker({ radius: 20, speed: 0.25 })
   this.gravity = 0.25
   this.dur = this.speed / 0.1
   this.move = function() {
      this.dur--
      if(this.dur < 0) this.dead = true
      
      if(this.speed < 0) return
      if(this.speed > 0) this.speed -= 0.1
      var walk = this.walker.step()
      this.x += Math.cos(this.dir + walk) * this.speed
      this.y += Math.sin(this.dir + walk) * this.speed
      this.y += this.gravity
      this.gravity += 0.05
      
   }
   this.draw = function() {
      drawCircle(this.x, this.y, 3, this.color)
   }
}

function Firework(x, y) {
   this.xmove = new Walker({radius: 10, speed: 0.5})
   this.x = x || Math.random() * ctx.canvas.width
   this.y = y || ctx.canvas.height
   this.height = Math.random()*ctx.canvas.height/2
   this.dead = false
   this.color = randomColor()
   
   this.move = function() {
      this.x += this.xmove.step()
      if(this.y > this.height) this.y -= 1; 
      else this.burst()
      
   }
   this.draw = function() {
      drawCircle(this.x, this.y, 1, this.color)
   }
   this.burst = function() {
      this.dead = true
      var i = 100; while(i--) sparks.push(new Spark(this.x, this.y, this.color))
   }
}

function drawCircle(x, y, radius, color) {
   color = color || '#FFF'
   ctx.fillStyle = color
   ctx.fillRect(x-radius/2, y-radius/2, radius, radius)
}

function randomColor(){
   return ['#ff6767','#ff0000','#ff8800','#ff00fc','#66cbe1'][Math.floor(Math.random() * 5)];
}

function Walker(options){
   this.step = function(){
      this.direction = Math.sign(this.target) * this.speed
      this.value += this.direction
      this.target
         ? this.target -= this.direction
         : (this.value)
            ? (this.wander) 
               ? this.target = this.newTarget() 
               : this.target = -this.value
            : this.target = this.newTarget()  
      return this.direction
   }
      
   this.newTarget = function() {
      return Math.round(Math.random()*(this.radius*2)-this.radius)
   }
   
   this.start = 0
   this.value = 0
   this.radius = options.radius
   this.target = this.newTarget()
   this.direction = Math.sign(this.target)
   this.wander = options.wander
   this.speed = options.speed || 1
}

} // end
</script>




<style>
	.navfen>li>a:hover, .navfen>li>a:focus, .navfen>li>a.active{
    background-color: rgb(255, 158, 180);
    border-left: 5px solid rgb(222, 41, 41);
	}
	.navfen > li > div{
    background-color: #e2a4a4;
	}
	.navfen >li > div> ul> li:hover{
    background-color: #f6abab!important
	}
canvas#valentinesDay {
  display: block;
  background: #ee9ca7;  /* fallback for old browsers */
  background: -webkit-linear-gradient(to bottom, #ffdde1, #ee9ca7);  /* Chrome 10-25, Safari 5.1-6 */
  background: linear-gradient(to bottom, #ffdde1, #ee9ca7); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}
</style>
<script>
if(festival[1] == 2.14 || festival[1] == 7.7){
	console.log(festival[0]);
// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 204, 223, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','rgba(255, 204, 223, 0.8)');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navfen');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 136, 181, 1)');
	
	
(function () {
  'use strict';
  window.addEventListener('load', function () {
$(".dearmsdan-festival").attr("id","valentinesDay");
    var canvas = document.getElementById('valentinesDay');

    if (!canvas || !canvas.getContext) {
      return false;
    }

    /********************
      Random Number
    ********************/

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1) + min);
    }

    /********************
      Var
    ********************/

    // canvas 
    var ctx = canvas.getContext('2d');
    var X = canvas.width = window.innerWidth;
    var Y = canvas.height = window.innerHeight;

    // heart
    var heartNum = 1;
    var hearts = [];
    var miniHeartNum = 100;
    var miniHearts =[];

    var rad = Math.PI / 180;
    var GRAVITY = 0.01;

    /********************
      Animation
    ********************/

    window.requestAnimationFrame =
      window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function (cb) {
        setTimeout(cb, 17);
      };

    /********************
      MiniHeart
    ********************/
    
    function MiniHeart(ctx, x, y, r) {
      this.ctx = ctx;
      this.init(x, y, r);
    }

    MiniHeart.prototype.init = function (x, y, r) {
      this.ctx = ctx;
      this.r = r;
      this.x1 = x;
      this.y1 = y;
      this.a = rand(0, 360);
      this.num = 22.5;
      this.v = {
        x: rand(-6, 6) * Math.random(),
        y: rand(-6, 6) * Math.random()
      };
      this.x2 = this.x1 + this.r * Math.cos(this.a * rad);
      this.y2 = this.y1 + this.r * Math.sin(this.a * rad);
      this.cx1 = this.x1 + this.r * Math.cos((this.a + this.num) * rad);
      this.cy1 = this.y1 + this.r * Math.sin((this.a + this.num) * rad);
      this.cx2 = this.x1 + this.r * Math.cos((this.a - this.num) * rad);
      this.cy2 = this.y1 + this.r * Math.sin((this.a - this.num) * rad);
      this.chord = 2 * this.r * Math.sin(this.num * rad / 2);
    };

    MiniHeart.prototype.draw = function () {
      ctx = this.ctx;
      ctx.save();
      ctx.beginPath();
      ctx.fillStyle = 'rgb(251, 125, 175)';
      ctx.strokeStyle = 'rgb(251, 125, 175)';
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx1, this.cy1, this.chord, (270 + this.a) * rad, (270 + this.a + 225) * rad);
      ctx.lineTo(this.x1, this.y1);
      ctx.closePath();
      ctx.fill();
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx2, this.cy2, this.chord, (90 + this.a) * rad, (90 + this.a + 135) * rad, true);
      ctx.lineTo(this.x1, this.y1);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
      ctx.restore();
    };
    
    MiniHeart.prototype.wrapPosition = function() {
      if (this.y1 > Y || this.x1 < 0 || this.x1 > X) {
        this.init(X / 2, Y / 2, rand(5, 30));
      }
    };

    MiniHeart.prototype.updatePosition = function() {
      this.v.y += GRAVITY;
      this.x1 += this.v.x;
      this.x2 += this.v.x;
      this.cx1 += this.v.x;
      this.cx2 += this.v.x;
      this.y1 += this.v.y;
      this.y2 += this.v.y;
      this.cy1 += this.v.y;
      this.cy2 += this.v.y;
    };

    MiniHeart.prototype.render = function () {
      this.updatePosition();
      this.wrapPosition();
      this.draw();
    };

    /********************
      Heart
    ********************/

    function Heart(ctx, x, y, r) {
      this.ctx = ctx;
      this.init(x, y, r);
    }

    Heart.prototype.init = function (x, y, r) {
      this.ctx = ctx;
      this.r = r;
      this.x1 = x;
      this.y1 = y + this.r / 1.5
      this.a = -90;
      this.num = 22.5;
      this.color = {
        r: 251,
        g: 125,
        b: 175,
        a: 1
      };
      this.x2 = this.x1 + this.r * Math.cos(this.a * rad);
      this.y2 = this.y1 + this.r * Math.sin(this.a * rad);
      this.cx1 = this.x1 + this.r * Math.cos((this.a + this.num) * rad);
      this.cy1 = this.y1 + this.r * Math.sin((this.a + this.num) * rad);
      this.cx2 = this.x1 + this.r * Math.cos((this.a - this.num) * rad);
      this.cy2 = this.y1 + this.r * Math.sin((this.a - this.num) * rad);
      this.chord = 2 * this.r * Math.sin(this.num * rad / 2);
    };

    Heart.prototype.draw = function () {
      ctx = this.ctx;
      ctx.save();
      ctx.fillStyle = this.gradient();
      ctx.shadowColor = '#f9005f';
      ctx.shadowOffsetX = 5;
      ctx.shadowOffsetY = 5;
      ctx.shadowBlur = 5;
      ctx.beginPath();
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx1, this.cy1, this.chord, (270 + this.a) * rad, (270 + this.a + 225) * rad);
      ctx.lineTo(this.x1, this.y1);
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx2, this.cy2, this.chord, (90 + this.a) * rad, (90 + this.a + 135) * rad, true);
      ctx.lineTo(this.x1, this.y1);
      ctx.fill();
      ctx.restore();
    };

    Heart.prototype.gradient = function () {
      var col = this.color.r + "," + this.color.g + "," + this.color.b;
      var g = this.ctx.createRadialGradient(this.x1, this.y1 - this.r / 1.5, 0, this.x1, this.y1 - this.r / 1.5, this.r);
      g.addColorStop(0, "rgba(" + col + ", " + (this.color.a * 0) + ")");
      g.addColorStop(0.5, "rgba(" + col + ", " + (this.color.a * 0.5) + ")");
      g.addColorStop(1, "rgba(" + col + ", " + (this.color.a * 1) + ")");
      return g;
    };

    Heart.prototype.render = function () {
      this.draw();
    };
    
    /********************
      Create
    ********************/
     
    for (var i = 0; i < heartNum; i++) {
      var heart = new Heart(ctx, X / 2, Y / 2, 150);
      hearts.push(heart);
    }

    for (var i = 0; i < miniHeartNum; i++) {
      var miniHeart = new MiniHeart(ctx, X / 2, Y / 2, rand(5, 30));
      miniHearts.push(miniHeart);
    }

    /********************
      Render
    ********************/
    
    function render() {
      ctx.clearRect(0, 0, X, Y);
      for (var i = 0; i < hearts.length; i++) {
        hearts[i].render();
      }
      for (var i = 0; i < miniHearts.length; i++) {
        miniHearts[i].render();
      }
      requestAnimationFrame(render);
    }

    render();

    /********************
      Resize
    ********************/
    
    function onResize() {
      X = canvas.width = window.innerWidth;
      Y = canvas.height = window.innerHeight;
      hearts[0].init(X / 2, Y / 2, 150);
    }

    /********************
      Event
    ********************/

    window.addEventListener('resize', function () {
      onResize();
    });

  });
  // Author
  console.log('File Name / mellomelloMellow.js\nCreated Date / January 15, 2020\nAuthor / Toshiya Marukubo\nTwitter / https://twitter.com/toshiyamarukubo');
})();

}
</script>




<style>
</style>
<script>
if(festival[1] == 4.4){
	console.log(festival[0]);
		$('html').css({"filter":"grayscale(100%)"});
	(function(){
		$(".dearmsdan-festival").attr("id","qingmingFestival");
var c = document.getElementById("qingmingFestival");
var ctx = c.getContext("2d");
var w = c.width = window.innerWidth;
var h = c.height = window.innerHeight;
var clearColor = 'rgba(0, 0, 0, .1)';
var max = 30;
var drops = [];

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function O() {}

O.prototype = {
	init: function() {
		this.x = random(0, w);
		this.y = 0;
		this.color = 'hsl(180, 100%, 50%)';
		this.w = 2;
		this.h = 1;
		this.vy = random(4, 5);
		this.vw = 3;
		this.vh = 1;
		this.size = 2;
		this.hit = random(h * .8, h * .9);
		this.a = 1;
		this.va = .96;
	},
	draw: function() {
		if (this.y > this.hit) {
			ctx.beginPath();
			ctx.moveTo(this.x, this.y - this.h / 2);

			ctx.bezierCurveTo(
				this.x + this.w / 2, this.y - this.h / 2,
				this.x + this.w / 2, this.y + this.h / 2,
				this.x, this.y + this.h / 2);

			ctx.bezierCurveTo(
				this.x - this.w / 2, this.y + this.h / 2,
				this.x - this.w / 2, this.y - this.h / 2,
				this.x, this.y - this.h / 2);

			ctx.strokeStyle = 'hsla(180, 100%, 50%, '+this.a+')';
			ctx.stroke();
			ctx.closePath();
			
		} else {
			ctx.fillStyle = this.color;
			ctx.fillRect(this.x, this.y, this.size, this.size * 5);
		}
		this.update();
	},
	update: function() {
		if(this.y < this.hit){
			this.y += this.vy;
		} else {
			if(this.a > .03){
				this.w += this.vw;
				this.h += this.vh;
				if(this.w > 100){
					this.a *= this.va;
					this.vw *= .98;
					this.vh *= .98;
				}
			} else {
				this.init();
			}
		}
		
	}
}

function resize(){
	w = c.width = window.innerWidth;
	h = c.height = window.innerHeight;
}

function setup(){
	for(var i = 0; i < max; i++){
		(function(j){
			setTimeout(function(){
				var o = new O();
				o.init();
				drops.push(o);
			}, j * 200)
		}(i));
	}
}


function anim() {
	ctx.fillStyle = "#fff";
	ctx.fillRect(0,0,w,h);
	for(var i in drops){
		drops[i].draw();
	}
	requestAnimationFrame(anim);
}


window.addEventListener("resize", resize);

setup();
anim();		
	
	})()
}
</script>




<style>
	.navlan>li>a:hover, .navlan>li>a:focus, .navlan>li>a.active{
    background-color: rgba(9, 200, 255, 0.37);
    border-left: 5px solid rgb(78, 41, 222);
	}
	.navlan > li > div{
    background-color: #a4d9e2;
	}
	.navlan >li > div> ul> li:hover{
    background-color: #abf2f6!important
	}
canvas#childrensDay {
    display: block;
    background: #ABE7FF;
}
</style>
<script>
if(festival[1] == 6.1){
	console.log(festival[0]);
// 超链接
//$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(187, 209, 255, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','rgba(148, 202, 255, 0.8)');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navlan');
	
	
$(".dearmsdan-festival").attr("id","childrensDay");
		/*
* File Name / pinwheel.js
* Created Date / Aug 14, 2020
* Aurhor / Toshiya Marukubo
* Twitter / https://twitter.com/toshiyamarukubo
*/

(function () {
  'use strict';
  window.addEventListener('load', function () {
    var canvas = document.getElementById('childrensDay');

    if (!canvas || !canvas.getContext) {
      return false;
    }

    /********************
      Random Number
    ********************/

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1) + min);
    }
    
    /********************
      Var
    ********************/

    var ctx = canvas.getContext('2d');
    var X = canvas.width = window.innerWidth;
    var Y = canvas.height = window.innerHeight;
    var mouseX = null;
    var mouseY = null;
    var bubbles = [];
    var bubbleNum = 150;
    var shapes = [];
    var rad = Math.PI * 2 / 4;
    var style = {
      black: 'black',
      white: 'white',
      lineWidth: 4,
    };

    if (X < 768) {
      bubbleNum = 100;
    }

    /********************
      Animation
    ********************/

    window.requestAnimationFrame =
      window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function(cb) {
        setTimeout(cb, 17);
      };

    /********************
      Bubble
    ********************/

    function Bubble(ctx, x, y) {
      this.ctx = ctx;
      this.init(x, y);
    }
    
    Bubble.prototype.init = function(x, y) {
      this.x = x;
      this.y = y;
      this.r = rand(20, 50);
      this.ga = Math.random() * Math.random() * Math.random();
      this.v = {
        x: rand(-1, 1) * Math.random() * Math.random(),
        y: Math.random()
      };
      this.random = Math.random();
      this.a = rand(0, 360);
      this.rad = this.a * Math.PI / 180;
      this.as = rand(0, 360) * Math.PI / 180;
    };
    
    Bubble.prototype.draw = function() {
      var ctx  = this.ctx;
      ctx.save();
      ctx.fillStyle = 'white';
      ctx.strokeStyle = 'white';
      ctx.lineCap = 'round';
      ctx.lineWidth = this.r / 4;
      ctx.globalAlpha = this.ga;
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rad);
      ctx.translate(-this.x, -this.y);
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2, false);
      ctx.fill();
      ctx.globalAlpha = this.ga * 1.1;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r * 0.7, this.as, this.as + 1, false);
      ctx.stroke();
      ctx.restore();
    };

    Bubble.prototype.updatePosition = function() {
      if (this.y > Y - Y / 3) {
        this.v.x += 0.1;
        this.v.y -= 0.01;
      }
      this.x += this.v.x;
      this.y += this.v.y;
    };

    Bubble.prototype.updateParams = function(i) {
      this.a += this.random;
      this.rad = this.a * Math.PI / 180;
    };

    Bubble.prototype.wrapPosition = function() {
      if (this.x > X + this.r / 2) {
        this.init(rand(0, X), rand(0 - Y / 5, 0));
      }
    };

    Bubble.prototype.render = function(i) {
      this.updateParams(i);
      this.updatePosition();
      this.wrapPosition();
      this.draw();
    };

    for (var i = 0; i < bubbleNum; i++) {
      var b = new Bubble(ctx, rand(0, X), rand(0, Y / 2));
      bubbles.push(b);
    }

    /********************
      Shape
    ********************/
     
    function Shape(ctx, x, y) {
      this.ctx = ctx;
      this.init(x, y);
    }
    
    Shape.prototype.init = function(x, y) {
      this.x = x;
      this.y = y;
      this.r = rand(20, 30);
      this.a = 0;
      this.rad = this.a * Math.PI / 180;
      this.random = Math.random();
      this.c = rand(0, 360);
      this.a1 = rand(-10, 10);
      this.rad1 = this.a1 * Math.PI / 180;
    };
    
    Shape.prototype.draw = function() {
      var ctx  = this.ctx;
      ctx.save();
      ctx.fillStyle = 'hsl(' + this.c + ', 100%, 80%)';
      ctx.strokeStyle = 'hsl(' + this.c + ', 80%, 60%)';
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rad1);
      ctx.translate(-this.x, -this.y);
      ctx.lineWidth = this.r / 10;
      ctx.beginPath();
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x, Y + 10);
      ctx.stroke();
      ctx.lineWidth = 1;
      ctx.translate(this.x, this.y);
      ctx.rotate(Math.tan(this.rad));
      ctx.translate(-this.x, -this.y);
      ctx.fillRect(this.x - this.r, this.y - this.r, this.r * 2, this.r * 2);
      ctx.fillStyle = 'hsl(' + this.c + ', 80%, 60%)';
      for (var j = 0; j < 4; j++) {
        ctx.translate(this.x, this.y);
        ctx.rotate(90 * Math.PI / 180);
        ctx.translate(-this.x, -this.y);
        ctx.beginPath();
        ctx.moveTo(Math.cos(rad * 0) * this.r + this.x, Math.sin(rad * 0) * this.r + this.y + this.r);
        for (var i = 1; i < 4; i++) {
          if (i !== 2) {
            ctx.lineTo(Math.cos(rad * i) * this.r + this.x, Math.sin(rad * i) * this.r + this.y + this.r);
          }
        }
        ctx.closePath();
        ctx.fill();
      }
      ctx.restore();
    };

    Shape.prototype.updateParams = function() {
      this.a += this.random;
      this.rad = this.a * Math.PI / 180;
    };

    Shape.prototype.render = function(i) {
      this.updateParams();
      this.draw();
    };

    for (var i = 0; i < X;) {
      var dist = rand(1, 50);
      var s = new Shape(ctx, i += dist, rand(Y - Y / 3, Y - Y / 6));
      shapes.push(s);
    }

    /********************
      Render
    ********************/
    
    function render() {
      ctx.clearRect(0, 0, X, Y);
      for (var i = 0; i < shapes.length; i++) {
        shapes[i].render(i);
      }
      for (var i = 0; i < bubbles.length; i++) {
        bubbles[i].render(i);
      }
      requestAnimationFrame(render);
    }

    render();

    /********************
      Event
    ********************/
    
    function onResize() {
      X = canvas.width = window.innerWidth;
      Y = canvas.height = window.innerHeight;
      if (X < 768) {
        bubbleNum = 100;
      } else {
        bubbleNum = 200;
      }
      shapes = [];
      bubbles = [];
      for (var i = 0; i < X;) {
        var dist = rand(1, 50);
        var s = new Shape(ctx, i += dist, rand(Y - Y / 3, Y - Y / 6));
        shapes.push(s);
      }
      for (var i = 0; i < bubbleNum; i++) {
        var b = new Bubble(ctx, rand(0, X), rand(0, Y / 2));
        bubbles.push(b);
      }
    }

    window.addEventListener('resize', function() {
      onResize();
    });

    canvas.addEventListener('click', function(e) {
      mouseX = e.clientX;
      mouseY = e.clientY;
      var num = rand(1, 20);
      for (var i = 0; i < num; i++) {
        var b = new Bubble(ctx, rand(mouseX - 100, mouseX + 100), rand(mouseY - 100, mouseY + 100));
        bubbles.push(b);
      }
    }, false);

  });
})();

		
		
		
		
}
</script>




	

 
		<div class="dearmsdan-pjax">
		<script src="/js/pjax/jquery.pjax.js"></script>
			<script type="text/javascript">
$(document).ready(function () {
	$(document).pjax('a[target!=_blank]', '.main', {fragment: '.main',timeout: 8000});

	$(document).on('pjax:error', function() {
		alert("慢点吧，等等我~");
		  history.back();
	});
	
	$(document).on('pjax:start', function() {
		//加载延迟中...................
		$(".main-content").removeClass("wrapShow");
	});
	$(document).on('pjax:end', function() {
		//加载中...................
		$(".main-content").delay(500).addClass("wrapShow");
	});
	
	$(document).on('ready pjax:end', function(event) {
	linker();
	tocs();
	copycodes();
	postcolor();								 
	styleS();
	dearmsdanlazyload();
	
	}); /*end ready pjax*/

	
function linker(){
/* 外链保护http://link.zhd99.cn */
	 

		$("article a").not(".toc a,article h1 a,article h2 a,article h3 a,article h4 a,article h5 a,article h6 a,article .gallerys,.ui-artZoom-buttons a").attr("href",
																														function(){
			// 不是本站链接检测  article
			var str = this.href;
			var pattern = /http.+zhd99.cn/;
			var falg = pattern.test(str).toString().trim();

			var pattern2 = /http.+dearmsdan/;
			var falg2 = pattern2.test(str).toString().trim();
			if('true' != falg && 'true' != falg2){
				return 'http://link.dearmsdan.com/links.html' + '?target=' + str;
			   }
	});

	
}
		
	
/* .dearmsdan-post悬浮变色 */ 
function postcolor(){
	
$(".dearmsdan-post").mouseover(function(){
		
	// 随机 变化的淡入
var arr = ['0 4px 24px rgb(255, 255, 255)','0 4px 24px rgb(163, 163, 163)','0 4px 24px rgb(206, 154, 154)','0 4px 24px rgb(206, 154, 178)','0 4px 24px rgb(193, 154, 206)','0 4px 24px rgb(154, 158, 206)','0 4px 24px rgb(154, 187, 206)','0 4px 24px rgb(154, 206, 170)','0 4px 24px rgb(206, 200, 154)','0 4px 24px rgb(206, 180, 154)','0 4px 24px rgb(206, 154, 154)']; 
		
var index = Math.floor((Math.random()*arr.length)); 
	// 预期不佳
	$('.dearmsdan-post:hover').css("box-shadow",arr[index]);
		
});
	$(".dearmsdan-post").mouseleave(function(){
	// 移除
	$('.dearmsdan-post').css("box-shadow","none");
		
});
	
}/* end hoverColor  */
		
	
/*页面载入完成后，创建复制按钮*/
function copycodes(){
	
	/* 代码高度 判断 */
	
	 $("figure td pre").scroll(function(){
        $("figure td:nth-child(1) pre").scrollTop($(this).scrollTop()); // 纵向滚动条
        $("figure td:nth-child(2) pre").scrollLeft($(this).scrollLeft()); // 横向滚动条
    });
	
		!function (e, t, a) {
		  /* code */
		  var initCopyCode = function(){
			var copyHtml = '';
			copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
			copyHtml += '  <i class="fa fa-globe"></i><span>copy</span>';
			copyHtml += '</button>';
			  // 设置 放置位置↓
			$("figure td:nth-child(2) pre").before(copyHtml);
			  		//$("figure td:nth-child(2) pre").wrap("<div></div>");
			new ClipboardJS('.btn-copy', {
				target: function(trigger) {
					return trigger.nextElementSibling;
				}
			});
		  }
		  initCopyCode();
			
			
		}(window, document);
} /* end copycodes  */	
	

/* 目录  */
function tocs(){
	/* 目录图标被点击  */
	$('.second').on('click', function () {

		if (!$('body').hasClass('layout-fullwidth')) {
			$('body').addClass('layout-fullwidth');    // 初始出现

		} else {
			$('body').addClass('layout-fullwidth');    // 初始出现

		}

		if ($(window).innerWidth() < 1025) {
			if (!$('body').hasClass('offcanvas-active')) {
				$('body').removeClass('offcanvas-active');
			} else {
				$('body').removeClass('offcanvas-active');
			}
		}
	});
	/* 目录侧边栏 */
	if($('.second').length>0) {
	// 当前刷新目录产生
	$(".second").pageslide();
	} else {
		 window.onload = consoleTest;
function consoleTest(){
		console.log("\n %c hexo-theme-dearmsdan vbj %c https://github.com/ZHD99/hexo-theme-dearmsdan \n", "color: #FFF; background:#030307; padding:5px 0;", "background: #85adfede; padding:5px 0;");
		var str = function () {
/*
     _                                         _               
    | | It gives people a sense of emptiness  | |              
  __| |  ___   __ _  _ __  _ __ ___   ___   __| |  __ _  _ __  
 / _` | / _ \ / _` || '__|| '_ ` _ \ / __| / _` | / _` || '_ \ 
| (_| ||  __/| (_| || |   | | | | | |\__ \| (_| || (_| || | | |
 \__,_| \___| \__,_||_|   |_| |_| |_||___/ \__,_| \__,_||_| |_|
                                                               
欢迎您的到来，本站是一款Hexo宝钻蓝色主题，hexo-theme-dearmsdan                                              


*/
        }
		window.console.log(str.getMultiLine());

			
}/* end window.onload */ 
	}/* end else */ 
	
} /* end toc */

/*  移动端样式  */
function styleS(){
if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {

    // 背景色
	/*$("html").css("background-image","url('')");*/
	
	
    // 底部背景色
	$('.main').css('background','aliceblue');
	$('.main').css('max-height','100%');
	

	/* 首页 排版 */
	$('.dearmsdan-bg').css('box-shadow','none');
	$('.dearmsdan-bg').css('-webkit-box-shadow','none');
//	$('.main-content').css('background-color','#ECECEE');
	$('.dearmsdan-post').css('background-color','rgba(255, 255, 255, 0.52)');
	$('.dearmsdan-post').css('padding','30px');
	$('.dearmsdan-post').css('margin-bottom','20px');
	$('.main-content').addClass('m-content');
	$('.dearmsdan-title').css('opacity','1');
	
	/* 文章 内容页 排版 */
	$('.dearmsdan-bg div').removeClass('div_bg');
	$('.dearmsdan-bg div').addClass('divbg');
	$('.dearmsdan-bg div').css("background-color","rgba(255, 255, 255, 0.8)");
	$('#dearmsdanPost').addClass('dearmsdanPost');
	
	
	
		$('.dearmsdan-post').css('padding','15px');
		//$('.dearmsdan-post').css('background-color','rgba(223, 223, 223, 0.52)');
		$('.main').css('background','rgba(255, 255, 255, 0)');//#d6ecff
		$('.dearmsdan-bg').css('background','#254663');
	
	
	
	
	
	

	}else{
		
	
	
	}
} /* end styleS */	


/* 观察者模式 */
function Observer(){
	$('#dearmsdan-logo').click( 
		function () { 
			alert("你是观察者");
			$('.nav-list').addClass('dearmsdan-none');
			$('.dearmsdan-bg').addClass('dearmsdan-none');
			$('.main-content').addClass('dearmsdan-none');
			$('.container-fluid').addClass('dearmsdan-none');
			$('#dearmsdan-vbg').css("opacity","1");
			$('#dearmsdan-vbg').css("z-index","5201314");
			$('.navbar').css("background-color","transparent");
			$('.navbar').css("box-shadow","none");
			$('#dearmsdan-logo').css("position","relative");
			$('#dearmsdan-logo').css("left","-100px");
			console.log("你是观察者null");
			
		});
}/* end Observer */
	
													
/* 图片懒加载 */
function dearmsdanlazyload(){
		var imgs = document.querySelectorAll('img');
		
		//pimg.css('display','none');
		function lazyload(){
			var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
			var winTop = window.innerHeight;
			for(var i=0;i < imgs.length;i++){
				var flag=imgs[i].hasAttribute('dearmsdan-src');
				if(flag){
					imgs[i].src = imgs[i].getAttribute('dearmsdan-src');
				   }
			}
		}
		
	
		function throttle(method,delay){
			var timer = null;
				var context = this, args=arguments;
			/*return function(){*/
				clearTimeout(timer);
				timer=setTimeout(function(){
					method.apply(context,args);
				},delay);
			/*}*/
		}
	throttle(lazyload,200);
	
	
	/* 滚动指定位置加载该处的图片window.onscroll = throttle(lazyload,200); */
		
	
} /* end Obimg */
 if (window.addEventListener) { window.addEventListener("load",dearmsdanlazyload, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanlazyload); }
    else{ window.onload = dearmsdanlazyload; }



});  /* end */
</script>
		</div>


	
	<link rel="stylesheet" type="text/css" href="/resources/toc/toc.css"> 
	<script src="/resources/toc/jquery.pageslide.js"></script> 
	
  <script type="text/javascript" src="/js/copycode/clipboard.min.js"></script>  


 
	
		

    </body>
</html>