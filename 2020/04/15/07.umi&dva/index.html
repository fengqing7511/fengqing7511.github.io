<!DOCTYPE html>
<html>
    <!-- Head -->
    
  

<head>
	<title>React框架 -  hi 风清</title>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta name="keywords" content="hi 风清,hexo-theme-dearmsdan一款Hexo主题宝钻蓝色,It gives people a sense of emptiness,hexo简约主题,HEXO,dearmsdan.com" />
	<meta name="description" content="It gives people a sense of emptiness">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="shortcut icon" href="/logo.png" type="image/png" />
	
	
		 
		
	
	
	<link rel="stylesheet" type="text/css" href="//at.alicdn.com/t/font_1605171_5fpik914nu9.css">
	
	<link rel="stylesheet" type="text/css" href="/css/bootstrap-3.3.4.css">
	
<link rel="stylesheet" href="/css/style.css">

	
	<link rel="stylesheet" type="text/css" href="/css/avatar_user.css">
	
	<link rel="stylesheet" type="text/css" href="/css/social/social.css">
	
	<link rel="stylesheet" type="text/css" href="/css/navEffect.css">
	
	<link rel="stylesheet" href="/resources/dearmsdan_link/link.css">
	
	<link rel="stylesheet" type="text/css" href="/css/post_content.css">
	
	
	<script src="/js/jquery1.10.2.min.js"></script>
	
<script src="/js/app.js"></script>

	<script src="/js/bootstrap-3.3.4.js"></script>
	
	<script src="/js/s.js"></script>
	
	<script src="/js/jquery.slimscroll.min.js"></script>
	
	<script src="/js/valine.js"></script>
	
	
	<script src="/resources/loadingBar/pace.min.js"></script>
	<script src="/js/headBand.min.js"></script>
	<link rel="stylesheet" href="/resources/loadingBar/flash.css">
	
	
<meta name="generator" content="Hexo 5.2.0"></head>




	
    <body>
		<div id="dearmsdan">
		<!-- Header -->
		
<nav class="navbar navbar-default navbar-fixed-top">
		<div class="brand"> 
			<a>
				<i id="dearmsdan-logo" style="font-size:50px;vertical-align: middle;"
			class="DearMsDanIconFont icon-zh"></i>
				
				
			</a>
			<a href="/">
				<span style="font-size: 20px;">hi 风清</span>
			</a>
		</div>
		<div class="nav-list"> 
			
			<a href="/" title="首页">
				<span>
					首页
				</span>
			</a>
			
			<a href="/about.html" title="关于">
				<span>
					关于
				</span>
			</a>
			
			<a href="/valine.html" title="留言板">
				<span>
					留言板
				</span>
			</a>
			
			<a href="/link.html" title="友情链接">
				<span>
					友情链接
				</span>
			</a>
			
		</div>
	
	
      <div class="mobile">
        <div class="mobile-inner">
          <div class="mobile-inner-header">
            <div class="mobile-inner-header-icon mobile-inner-header-icon-out">
				<span></span><span></span>
			  </div>
          </div>
         	<div class="mobile-inner-nav"> 
				
				<a href="/" title="首页">
					<span>
						首页
					</span>
				</a>
				
				<a href="/about.html" title="关于">
					<span>
						关于
					</span>
				</a>
				
				<a href="/valine.html" title="留言板">
					<span>
						留言板
					</span>
				</a>
				
				<a href="/link.html" title="友情链接">
					<span>
						友情链接
					</span>
				</a>
				
			</div>
        </div>
    </div>
	
<script>
	$(window).load(function () {
	  $(".mobile-inner-header-icon").click(function(){
	  	$(this).toggleClass("mobile-inner-header-icon-click mobile-inner-header-icon-out");
	  	$(".mobile-inner-nav").slideToggle(250);
	  });
	  $(".mobile-inner-nav a").each(function( index ) {
	  	$( this ).css({'animation-delay': (index/10)+'s'});
	  });
	});
</script>
	
	
	
	
	<div class="container-fluid">
		<div class="navbar-btn" style="padding: 0; padding-top: 10px;">
			<button type="button" class="btn-toggle-fullwidth btn-toggle-mx">
				<i class="DearMsDanIconFont">&#xe623;</i>
			</button>
		</div>
	</div>
</nav>



<div id="sidebar-nav" class="sidebar">

<div class="dearmsdan-bg">
	<div class="dearmsdano div_bg"></div>		
</div>


		<div class="sidebar-scroll">
			<div class="sidebar-author">
				<a href="/">
					
						<img src="/Pexels.gif">
						<img src="/logo.png">
					
				</a>
			</div>
			<nav>
				
				<div class="dearmsdan-count">
					<span>文章</span>12
					<span>标签</span>12
					<span>分类</span>0
				</div>		
			<div class="social-btns">
				
				
					<a target="_blank" class="btn GitHub" href="https://github.com/fengqing7511/">
						
            		<i class="DearMsDanIconFont icon-git"></i>
						
        			</a>
				
					<a target="_blank" class="btn email" href="mailto:kangyue7511@163.com">
						
            		<i class="DearMsDanIconFont icon-youxiang"></i>
						
        			</a>
				
					<a target="_blank" class="btn netease" href="https://music.163.com/">
						
            		<i class="DearMsDanIconFont icon-netease"></i>
						
        			</a>
				
					<a target="_blank" class="btn qq" href="https://wpa.qq.com/msgrd?v=3&uin=2646405301&site=qq&menu=yes">
						
            		<i class="DearMsDanIconFont icon-qq"></i>
						
        			</a>
				
					<a target="_blank" class="btn weibo" href="https://weibo.com/">
						
            		<i class="DearMsDanIconFont icon-weibo"></i>
						
        			</a>
				
				</div>
				
		 
				
		
				<ul class="nav">	
					<li>
						<a target="_self" href="/" class="iframe_link active"><span>首页</span>
						</a>
					</li>
					
					<li>
						<a id="axis" target="_self" href="/axis.html" class="nav-togg">
							<span>时间轴</span>
						</a>
					</li>
					
					
					

					  
					  



					  
					  


  <li><a href="javascript:;" class="nav-togg" target="_self"  ><span>标签</span>
	  </a>
	  
    <div>
      <ul>
          <li>
			  <a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/ES6-Express/" style="font-size: 10px;">ES6  Express</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/Node/" style="font-size: 10px;">Node</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/React-AntDesignPro/" style="font-size: 10px;">React  AntDesignPro</a> <a href="/tags/React-Umi-Dva/" style="font-size: 10px;">React  Umi  Dva</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Vue/" style="font-size: 10px;">Vue</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F-uni-app/" style="font-size: 10px;">小程序  uni-app</a>
          </li>
      </ul>
    </div>
	  
    
  </li>

					  
					  

  <li>
	  <a href="javascript:;" class="nav-togg" target="_self" ><span>文章归档</span>
	  </a>
    <div>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li></ul>
    </div>
  </li>


					  
					  


  <li>
	  <a href="javascript:;" class="nav-togg" target="_self" ><span>最新文章</span>
	  </a>
    <div>
      <ul>
        
          <li>
            <a href="/2020/11/02/01.typescript/">TypeScript</a>
          </li>
        
          <li>
            <a href="/2020/10/20/02.es6/">ES6介绍</a>
          </li>
        
          <li>
            <a href="/2020/10/10/03.JavaScript%E5%9F%BA%E7%A1%80/">JavaScript基础</a>
          </li>
        
          <li>
            <a href="/2020/09/25/04.node/">Node入门</a>
          </li>
        
          <li>
            <a href="/2020/09/03/05.express/">Express</a>
          </li>
        
      </ul>
    </div>
  </li>

					  
					
					
					
					
					
				</ul>
			</nav>
		</div>
</div>











				
	
	<style>
/* CSS */
.canvas {
    position:fixed;
    width: 1920px;
    height: 862px;
    left: -360px;
    top: 0;
    z-index: -1;
}
	</style>
<canvas class="canvas dearmsdan-canvas" width="1920" height="862"></canvas>
<canvas class="canvas dearmsdan-festival dearmsdan-canvas" width="1920" height="862"></canvas>












<div class="dearmsdan-bg">
	<div class="div_bg"></div>		
</div>




<script>
    //background-image: url(https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302);
</script>
			<div class="main">
				<div class="main-content">
					



<style>
	#dearmsdanPost:hover{
   		    background-color: rgba(255, 255, 255, 0.5)!important;
	}	
</style>
<div class="dearmsdan">
	<div class="dearmsdan-post" id="dearmsdanPost">
		<div class="dearmsdan-title">
			<h1>React框架</h1>
		</div>
	  <div id="post" class="dearmsdan-post-Statistics">
            <a>2020年04月15日</a>
		  	<a class="post-count">99 字</a>
		
		
		  <a class=" -none-link" href="/tags/React-Umi-Dva/" rel="tag">React  Umi  Dva</a>
		
	  </div>
		
		
<div id="modal" style="display:none">

<aside id="article-toc" class="fixed-toc">
    <div id="article-toc-inner">
        <strong class="sidebar-title">目录</strong>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-Umi%E4%BB%8B%E7%BB%8D"><span class="toc-text">1. Umi介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-Umi%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.1 Umi是什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Umi-%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C"><span class="toc-text">1.2 Umi 如何工作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E6%8A%80%E6%9C%AF%E6%94%B6%E6%95%9B"><span class="toc-text">1.2.1 技术收敛</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E6%8F%92%E4%BB%B6%E5%92%8C%E6%8F%92%E4%BB%B6%E9%9B%86"><span class="toc-text">1.2.2 插件和插件集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E9%85%8D%E7%BD%AE%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%92%8C%E7%BA%A6%E5%AE%9A%E5%BC%8F%E8%B7%AF%E7%94%B1"><span class="toc-text">1.2.3 配置式路由和约定式路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-umi-%E4%B8%B4%E6%97%B6%E6%96%87%E4%BB%B6"><span class="toc-text">1.2.4 .umi 临时文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Umi3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">2. Umi3的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85Umi%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.1  安装Umi创建项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%8D%87%E7%BA%A7%E5%88%B0Umi3"><span class="toc-text">2.2 升级到Umi3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-text">2.3 运行项目</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.4 目录结构介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.5 配置文件介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-editorconfig"><span class="toc-text">2.5.1 .editorconfig</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-env"><span class="toc-text">2.5.2 .env</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-eslintrc"><span class="toc-text">2.5.3 .eslintrc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-3-umirc"><span class="toc-text">2.5.3 .umirc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-4-tsconfig-json"><span class="toc-text">2.5.4 tsconfig.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E8%B7%AF%E7%94%B1%E5%92%8C%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-text">2.6 路由和页面跳转</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-1-%E6%96%B0%E5%BB%BA%E8%B7%AF%E7%94%B1"><span class="toc-text">2.6.1 新建路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-2-%E7%BA%A6%E5%AE%9A%E5%BC%8F%E8%B7%AF%E7%94%B1"><span class="toc-text">2.6.2 约定式路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-3-%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE"><span class="toc-text">2.6.3 路由配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-4-%E8%B7%AF%E7%94%B1%E8%B7%B3%E8%BD%AC%E5%92%8C%E4%BC%A0%E5%8F%82"><span class="toc-text">2.6.4 路由跳转和传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-5-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="toc-text">2.6.5 动态路由参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-7-%E6%A0%B7%E5%BC%8F%E5%92%8C%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-text">2.7 样式和资源文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-1-%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F"><span class="toc-text">2.7.1 全局样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-2-CSS-Modules"><span class="toc-text">2.7.2 CSS Modules</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-3-CSS-%E9%A2%84%E5%A4%84%E7%90%86%E5%99%A8"><span class="toc-text">2.7.3 CSS 预处理器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-4-ts%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%9B%BE%E7%89%87"><span class="toc-text">2.7.4 ts中使用图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-5-CSS-%E9%87%8C%E4%BD%BF%E7%94%A8%E5%9B%BE%E7%89%87"><span class="toc-text">2.7.5 CSS 里使用图片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-6-Base64-%E7%BC%96%E8%AF%91"><span class="toc-text">2.7.6 Base64 编译</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-8-%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">2.8 国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-1-%E5%BC%80%E5%90%AF%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-text">2.8.1 开启国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-2-%E7%BA%A6%E5%AE%9A%E5%BC%8F%E5%A4%9A%E8%AF%AD%E8%A8%80%E6%94%AF%E6%8C%81"><span class="toc-text">2.8.2 约定式多语言支持</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-3-%E4%B8%BB%E8%A6%81API"><span class="toc-text">2.8.3 主要API</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-flux%E5%92%8Credux"><span class="toc-text">3.flux和redux</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-Flux"><span class="toc-text">3.1 Flux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Redux"><span class="toc-text">3.2 Redux</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-dva"><span class="toc-text">3.3 dva</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-1-dva%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.3.1 dva介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-2-dva%E7%9A%84%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-text">3.3.2 dva的数据流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-3-dva%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">3.3.3 dva核心概念</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-model"><span class="toc-text">a) model</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-connect"><span class="toc-text">b) connect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-dispatch"><span class="toc-text">c) dispatch</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-action"><span class="toc-text">d) action</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-dva%E5%AE%9E%E6%88%98"><span class="toc-text">3.4 dva实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-1-%E6%94%B9%E9%80%A0%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">3.4.1 改造项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-2-mock"><span class="toc-text">3.4.2 mock</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-mock%E4%BB%8B%E7%BB%8D"><span class="toc-text">a) mock介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-mock-user-js%E4%BD%BF%E7%94%A8mock%E6%8F%90%E4%BE%9B%E6%8E%A5%E5%8F%A3%E6%95%B0%E6%8D%AE"><span class="toc-text">b) mock&#x2F;user.js使用mock提供接口数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-3-%E8%AF%B7%E6%B1%82%E7%9A%84%E5%B0%81%E8%A3%85"><span class="toc-text">3.4.3 请求的封装</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-fetch%E5%92%8Cumi-request"><span class="toc-text">a) fetch和umi-request</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-app-ts%E8%BF%90%E8%A1%8C%E6%97%B6%E9%85%8D%E7%BD%AE"><span class="toc-text">b) app.ts运行时配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E5%B0%81%E8%A3%85service"><span class="toc-text">c) 封装service</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-4-%E6%96%B0%E5%BB%BA%E9%A1%B5%E9%9D%A2-%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-text">3.4.4 新建页面 发送请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-5-%E7%BC%96%E5%86%99dva-model"><span class="toc-text">3.4.5 编写dva model</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-6-%E7%BC%96%E5%86%99%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.4.6 编写页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-7-%E4%BD%BF%E7%94%A8%E8%AE%A2%E9%98%85%E6%9B%B4%E6%96%B0%E8%AE%BE%E7%BD%AEdva%E6%95%B0%E6%8D%AE"><span class="toc-text">3.4.7 使用订阅更新设置dva数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-8-%E4%BD%BF%E7%94%A8ant-design%E7%BC%96%E5%86%99%E9%A1%B5%E9%9D%A2"><span class="toc-text">3.4.8 使用ant design编写页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-9-%E5%AE%8C%E6%88%90%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD"><span class="toc-text">3.4.9 完成删除功能</span></a></li></ol></li></ol></li></ol>
    </div>
</aside>
</div>


		
			<a href="#modal" class="second">
				<div class="i">
						<i style="font-size:20px" class="DearMsDanIconFont icon-sousuo">
						<span style="font-size:0px"><br/>目<br/>录</span>
						</i>
				</div>
			</a>




<script>
	$(".second .i").mouseover(function(){
  $(".second .i span").css("font-size","18px");
});
	$(".second .i").mouseleave(function(){
  $(".second .i span").css("font-size","0px");
});
</script>











		<div>
			  <article>
				<h1 id="1-Umi介绍"><a href="#1-Umi介绍" class="headerlink" title="1. Umi介绍"></a>1. Umi介绍</h1><h2 id="1-1-Umi是什么"><a href="#1-1-Umi是什么" class="headerlink" title="1.1 Umi是什么"></a>1.1 Umi是什么</h2><p><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/docs">https://umijs.org/zh-CN/docs</a>   </p>
<p>一套可插拔的企业级 react 应用框架，由dva作者 sorrycc 完成，它既是一个框架也是一个工具。</p>
<p>Umi 以路由为基础的，同时支持配置式路由和约定式路由，保证路由的功能完备，并以此进行功能扩展。然后配以生命周期完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求。</p>
<p>他在Umi中引入了 UI 工具 antd，打包工具 roadhog，路由 react-router和状态管理器 dva，做到了可插拔机制。通过约定、自动生成和解析代码等方式来辅助开发，减少开发者要写的代码量。</p>
<a id="more"></a>

<blockquote>
<p><strong>它主要具备以下功能：</strong></p>
</blockquote>
<ul>
<li><strong>可扩展</strong>，Umi 实现了完整的生命周期，并使其插件化，Umi 内部功能也全由插件完成。此外还支持插件和插件集，以满足功能和垂直域的分层需求。</li>
<li> <strong>开箱即用</strong>，Umi 内置了路由、构建、部署、测试等，仅需一个依赖即可上手开发。并且还提供针对 React 的集成插件集，内涵丰富的功能，可满足日常 80% 的开发需求。</li>
<li> <strong>企业级</strong>，经蚂蚁内部 3000+ 项目以及阿里、优酷、网易、飞猪、口碑等公司项目的验证，值得信赖。</li>
<li><strong>大量自研</strong>，包含微前端、组件打包、文档工具、请求库、hooks 库、数据流等，满足日常项目的周边需求。</li>
<li> <strong>完备路由</strong>，同时支持配置式路由和约定式路由，同时保持功能的完备性，比如动态路由、嵌套路由、权限路由等等。</li>
<li> <strong>面向未来</strong>，在满足需求的同时，我们也不会停止对新技术的探索。比如 dll 提速、modern mode、webpack@5、自动化 external、bundler less 等等。</li>
</ul>
<blockquote>
<p><strong>为什么不是？<a target="_blank" rel="noopener" href="https://github.com/facebook/create-react-app">create-react-app</a></strong></p>
</blockquote>
<p>create-react-app 是基于 webpack 的打包层方案，包含 build、dev、lint 等，他在打包层把体验做到了极致，但是不包含路由，不是框架，也不支持配置。所以，如果大家想基于他修改部分配置，或者希望在打包层之外也做技术收敛时，就会遇到困难。</p>
<blockquote>
<p><strong>什么时候不用 umi？</strong></p>
</blockquote>
<p>如果你，</p>
<ul>
<li>需要支持 IE 8 或更低版本的浏览器</li>
<li>需要支持 React 16.8.0 以下的 React</li>
<li>需要跑在 Node 10 以下的环境中</li>
<li>有很强的 webpack 自定义需求和主观意愿</li>
<li>需要选择不同的路由方案</li>
</ul>
<p>Umi 可能不适合你。</p>
<h2 id="1-2-Umi-如何工作"><a href="#1-2-Umi-如何工作" class="headerlink" title="1.2 Umi 如何工作"></a>1.2 Umi 如何工作</h2><p>写写 Umi 背后的思考和重要概念。</p>
<h3 id="1-2-1-技术收敛"><a href="#1-2-1-技术收敛" class="headerlink" title="1.2.1 技术收敛"></a>1.2.1 技术收敛</h3><p><img src="assets%5C1601014995473.png" alt="1601014995473"></p>
<p>这张图是给内部框架 Bigfish 画的，套到 Umi 上同样合适。他把大家常用的技术栈进行整理，收敛到一起，让大家只用 Umi 就可以完成 80% 的日常工作。</p>
<h3 id="1-2-2-插件和插件集"><a href="#1-2-2-插件和插件集" class="headerlink" title="1.2.2 插件和插件集"></a>1.2.2 插件和插件集</h3><p><img src="assets%5C1601015019180.png" alt="1601015019180"></p>
<p>Umi 支持插件和插件集，通过这张图应该很好理解到他们的关系，通过插件集我们把插件收敛依赖然后支持不同的业务类型。</p>
<p>比如@umijs/preset-react就是一个Umi的插件集，里面整合了一些常用功能。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-access">plugin-access</a>，权限管理</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-analytics">plugin-analytics</a>，统计管理</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-antd">plugin-antd</a>，整合 antd UI 组件</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-crossorigin">plugin-crossorigin</a>，通常用于 JS 出错统计</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-dva">plugin-dva</a>，整合 dva</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-helmet">plugin-helmet</a>，整合 <a target="_blank" rel="noopener" href="https://github.com/nfl/react-helmet">react-helmet</a>，管理 HTML 文档标签（如标题、描述等）</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-initial-state">plugin-initial-state</a>，初始化数据管理</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-layout">plugin-layout</a>，配置启用 ant-design-pro 的布局</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-locale">plugin-locale</a>，国际化能力</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-model">plugin-model</a>，基于 hooks 的简易数据流</li>
<li><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-request">plugin-request</a>，基于 umi-request 和 umi-hooks 的请求方案&gt;</li>
</ul>
<h3 id="1-2-3-配置式路由和约定式路由"><a href="#1-2-3-配置式路由和约定式路由" class="headerlink" title="1.2.3 配置式路由和约定式路由"></a>1.2.3 配置式路由和约定式路由</h3><p>Umi 的路由既支持配置式，又支持约定式。配置式是对于现实的低头，也是大部分用户在用的，因为他功能强大；约定式是我们希望走去的方向，因为他简洁优雅。</p>
<h3 id="1-2-4-umi-临时文件"><a href="#1-2-4-umi-临时文件" class="headerlink" title="1.2.4 .umi 临时文件"></a>1.2.4 .umi 临时文件</h3><p>.umi 临时目录是整个 Umi 项目的发动机，你的入口文件、路由等等都在这里，这些是由 umi 内部插件及三方插件生成的。</p>
<p>你通常会在 .umi 下看到以下目录，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+ .umi</span><br><span class="line">  + core     # 内部插件生成</span><br><span class="line">  + pluginA  # 外部插件生成</span><br><span class="line">  + presetB  # 外部插件生成</span><br><span class="line">  + umi.ts   # 入口文件</span><br></pre></td></tr></table></figure>

<p>临时文件是 Umi 框架中非常重要的一部分，框架或插件会根据你的代码生成临时文件，这些原来需要放在项目里的脏乱差的部分都被藏在了这里。</p>
<p>你可以在这里调试代码，但不要在 .git 仓库里提交他，因为他的临时性，每次启动 umi 时都会被删除并重新生成。</p>
<h1 id="2-Umi3的使用"><a href="#2-Umi3的使用" class="headerlink" title="2. Umi3的使用"></a>2. Umi3的使用</h1><h2 id="2-1-安装Umi创建项目"><a href="#2-1-安装Umi创建项目" class="headerlink" title="2.1  安装Umi创建项目"></a>2.1  安装Umi创建项目</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ yarn <span class="built_in">global</span> add umi</span><br><span class="line">$ umi -v</span><br><span class="line"><span class="number">3.2</span><span class="number">.22</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir myapp &amp;&amp; cd myapp</span><br><span class="line">$ yarn create umi</span><br></pre></td></tr></table></figure>

<p><img src="assets%5C1573453772780.png" alt="1573453772780"></p>
<p><img src="assets%5C1573453795170.png" alt="1573453795170"></p>
<p><img src="assets%5C1601014079199.png" alt="1601014079199"></p>
<h2 id="2-2-升级到Umi3"><a href="#2-2-升级到Umi3" class="headerlink" title="2.2 升级到Umi3"></a>2.2 升级到Umi3</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 删除package.json中 dva 和 antd 的依赖 (Umi3中已经包含这两个依赖)</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 删除package.json中 umi-plugin-react 依赖，新增umijs/preset-react 依赖</span><br><span class="line">   <span class="string">&quot;@umijs/preset-react&quot;</span>: <span class="string">&quot;^1&quot;</span>,</span><br><span class="line">       </span><br><span class="line"><span class="number">3.</span> 修改package.json中的node环境要求</span><br><span class="line">   <span class="string">&quot;node&quot;</span>: <span class="string">&quot;&gt;=10.13.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">4.</span> tsconfig.json中的paths新增如下：</span><br><span class="line">   <span class="string">&quot;@@/*&quot;</span>: [<span class="string">&quot;src/.umi/*&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> 修改 .umirc.ts文件</span><br><span class="line">    <span class="comment">//引入umi中的配置文件的类型 ts中要用</span></span><br><span class="line">    <span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line">	<span class="keyword">let</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ref: https://umijs.org/config/</span></span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> defineConfig(&#123;</span><br><span class="line">      <span class="comment">//路由配置</span></span><br><span class="line">      routes: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">          <span class="comment">//注意：这边文件的路径是相对于src/.mui中来确定的</span></span><br><span class="line">          component: <span class="string">&#x27;../layouts/index&#x27;</span>,</span><br><span class="line">          routes: [</span><br><span class="line">            &#123; </span><br><span class="line">              path: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">              component: <span class="string">&#x27;../pages/index&#x27;</span> </span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="comment">//启用antd插件</span></span><br><span class="line">      <span class="comment">//每个插件都会对应一个 id 和一个 key，id 是路径的简写，key 是进一步简化后用于配置的唯一值。</span></span><br><span class="line">      <span class="comment">//比如插件 /node_modules/@umijs/plugin-antd ,id 为 @umijs/plugin-antd，key 为 antd。</span></span><br><span class="line">      antd: &#123; &#125;,</span><br><span class="line">      <span class="comment">//启用dva插件</span></span><br><span class="line">      dva: &#123;</span><br><span class="line">        hmr: <span class="literal">true</span>,  <span class="comment">//启用dva model的热更新</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//启用loacle插件  配置之后才可以使用useIntl </span></span><br><span class="line">      locale: &#123;</span><br><span class="line">        <span class="comment">//默认的语言环境</span></span><br><span class="line">        <span class="keyword">default</span>: <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">        <span class="comment">//antd开启国际化</span></span><br><span class="line">        antd: <span class="literal">true</span>, </span><br><span class="line">        <span class="comment">// default true, when it is true, will use `navigator.language` overwrite default</span></span><br><span class="line">        baseNavigator: <span class="literal">false</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 浏览器兼容</span></span><br><span class="line">      targets: &#123;</span><br><span class="line">        ie: <span class="number">11</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 开启文件hash后缀</span></span><br><span class="line">      hash: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// 启用 Hash 路由</span></span><br><span class="line">      history: &#123;</span><br><span class="line">        type: <span class="string">&#x27;hash&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// Theme for antd: https://ant.design/docs/react/customize-theme-cn</span></span><br><span class="line">      theme: &#123;</span><br><span class="line">        <span class="comment">// ...darkTheme,</span></span><br><span class="line">        <span class="comment">// 主要颜色,</span></span><br><span class="line">        <span class="string">&#x27;font-size-base&#x27;</span>: <span class="string">&#x27;34px&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//配置按需加载   即是否把构建产物进行拆分，在需要的时候下载额外的 JS 再执行。</span></span><br><span class="line">      dynamicImport: &#123;&#125;,</span><br><span class="line">      <span class="comment">// 指定react-router的base，部署到根目录时需要配置</span></span><br><span class="line">      base:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="comment">// 指定webpack的publicPath，指向静态资源文件所在的路径</span></span><br><span class="line">      publicPath:<span class="string">&#x27;./&#x27;</span>,</span><br><span class="line">      <span class="comment">// DefinePlugin 全局常量定义</span></span><br><span class="line">      define: &#123; &#125;,</span><br><span class="line">      <span class="comment">// 代理配置</span></span><br><span class="line">      proxy: &#123;</span><br><span class="line">        <span class="comment">// &#x27;/api&#x27;: &#123;</span></span><br><span class="line">        <span class="comment">//   target: &#x27;http://127.0.0.1:10000/&#x27;,</span></span><br><span class="line">        <span class="comment">//   changeOrigin: true,</span></span><br><span class="line">        <span class="comment">//   pathRewrite: &#123; &#x27;^/api&#x27;: &#x27;&#x27; &#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 别名</span></span><br><span class="line">      alias: &#123;</span><br><span class="line">        <span class="string">&#x27;@&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="number">6.</span> 注释掉 app.ts中的<span class="keyword">const</span> dva 代码</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    export const dva = &#123;</span></span><br><span class="line"><span class="comment">      config: &#123;</span></span><br><span class="line"><span class="comment">        onError(err: ErrorEvent) &#123;</span></span><br><span class="line"><span class="comment">          err.preventDefault();</span></span><br><span class="line"><span class="comment">          console.error(err.message);</span></span><br><span class="line"><span class="comment">        &#125;,</span></span><br><span class="line"><span class="comment">      &#125;,</span></span><br><span class="line"><span class="comment">    &#125;;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> 修改pages/index.tsx</span><br><span class="line">    <span class="comment">//useIntl 国际化的api</span></span><br><span class="line">    <span class="keyword">import</span> &#123; useIntl &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    &lt;a href=<span class="string">&quot;https://umijs.org/guide/getting-started.html&quot;</span>&gt;</span><br><span class="line">        &#123;useIntl().formatMessage(&#123; <span class="attr">id</span>: <span class="string">&#x27;index.start&#x27;</span> &#125;)&#125;</span><br><span class="line">    &lt;/a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-运行项目"><a href="#2-3-运行项目" class="headerlink" title="2.3 运行项目"></a>2.3 运行项目</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//然后安装依赖</span></span><br><span class="line">$ yarn</span><br><span class="line"></span><br><span class="line"><span class="comment">//然后启动应用</span></span><br><span class="line">$ yarn start</span><br></pre></td></tr></table></figure>

<p>几秒钟后，你会看到以下输出，</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DONE  Compiled successfully <span class="keyword">in</span> 212ms</span><br><span class="line"></span><br><span class="line"> App running at:</span><br><span class="line"> - Local:   http:<span class="comment">//localhost:8000/</span></span><br><span class="line"> - Network: http:<span class="comment">//&#123;&#123; YourIP &#125;&#125;:8000/</span></span><br></pre></td></tr></table></figure>

<p>在浏览器里打开 <a target="_blank" rel="noopener" href="http://localhost:8000/">http://localhost:8000</a>，你会看到 umi 的欢迎界面。</p>
<p><img src="assets%5C1573453872519.png" alt="img"></p>
<h2 id="2-4-目录结构介绍"><a href="#2-4-目录结构介绍" class="headerlink" title="2.4 目录结构介绍"></a>2.4 目录结构介绍</h2><p><img src="D:\前端备课\17.REACT\readme\assets\1601020141915.png" alt="1601020141915"></p>
<h2 id="2-5-配置文件介绍"><a href="#2-5-配置文件介绍" class="headerlink" title="2.5 配置文件介绍"></a>2.5 配置文件介绍</h2><h3 id="2-5-1-editorconfig"><a href="#2-5-1-editorconfig" class="headerlink" title="2.5.1 .editorconfig"></a>2.5.1 .editorconfig</h3><p>该文件是配置编辑器的一些设置，这里我修改了一个缩进，indent_size = 4。因为个人比较喜欢4个缩进，看着舒服。</p>
<h3 id="2-5-2-env"><a href="#2-5-2-env" class="headerlink" title="2.5.2 .env"></a>2.5.2 .env</h3><p>该文件是项目环境配置文件，默认的是BROWSER=none，这时候项目启动后，浏览器不会自动打开。</p>
<h3 id="2-5-3-eslintrc"><a href="#2-5-3-eslintrc" class="headerlink" title="2.5.3 .eslintrc"></a>2.5.3 .eslintrc</h3><p>多人开发时候，一套良好的代码规范是非常必要的。这里配置了一份基础eslint文件，供参考。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;env&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;es6&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;node&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;browser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;mocha&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">    <span class="string">&quot;react-app&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;strict&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="comment">//&quot;indent&quot;: [&quot;error&quot;, 4, &#123; &quot;SwitchCase&quot;: 1 &#125;],</span></span><br><span class="line">    <span class="string">&quot;eqeqeq&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-lone-blocks&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-lonely-if&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-multi-spaces&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-multiple-empty-lines&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;max&quot;</span>: <span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;no-param-reassign&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-spaced-func&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-use-before-define&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-unused-vars&quot;</span>: <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-with&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;default-case&quot;</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">    <span class="string">&quot;key-spacing&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;beforeColon&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;afterColon&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;comma-spacing&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;before&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="string">&quot;after&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;generator-star-spacing&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;error&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;before&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">&quot;after&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;semi&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      <span class="string">&quot;always&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;omitLastInOneLineBlock&quot;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;no-restricted-globals&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;array-callback-return&quot;</span>: <span class="string">&quot;off&quot;</span>,</span><br><span class="line">    <span class="string">&quot;no-console&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&quot;allow&quot;</span>: [</span><br><span class="line">          <span class="string">&quot;info&quot;</span>,</span><br><span class="line">          <span class="string">&quot;warn&quot;</span>,</span><br><span class="line">          <span class="string">&quot;error&quot;</span>,</span><br><span class="line">          <span class="string">&quot;time&quot;</span>,</span><br><span class="line">          <span class="string">&quot;timeEnd&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;react/react-in-jsx-scope&quot;</span>: <span class="string">&quot;warn&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-3-umirc"><a href="#2-5-3-umirc" class="headerlink" title="2.5.3 .umirc"></a>2.5.3 .umirc</h3><p>.umirc为Umi项目的配置文件，.umirc.js 和 config/config.js二选一</p>
<h3 id="2-5-4-tsconfig-json"><a href="#2-5-4-tsconfig-json" class="headerlink" title="2.5.4 tsconfig.json"></a>2.5.4 tsconfig.json</h3><p>typescript的配置文件，可以配置ts编译的一些特征</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/78dcb09dac2c">https://www.jianshu.com/p/78dcb09dac2c</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//tsconfig.json 对象类型的索引签名隐式具有&quot;any&quot;类型 报错</span></span><br><span class="line"><span class="string">&quot;suppressImplicitAnyIndexErrors&quot;</span>:<span class="literal">true</span>,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">/* Basic Options */</span></span><br><span class="line">    <span class="string">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span> <span class="comment">/* target用于指定编译之后的版本目标: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, &#x27;ES2018&#x27;, &#x27;ES2019&#x27; or &#x27;ESNEXT&#x27;. */</span>,</span><br><span class="line">    <span class="string">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span> <span class="comment">/* 用来指定要使用的模块标准: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, or &#x27;ESNext&#x27;. */</span>,</span><br><span class="line">    <span class="string">&quot;lib&quot;</span>: [<span class="string">&quot;es6&quot;</span>, <span class="string">&quot;dom&quot;</span>] <span class="comment">/* lib用于指定要包含在编译中的库文件 */</span>,</span><br><span class="line">    <span class="string">&quot;allowJs&quot;</span>: <span class="literal">true</span>,                       <span class="comment">/* allowJs设置的值为true或false，用来指定是否允许编译js文件，默认是false，即不编译js文件 */</span></span><br><span class="line">    <span class="string">&quot;checkJs&quot;</span>: <span class="literal">true</span>,                       <span class="comment">/* checkJs的值为true或false，用来指定是否检查和报告js文件中的错误，默认是false */</span></span><br><span class="line">    <span class="string">&quot;jsx&quot;</span>: <span class="string">&quot;preserve&quot;</span>,                     <span class="comment">/* 指定jsx代码用于的开发环境: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;. */</span></span><br><span class="line">    <span class="string">&quot;declaration&quot;</span>: <span class="literal">true</span>,                   <span class="comment">/* declaration的值为true或false，用来指定是否在编译的时候生成相应的&quot;.d.ts&quot;声明文件。如果设为true，编译每个ts文件之后会生成一个js文件和一个声明文件。但是declaration和allowJs不能同时设为true */</span></span><br><span class="line">    <span class="string">&quot;declarationMap&quot;</span>: <span class="literal">true</span>,                <span class="comment">/* 值为true或false，指定是否为声明文件.d.ts生成map文件 */</span></span><br><span class="line">    <span class="string">&quot;sourceMap&quot;</span>: <span class="literal">true</span>,                     <span class="comment">/* sourceMap的值为true或false，用来指定编译时是否生成.map文件 */</span></span><br><span class="line">    <span class="string">&quot;outFile&quot;</span>: <span class="string">&quot;./&quot;</span>,                       <span class="comment">/* outFile用于指定将输出文件合并为一个文件，它的值为一个文件路径名。比如设置为&quot;./dist/main.js&quot;，则输出的文件为一个main.js文件。但是要注意，只有设置module的值为amd和system模块时才支持这个配置 */</span></span><br><span class="line">    <span class="string">&quot;outDir&quot;</span>: <span class="string">&quot;./&quot;</span>,                        <span class="comment">/* outDir用来指定输出文件夹，值为一个文件夹路径字符串，输出的文件都将放置在这个文件夹 */</span></span><br><span class="line">    <span class="string">&quot;rootDir&quot;</span>: <span class="string">&quot;./&quot;</span>,                       <span class="comment">/* 用来指定编译文件的根目录，编译器会在根目录查找入口文件，如果编译器发现以rootDir的值作为根目录查找入口文件并不会把所有文件加载进去的话会报错，但是不会停止编译 */</span></span><br><span class="line">    <span class="string">&quot;composite&quot;</span>: <span class="literal">true</span>,                     <span class="comment">/* 是否编译构建引用项目  */</span></span><br><span class="line">    <span class="string">&quot;incremental&quot;</span>: <span class="literal">true</span>,                   <span class="comment">/* Enable incremental compilation */</span></span><br><span class="line">    <span class="string">&quot;tsBuildInfoFile&quot;</span>: <span class="string">&quot;./&quot;</span>,               <span class="comment">/* Specify file to store incremental compilation information */</span></span><br><span class="line">    <span class="string">&quot;removeComments&quot;</span>: <span class="literal">true</span>,                <span class="comment">/* removeComments的值为true或false，用于指定是否将编译后的文件中的注释删掉，设为true的话即删掉注释，默认为false */</span></span><br><span class="line">    <span class="string">&quot;noEmit&quot;</span>: <span class="literal">true</span>,                        <span class="comment">/* 不生成编译文件，这个一般比较少用 */</span></span><br><span class="line">    <span class="string">&quot;importHelpers&quot;</span>: <span class="literal">true</span>,                 <span class="comment">/* importHelpers的值为true或false，指定是否引入tslib里的辅助工具函数，默认为false */</span></span><br><span class="line">    <span class="string">&quot;downlevelIteration&quot;</span>: <span class="literal">true</span>,            <span class="comment">/* 当target为&#x27;ES5&#x27; or &#x27;ES3&#x27;时，为&#x27;for-of&#x27;, spread, and destructuring&#x27;中的迭代器提供完全支持 */</span></span><br><span class="line">    <span class="string">&quot;isolatedModules&quot;</span>: <span class="literal">true</span>,               <span class="comment">/* isolatedModules的值为true或false，指定是否将每个文件作为单独的模块，默认为true，它不可以和declaration同时设定 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strict Type-Checking Options */</span></span><br><span class="line">    <span class="string">&quot;strict&quot;</span>: <span class="literal">true</span> <span class="comment">/* strict的值为true或false，用于指定是否启动所有类型检查，如果设为true则会同时开启下面这几个严格类型检查，默认为false */</span>,</span><br><span class="line">    <span class="string">&quot;noImplicitAny&quot;</span>: <span class="literal">true</span>,                 <span class="comment">/* noImplicitAny的值为true或false，如果我们没有为一些值设置明确的类型，编译器会默认认为这个值为any，如果noImplicitAny的值为true的话。则没有明确的类型会报错。默认值为false */</span></span><br><span class="line">    <span class="string">&quot;strictNullChecks&quot;</span>: <span class="literal">true</span>,              <span class="comment">/* strictNullChecks为true时，null和undefined值不能赋给非这两种类型的值，别的类型也不能赋给他们，除了any类型。还有个例外就是undefined可以赋值给void类型 */</span></span><br><span class="line">    <span class="string">&quot;strictFunctionTypes&quot;</span>: <span class="literal">true</span>,           <span class="comment">/* strictFunctionTypes的值为true或false，用于指定是否使用函数参数双向协变检查 */</span></span><br><span class="line">    <span class="string">&quot;strictBindCallApply&quot;</span>: <span class="literal">true</span>,           <span class="comment">/* 设为true后会对bind、call和apply绑定的方法的参数的检测是严格检测的 */</span></span><br><span class="line">    <span class="string">&quot;strictPropertyInitialization&quot;</span>: <span class="literal">true</span>,  <span class="comment">/* 设为true后会检查类的非undefined属性是否已经在构造函数里初始化，如果要开启这项，需要同时开启strictNullChecks，默认为false */</span></span><br><span class="line">   <span class="string">&quot;noImplicitThis&quot;</span>: <span class="literal">true</span>,                <span class="comment">/* 当this表达式的值为any类型的时候，生成一个错误 */</span></span><br><span class="line">    <span class="string">&quot;alwaysStrict&quot;</span>: <span class="literal">true</span>,                  <span class="comment">/* alwaysStrict的值为true或false，指定始终以严格模式检查每个模块，并且在编译之后的js文件中加入&quot;use strict&quot;字符串，用来告诉浏览器该js为严格模式 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Additional Checks */</span></span><br><span class="line">    <span class="string">&quot;noUnusedLocals&quot;</span>: <span class="literal">true</span>,                <span class="comment">/* 用于检查是否有定义了但是没有使用的变量，对于这一点的检测，使用eslint可以在你书写代码的时候做提示，你可以配合使用。它的默认值为false */</span></span><br><span class="line">    <span class="string">&quot;noUnusedParameters&quot;</span>: <span class="literal">true</span>,            <span class="comment">/* 用于检查是否有在函数体中没有使用的参数，这个也可以配合eslint来做检查，默认为false */</span></span><br><span class="line">    <span class="string">&quot;noImplicitReturns&quot;</span>: <span class="literal">true</span>,             <span class="comment">/* 用于检查函数是否有返回值，设为true后，如果函数没有返回值则会提示，默认为false */</span></span><br><span class="line">    <span class="string">&quot;noFallthroughCasesInSwitch&quot;</span>: <span class="literal">true</span>,    <span class="comment">/* 用于检查switch中是否有case没有使用break跳出switch，默认为false */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Module Resolution Options */</span></span><br><span class="line">    <span class="string">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,            <span class="comment">/* 用于选择模块解析策略，有&#x27;node&#x27;和&#x27;classic&#x27;两种类型&#x27; */</span></span><br><span class="line">    <span class="string">&quot;baseUrl&quot;</span>: <span class="string">&quot;./&quot;</span>,                       <span class="comment">/* baseUrl用于设置解析非相对模块名称的基本目录，相对模块不会受baseUrl的影响 */</span></span><br><span class="line">    <span class="string">&quot;paths&quot;</span>: &#123;&#125;,                           <span class="comment">/* 用于设置模块名称到基于baseUrl的路径映射 */</span></span><br><span class="line">    <span class="string">&quot;rootDirs&quot;</span>: [],                        <span class="comment">/* rootDirs可以指定一个路径列表，在构建时编译器会将这个路径列表中的路径的内容都放到一个文件夹中 */</span></span><br><span class="line">    <span class="string">&quot;typeRoots&quot;</span>: [],                       <span class="comment">/* typeRoots用来指定声明文件或文件夹的路径列表，如果指定了此项，则只有在这里列出的声明文件才会被加载 */</span></span><br><span class="line">    <span class="string">&quot;types&quot;</span>: [],                           <span class="comment">/* types用来指定需要包含的模块，只有在这里列出的模块的声明文件才会被加载进来 */</span></span><br><span class="line">    <span class="string">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,  <span class="comment">/* 用来指定允许从没有默认导出的模块中默认导入 */</span></span><br><span class="line">    <span class="string">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span> <span class="comment">/* 通过为导入内容创建命名空间，实现CommonJS和ES模块之间的互操作性 */</span>,</span><br><span class="line">    <span class="string">&quot;preserveSymlinks&quot;</span>: <span class="literal">true</span>,              <span class="comment">/* 不把符号链接解析为其真实路径，具体可以了解下webpack和nodejs的symlink相关知识 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Source Map Options */</span></span><br><span class="line">    <span class="string">&quot;sourceRoot&quot;</span>: <span class="string">&quot;&quot;</span>,                      <span class="comment">/* sourceRoot用于指定调试器应该找到TypeScript文件而不是源文件位置，这个值会被写进.map文件里 */</span></span><br><span class="line">    <span class="string">&quot;mapRoot&quot;</span>: <span class="string">&quot;&quot;</span>,                         <span class="comment">/* mapRoot用于指定调试器找到映射文件而非生成文件的位置，指定map文件的根路径，该选项会影响.map文件中的sources属性 */</span></span><br><span class="line">    <span class="string">&quot;inlineSourceMap&quot;</span>: <span class="literal">true</span>,               <span class="comment">/* 指定是否将map文件的内容和js文件编译在同一个js文件中，如果设为true，则map的内容会以//# sourceMappingURL=然后拼接base64字符串的形式插入在js文件底部 */</span></span><br><span class="line">    <span class="string">&quot;inlineSources&quot;</span>: <span class="literal">true</span>,                 <span class="comment">/* 用于指定是否进一步将.ts文件的内容也包含到输入文件中 */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Experimental Options */</span></span><br><span class="line">    <span class="string">&quot;experimentalDecorators&quot;</span>: <span class="literal">true</span> <span class="comment">/* 用于指定是否启用实验性的装饰器特性 */</span></span><br><span class="line">    <span class="string">&quot;emitDecoratorMetadata&quot;</span>: <span class="literal">true</span>,         <span class="comment">/* 用于指定是否为装饰器提供元数据支持，关于元数据，也是ES6的新标准，可以通过Reflect提供的静态方法获取元数据，如果需要使用Reflect的一些方法，需要引入ES2015.Reflect这个库 */</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="string">&quot;files&quot;</span>: [], <span class="comment">// files可以配置一个数组列表，里面包含指定文件的相对或绝对路径，编译器在编译的时候只会编译包含在files中列出的文件，如果不指定，则取决于有没有设置include选项，如果没有include选项，则默认会编译根目录以及所有子目录中的文件。这里列出的路径必须是指定文件，而不是某个文件夹，而且不能使用* ? **/ 等通配符</span></span><br><span class="line">  <span class="string">&quot;include&quot;</span>: [],  <span class="comment">// include也可以指定要编译的路径列表，但是和files的区别在于，这里的路径可以是文件夹，也可以是文件，可以使用相对和绝对路径，而且可以使用通配符，比如&quot;./src&quot;即表示要编译src文件夹下的所有文件以及子文件夹的文件</span></span><br><span class="line">  <span class="string">&quot;exclude&quot;</span>: [],  <span class="comment">// exclude表示要排除的、不编译的文件，它也可以指定一个列表，规则和include一样，可以是文件或文件夹，可以是相对路径或绝对路径，可以使用通配符</span></span><br><span class="line">  <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;&quot;</span>,   <span class="comment">// extends可以通过指定一个其他的tsconfig.json文件路径，来继承这个配置文件里的配置，继承来的文件的配置会覆盖当前文件定义的配置。TS在3.2版本开始，支持继承一个来自Node.js包的tsconfig.json配置文件</span></span><br><span class="line">  <span class="string">&quot;compileOnSave&quot;</span>: <span class="literal">true</span>,  <span class="comment">// compileOnSave的值是true或false，如果设为true，在我们编辑了项目中的文件保存的时候，编辑器会根据tsconfig.json中的配置重新生成文件，不过这个要编辑器支持</span></span><br><span class="line">  <span class="string">&quot;references&quot;</span>: [],  <span class="comment">// 一个对象数组，指定要引用的项目</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-6-路由和页面跳转"><a href="#2-6-路由和页面跳转" class="headerlink" title="2.6 路由和页面跳转"></a>2.6 路由和页面跳转</h2><h3 id="2-6-1-新建路由"><a href="#2-6-1-新建路由" class="headerlink" title="2.6.1 新建路由"></a>2.6.1 新建路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.敲入命令如下</span></span><br><span class="line">$   umi g page product/index --typescript --less</span><br><span class="line"></span><br><span class="line">   create src/pages/product/index.js</span><br><span class="line">   create src/pages/product/index.css</span><br><span class="line">✔  success</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.修改 .umirc.ts文件中路由配置</span></span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="comment">//注意：这边文件的路径是相对于src/.mui中来确定的</span></span><br><span class="line">      component: <span class="string">&#x27;../layouts/index&#x27;</span>,</span><br><span class="line">      routes: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">&#x27;/product/index&#x27;</span>,</span><br><span class="line">          component: <span class="string">&#x27;../pages/product/index&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; </span><br><span class="line">          path: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">          component: <span class="string">&#x27;../pages/index&#x27;</span> </span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.在src目录下创建typings.d.ts 文件 </span></span><br><span class="line"><span class="comment">//模块声明文件：不写在引入less的时候ts会警告</span></span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;slash2&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.css&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.less&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.scss&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.sass&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.svg&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.png&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.jpg&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.jpeg&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.gif&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.bmp&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;*.tiff&#x27;</span>;</span><br><span class="line">declare <span class="built_in">module</span> <span class="string">&#x27;omit.js&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-2-约定式路由"><a href="#2-6-2-约定式路由" class="headerlink" title="2.6.2 约定式路由"></a>2.6.2 约定式路由</h3><p>除配置式路由外，Umi 也支持约定式路由。约定式路由也叫文件路由，就是不需要手写配置，文件系统即路由，通过目录和文件及其命名分析出路由配置。</p>
<p><strong>如果没有 routes 配置，Umi 会进入约定式路由模式</strong>，然后分析 <code>src/pages</code> 目录拿到路由配置。</p>
<p>比如以下文件结构：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">  └── pages</span><br><span class="line">    ├── index.tsx</span><br><span class="line">    └── users.tsx</span><br></pre></td></tr></table></figure>

<p>会得到以下路由配置，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123; exact: true, path: &#39;&#x2F;&#39;, component: &#39;@&#x2F;pages&#x2F;index&#39; &#125;,</span><br><span class="line">  &#123; exact: true, path: &#39;&#x2F;users&#39;, component: &#39;@&#x2F;pages&#x2F;users&#39; &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>需要注意的是，满足以下任意规则的文件不会被注册为路由，</p>
<ul>
<li>以 <code>.</code> 或 <code>_</code> 开头的文件或目录</li>
<li>以 <code>d.ts</code> 结尾的类型定义文件</li>
<li>以 <code>test.ts</code>、<code>spec.ts</code>、<code>e2e.ts</code> 结尾的测试文件（适用于 <code>.js</code>、<code>.jsx</code> 和 <code>.tsx</code> 文件）</li>
<li><code>components</code> 和 <code>component</code> 目录</li>
<li><code>utils</code> 和 <code>util</code> 目录</li>
<li>不是 <code>.js</code>、<code>.jsx</code>、<code>.ts</code> 或 <code>.tsx</code> 文件</li>
<li>文件内容不包含 JSX 元素</li>
</ul>
<p><strong>所以当我们把.umirc.js中的routes配置注释掉的时候，访问路径<a target="_blank" rel="noopener" href="http://localhost:8000/#/product">http://localhost:8000/#/product</a>能够正常展示页面。</strong></p>
<h3 id="2-6-3-路由配置"><a href="#2-6-3-路由配置" class="headerlink" title="2.6.3 路由配置"></a>2.6.3 路由配置</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">component: <span class="string">&#x27;@/layouts/index&#x27;</span>         <span class="comment">//配置页面模板，不同的路由可以配置不同的layout</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/one&#x27;</span>, <span class="attr">exact</span>: <span class="literal">true</span> &#125;        <span class="comment">//严格匹配，location 是否和 path 完全对应上</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置子路由</span></span><br><span class="line">routes: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/list&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;list&#x27;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/admin&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;admin&#x27;</span> &#125;,</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">//重定向</span></span><br><span class="line">&#123; <span class="attr">exact</span>: <span class="literal">true</span>, <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/list&#x27;</span> &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-6-4-路由跳转和传参"><a href="#2-6-4-路由跳转和传参" class="headerlink" title="2.6.4 路由跳转和传参"></a>2.6.4 路由跳转和传参</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Link &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;Link to=<span class="string">&quot;/users&quot;</span>&gt;Users Page&lt;/Link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; history &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">// 跳转到指定路由</span></span><br><span class="line">history.push(<span class="string">&#x27;/list&#x27;</span>);</span><br><span class="line"><span class="comment">// 带参数跳转到指定路由</span></span><br><span class="line">history.push(<span class="string">&#x27;/list?a=b&#x27;</span>);</span><br><span class="line">history.push(&#123;</span><br><span class="line">  pathname: <span class="string">&#x27;/list&#x27;</span>,</span><br><span class="line">  query: &#123;</span><br><span class="line">    a: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 跳转到上一个路由</span></span><br><span class="line">history.goBack();</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由组件可通过 props 获取到以下属性，</span></span><br><span class="line"></span><br><span class="line">match，当前路由和 url match 后的对象，包含 params、path、url 和 isExact 属性</span><br><span class="line">location，表示应用当前出于哪个位置，包含 pathname、search、query 等属性</span><br><span class="line">history，同 api history 接口</span><br><span class="line">route，当前路由配置，包含 path、exact、component、routes 等</span><br><span class="line">routes，全部路由信息</span><br></pre></td></tr></table></figure>

<h3 id="2-6-5-动态路由参数"><a href="#2-6-5-动态路由参数" class="headerlink" title="2.6.5 动态路由参数"></a>2.6.5 动态路由参数</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.新建productDetail/index/[id].tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./productDetail.less&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//要从props中获取location history match等参数，需要引入RouteComponentProps类型</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouteComponentProps &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> RouterInfo &#123;</span><br><span class="line">  id: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (props: RouteComponentProps&lt;RouterInfo&gt;) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1 className=&#123;styles.title&#125;&gt;Page productDetail/index ---&#123;props.match.params.id&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.修改.umirc.ts</span></span><br><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      <span class="comment">//注意：这边文件的路径是相对于src/.mui中来确定的</span></span><br><span class="line">      component: <span class="string">&#x27;../layouts/index&#x27;</span>,</span><br><span class="line">      routes: [</span><br><span class="line">        &#123;</span><br><span class="line">          path: <span class="string">&#x27;/product/index&#x27;</span>,</span><br><span class="line">          component: <span class="string">&#x27;../pages/product/index&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; </span><br><span class="line">          path: <span class="string">&#x27;/productDetail/:id&#x27;</span>, </span><br><span class="line">          component: <span class="string">&#x27;../pages/productDetail/index/[id]&#x27;</span> </span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; </span><br><span class="line">          path: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">          component: <span class="string">&#x27;../pages/index&#x27;</span> </span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure>

<h2 id="2-7-样式和资源文件"><a href="#2-7-样式和资源文件" class="headerlink" title="2.7 样式和资源文件"></a>2.7 样式和资源文件</h2><h3 id="2-7-1-全局样式"><a href="#2-7-1-全局样式" class="headerlink" title="2.7.1 全局样式"></a>2.7.1 全局样式</h3><p>Umi 中约定 <code>src/global.css</code> 为全局样式，如果存在此文件，会被自动引入到入口文件最前面。</p>
<p>比如用于覆盖样式，</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ant-select-selection</span> &#123;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">51px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-7-2-CSS-Modules"><a href="#2-7-2-CSS-Modules" class="headerlink" title="2.7.2 CSS Modules"></a>2.7.2 CSS Modules</h3><p>Umi 会自动识别 CSS Modules 的使用，你把他当做 CSS Modules 用时才是 CSS Modules。</p>
<p>比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CSS Modules</span></span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./foo.css&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非 CSS Modules</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./foo.css&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="2-7-3-CSS-预处理器"><a href="#2-7-3-CSS-预处理器" class="headerlink" title="2.7.3 CSS 预处理器"></a>2.7.3 CSS 预处理器</h3><p>Umi 内置支持 less，不支持 sass 和 stylus，但如果有需求，可以通过 chainWebpack 配置或者 Umi 插件的形式支持。</p>
<h3 id="2-7-4-ts中使用图片"><a href="#2-7-4-ts中使用图片" class="headerlink" title="2.7.4 ts中使用图片"></a>2.7.4 ts中使用图片</h3><p>通过 require 引用相对路径的图片。</p>
<p>比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;require(</span>&#x27;<span class="attr">.</span>/<span class="attr">foo.png</span>&#x27;)&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>支持别名，比如通过 <code>@</code> 指向 src 目录：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;require(</span>&#x27;@/<span class="attr">foo.png</span>&#x27;)&#125; /&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="2-7-5-CSS-里使用图片"><a href="#2-7-5-CSS-里使用图片" class="headerlink" title="2.7.5 CSS 里使用图片"></a>2.7.5 CSS 里使用图片</h3><p>通过相对路径引用。</p>
<p>比如，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.logo &#123;</span><br><span class="line">  background: url(./foo.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>CSS 里也支持别名，但需要在前面加 <code>~</code> 前缀，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.logo &#123;</span><br><span class="line">  background: url(~@/foo.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<ol>
<li>这是 webpack 的规则，如果切到其他打包工具，可能会有变化</li>
<li>less 中同样适用</li>
</ol>
<h3 id="2-7-6-Base64-编译"><a href="#2-7-6-Base64-编译" class="headerlink" title="2.7.6 Base64 编译"></a>2.7.6 Base64 编译</h3><p>通过相对路径引入图片的时候，如果图片小于 10K，会被编译为 Base64，否则会被构建为独立的图片文件。</p>
<p>10K 这个阈值可以通过 <a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/config#inlinelimit">inlineLimit 配置</a>修改。</p>
<h2 id="2-8-国际化"><a href="#2-8-国际化" class="headerlink" title="2.8 国际化"></a>2.8 国际化</h2><p>@umijs/plugin-locale是umi中的一个国际化插件，用于解决 i18n 问题。</p>
<h3 id="2-8-1-开启国际化"><a href="#2-8-1-开启国际化" class="headerlink" title="2.8.1 开启国际化"></a>2.8.1 开启国际化</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在.umirc.ts中配置locale之后即开启该插件</span></span><br><span class="line">  locale: &#123;</span><br><span class="line">    <span class="comment">//默认的语言环境</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="string">&#x27;zh-CN&#x27;</span>,</span><br><span class="line">    <span class="comment">//antd开启国际化</span></span><br><span class="line">    antd: <span class="literal">true</span>, </span><br><span class="line">    <span class="comment">// default true, when it is true, will use `navigator.language` overwrite default</span></span><br><span class="line">    baseNavigator: <span class="literal">false</span>,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-8-2-约定式多语言支持"><a href="#2-8-2-约定式多语言支持" class="headerlink" title="2.8.2 约定式多语言支持"></a>2.8.2 约定式多语言支持</h3><p>比如以下目录，项目就拥有了 <code>zh-CN</code> 与 <code>en-US</code> 国际化语言切换(文件名必须要符合规范)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+ src</span><br><span class="line">  + locales</span><br><span class="line">    - zh-CN.ts</span><br><span class="line">    - en-US.ts</span><br><span class="line">  + pages</span><br></pre></td></tr></table></figure>

<h3 id="2-8-3-主要API"><a href="#2-8-3-主要API" class="headerlink" title="2.8.3 主要API"></a>2.8.3 主要API</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># getAllLocales 获取当前获得所有国际化文件的列表，默认会在 locales 文件夹下寻找类似 en-US.(js|json|ts) 文件。</span><br><span class="line"><span class="keyword">import</span> &#123; getAllLocales &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(getAllLocales()); <span class="comment">// [en-US,zh-CN,...]</span></span><br><span class="line"></span><br><span class="line"># getLocale 将获得当前选择的语言。</span><br><span class="line"><span class="keyword">import</span> &#123; getLocale &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(getLocale()); <span class="comment">// en-US | zh-CN</span></span><br><span class="line"></span><br><span class="line"># useIntl 是最常用的 api,它可以获得 formatMessage 等 api 来进行具体的值绑定。</span><br><span class="line"><span class="keyword">import</span> &#123; useIntl &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line">&lt;a&gt;</span><br><span class="line">	&#123;useIntl().formatMessage(&#123; <span class="attr">id</span>: <span class="string">&#x27;index.start&#x27;</span> &#125;)&#125;</span><br><span class="line">&lt;/a&gt;</span><br><span class="line"></span><br><span class="line"># setLocale 设置切换语言，默认会刷新页面，可以通过设置第二个参数为 false ，来实现无刷新动态切换。</span><br><span class="line"><span class="keyword">import</span> &#123; setLocale &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">// 刷新页面</span></span><br><span class="line">setLocale(<span class="string">&#x27;zh-TW&#x27;</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 不刷新页面</span></span><br><span class="line">setLocale(<span class="string">&#x27;zh-TW&#x27;</span>, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h1 id="3-flux和redux"><a href="#3-flux和redux" class="headerlink" title="3.flux和redux"></a>3.flux和redux</h1><h2 id="3-1-Flux"><a href="#3-1-Flux" class="headerlink" title="3.1 Flux"></a>3.1 Flux</h2><p>Flux 是一种架构思想，专门解决软件的结构问题。它跟<a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2007/11/mvc.html">MVC 架构</a>是同一类东西，但是更加<a target="_blank" rel="noopener" href="http://www.infoq.com/news/2014/05/facebook-mvc-flux">简单和清晰</a>。</p>
<p>首先，Flux将一个应用分成四个部分。</p>
<blockquote>
<ul>
<li><strong>View</strong>： 视图层</li>
<li><strong>Action</strong>（动作）：表示数据从应用程序发送到store的有效信息负载。它是 store 数据的<strong>唯一</strong>来源。一般来说你会通过 Dispatcher派发器将 action 传到 store。</li>
<li><strong>Dispatcher</strong>（派发器）：用来接收Actions、执行回调函数</li>
<li><strong>Store</strong>（数据层）：用来存放应用的状态，一旦发生变动，就提醒Views要更新页面</li>
</ul>
</blockquote>
<p><strong>Flux 的最大特点，就是数据的”单向流动”。</strong></p>
<blockquote>
<ol>
<li>用户访问 View</li>
<li>用户在View中Dispatcher一个Action，要求 Store 进行相应的更新</li>
<li>Store 更新后，发出一个”change”事件</li>
<li>View 收到”change”事件后，更新页面</li>
</ol>
</blockquote>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/17.REACT/readme/assets/1553222968163.png" alt="1553222968163"></p>
<p><img src="D:/%E5%89%8D%E7%AB%AF%E5%A4%87%E8%AF%BE/17.REACT/readme/assets/1553223019430.png" alt="1553223019430"></p>
<h2 id="3-2-Redux"><a href="#3-2-Redux" class="headerlink" title="3.2 Redux"></a>3.2 Redux</h2><p><a target="_blank" rel="noopener" href="http://cn.redux.js.org/">http://cn.redux.js.org/</a></p>
<p>我们把Flux看做一个框架的理念的话，Redux是Flux的一种实现。Redux是SPA单页面应用程序中多个组件之间共享数据的一种方式。</p>
<p>Flux的基本原则是“单向数据流”，Redux在此基础上强调三个基本原则：</p>
<blockquote>
<p>1.唯一数据源 ：唯一数据源指的是应用的状态数据应该只存储在唯一的一个Store上。<br>2.保持状态只读 ： 保持状态只读，就是说不能去直接修改状态，要修改Store的状态，必须要通过派发一个action对象完成。<br>3.数据改变只能通过纯函数完成 ：这里所说的纯函数就是把Reducer，Reducer描述了state状态如何修改。Redux这个名字的前三个字母Red代表的就是Reducer，其实Redux名字的含义就是Reducer+Flux。</p>
</blockquote>
<p><img src="D:\前端备课\17.REACT\readme\assets/u=241910270,3281944895&fm=26&gp=0.png" alt="u=241910270,3281944895&amp;fm=26&amp;gp=0"></p>
<h2 id="3-3-dva"><a href="#3-3-dva" class="headerlink" title="3.3 dva"></a>3.3 dva</h2><h3 id="3-3-1-dva介绍"><a href="#3-3-1-dva介绍" class="headerlink" title="3.3.1 dva介绍"></a>3.3.1 dva介绍</h3><p>dva由阿里架构师 sorrycc 带领 team 完成的一套前端框架，dva 是一个基于 <a target="_blank" rel="noopener" href="https://github.com/reduxjs/redux">redux</a> 和 <a target="_blank" rel="noopener" href="https://github.com/redux-saga/redux-saga">redux-saga</a> (异步处理)的数据流方案，然后为了简化开发体验，dva 还额外内置了 <a target="_blank" rel="noopener" href="https://github.com/ReactTraining/react-router">react-router</a> 和 <a target="_blank" rel="noopener" href="https://github.com/github/fetch">fetch</a>，所以也可以理解为一个轻量级的应用框架。</p>
<blockquote>
<p><strong>特性</strong></p>
</blockquote>
<ul>
<li><strong>易学易用</strong>，仅有 6 个 api，对 redux 用户尤其友好，<a target="_blank" rel="noopener" href="https://umijs.org/guide/with-dva.html">配合 umi 使用</a>后更是降低为 0 API</li>
<li><strong>elm 概念</strong>，通过 reducers, effects 和 subscriptions 组织 model。elm是专注web前端的纯函数式语言。</li>
<li><strong>插件机制</strong>，比如 <a target="_blank" rel="noopener" href="https://github.com/dvajs/dva/tree/master/packages/dva-loading">dva-loading</a> 可以自动处理 loading 状态，不用一遍遍地写 showLoading 和 hideLoading</li>
<li><strong>支持 HMR</strong>，基于 <a target="_blank" rel="noopener" href="https://github.com/dvajs/babel-plugin-dva-hmr">babel-plugin-dva-hmr</a> 实现 components、routes 和 models 的 HMR</li>
</ul>
<h3 id="3-3-2-dva的数据流"><a href="#3-3-2-dva的数据流" class="headerlink" title="3.3.2 dva的数据流"></a>3.3.2 dva的数据流</h3><p><img src="D:\前端备课\17.REACT\readme\assets\1601034916207.png" alt="1601034916207"></p>
<p>用户在 <strong>视图层</strong> 会触发(dispatch)一些动作(action)，这些动作会传递到我们的Model.js 这个文件当中，根据action的名字，找到对用的方法(effect 或者 reducer) ，然后更新state，视图重新渲染。</p>
<h3 id="3-3-3-dva核心概念"><a href="#3-3-3-dva核心概念" class="headerlink" title="3.3.3 dva核心概念"></a>3.3.3 dva核心概念</h3><h4 id="a-model"><a href="#a-model" class="headerlink" title="a) model"></a>a) model</h4><p>其中，model 是 DVA 中最重要的概念，基本的属性如下：</p>
<ul>
<li>namespace：model 的命名空间，只能用字符串。一个大型应用可能包含多个 model，通过namespace区分。</li>
<li>state：当前 model 状态的初始值，表示当前状态。</li>
<li>reducers：用于处理同步操作，可以修改 state，由 action 触发。</li>
<li>effects：用于处理异步操作（例如：与服务端交互）和业务逻辑，也是由 action 触发。但是，它不可以修改 state，要通过触发 action 调用 reducer 实现对 state 的间接操作。</li>
</ul>
<h4 id="b-connect"><a href="#b-connect" class="headerlink" title="b) connect"></a>b) connect</h4><p>连接dva model和react组件，目的是为了让组件获取model中的数据和驱动model改变的方法。</p>
<h4 id="c-dispatch"><a href="#c-dispatch" class="headerlink" title="c) dispatch"></a>c) dispatch</h4><p>dispatch 函数就是和 dva model 打交道的唯一途径， dispatch 函数接受一个 action对象 作为入参。action对象需要有type字段</p>
<h4 id="d-action"><a href="#d-action" class="headerlink" title="d) action"></a>d) action</h4><p>action：一个对象，是 reducers 及 effects 的触发器，通过dispatch来触发，action对象需要有type字段</p>
<h2 id="3-4-dva实战"><a href="#3-4-dva实战" class="headerlink" title="3.4 dva实战"></a>3.4 dva实战</h2><h3 id="3-4-1-改造项目结构"><a href="#3-4-1-改造项目结构" class="headerlink" title="3.4.1 改造项目结构"></a>3.4.1 改造项目结构</h3><p><img src="D:\前端备课\17.REACT\readme\assets\1601195437274.png" alt="1601195437274"></p>
<h3 id="3-4-2-mock"><a href="#3-4-2-mock" class="headerlink" title="3.4.2 mock"></a>3.4.2 mock</h3><h4 id="a-mock介绍"><a href="#a-mock介绍" class="headerlink" title="a) mock介绍"></a>a) mock介绍</h4><p>Mock 是高效、易用、功能强大的 api 管理平台,旨在为开发、产品、测试人员提供更优雅的接口管理服务。可以帮助开发者轻松创建、发布、维护 API。主要用于项目的开发测试阶段。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki">https://github.com/nuysoft/Mock/wiki</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#1. 安装mockjs</span><br><span class="line">yarn add mockjs --dev</span><br><span class="line"></span><br><span class="line">#2. 修改.umirc.ts  开启mock</span><br><span class="line">  mock: &#123;&#125;</span><br><span class="line"></span><br><span class="line">#3. mock基本使用  </span><br><span class="line"><span class="comment">// 在项目mock文件夹下新建user.ts  代码如下</span></span><br><span class="line"><span class="keyword">import</span> &#123; Request, Response &#125; <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//测试mock   mock语法介绍 todos.....</span></span><br><span class="line">  <span class="string">&#x27;/api/test&#x27;</span>: &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;kenny&#x27;</span>, <span class="attr">sex</span>: <span class="number">6</span> &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="string">&#x27;GET /api/hi&#x27;</span>: <span class="function">(<span class="params">req: Request, res: Response</span>) =&gt;</span> &#123;</span><br><span class="line">    res.json(&#123;</span><br><span class="line">      id: <span class="number">1</span>,</span><br><span class="line">      username: <span class="string">&#x27;jaja&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">    </span><br><span class="line">  <span class="string">&#x27;GET /api/mock&#x27;</span>: Mock.mock(&#123;</span><br><span class="line">    success: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">//随机生成一段中文</span></span><br><span class="line">    message: <span class="string">&#x27;@cparagraph&#x27;</span>,</span><br><span class="line">    <span class="comment">// 属性 list 的值是一个数组，其中含有 1 到 5 个元素</span></span><br><span class="line">    <span class="string">&#x27;list|1-5&#x27;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// 属性 sid 是一个自增数，起始值为 1，每次增 1</span></span><br><span class="line">        <span class="string">&#x27;sid|+1&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="comment">// 属性 userId 是一个5位的随机码</span></span><br><span class="line">        <span class="string">&#x27;userId|5&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="b-mock-user-js使用mock提供接口数据"><a href="#b-mock-user-js使用mock提供接口数据" class="headerlink" title="b) mock/user.js使用mock提供接口数据"></a>b) mock/user.js使用mock提供接口数据</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Request, Response &#125; <span class="keyword">from</span> <span class="string">&#x27;express&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">&#x27;mockjs&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface UserType &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  name: string;</span><br><span class="line">  email: string;</span><br><span class="line">  website: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> users: UserType[] = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;zhangsan@qq.com&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;xx.com&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;lisi&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;lisi@qq.com&#x27;</span>, <span class="attr">website</span>: <span class="string">&#x27;ll.com&#x27;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//查询所有用户</span></span><br><span class="line">  <span class="string">&#x27;GET /api/users&#x27;</span>: <span class="function">(<span class="params">req: Request, res: Response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 获取参数信息</span></span><br><span class="line">    <span class="keyword">var</span> page = req.query.page;</span><br><span class="line">    <span class="keyword">var</span> data = &#123; <span class="attr">list</span>: users, <span class="attr">total</span>: <span class="number">105</span>, <span class="attr">page</span>: page &#125;;</span><br><span class="line">    res.json(data);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// GET POST 可省略</span></span><br><span class="line">  <span class="string">&#x27;/api/users/:id&#x27;</span>: <span class="function">(<span class="params">req: Request, res: Response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">parseInt</span>(req.params.id);</span><br><span class="line">    <span class="keyword">const</span> u = users.find(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.id === id) &#123;</span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    res.json(u);</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//根据id删除用户</span></span><br><span class="line">  <span class="string">&#x27;/api/users/delete/:id&#x27;</span>: <span class="function">(<span class="params">req: Request, res: Response</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">parseInt</span>(req.params.id);</span><br><span class="line">    <span class="keyword">const</span> index = users.findIndex(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item.id == id) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    users.splice(index, <span class="number">1</span>);</span><br><span class="line">    res.json(&#123;</span><br><span class="line">      status: <span class="number">200</span>,</span><br><span class="line">      message: <span class="string">&#x27;删除成功&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 支持自定义函数，API 参考 express@4</span></span><br><span class="line">  <span class="string">&#x27;POST /api/users/create&#x27;</span>: <span class="function">(<span class="params">req: Request, res: Response</span>) =&gt;</span> &#123;</span><br><span class="line">    res.end(<span class="string">&#x27;OK&#x27;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-3-请求的封装"><a href="#3-4-3-请求的封装" class="headerlink" title="3.4.3 请求的封装"></a>3.4.3 请求的封装</h3><h4 id="a-fetch和umi-request"><a href="#a-fetch和umi-request" class="headerlink" title="a) fetch和umi-request"></a>a) fetch和umi-request</h4><p><strong>fetch</strong>是es6中推出的一种可替代ajax获取/提交数据的技术，有些高级浏览器已经可以使用window.fecth使用了。相比于使用jQuery.ajax更轻量，而且它支持Promise，更加符合现在的编程习惯。但是，一定记住fetch不是ajax的进一步封装，而是原生js，没有使用XMLHttpRequest对象。</p>
<p><strong><a href="https://link.zhihu.com/?target=https://github.com/umijs/umi-request">umi-request</a></strong> 是基于 fetch 封装的开源 http 请求库，旨在为开发者提供一个统一的 API 调用方式，同时简化使用方式，提供了请求层常用的功能：</p>
<ul>
<li>URL 参数自动序列化</li>
<li>POST 数据提交方式简化</li>
<li>Response 返回处理简化</li>
<li>请求超时处理</li>
<li>请求缓存支持</li>
<li>GBK 编码处理</li>
<li>统一的错误处理方式</li>
<li>请求取消支持</li>
<li>Node 环境 http 请求</li>
<li>拦截器机制</li>
<li>洋葱中间件机制</li>
</ul>
<p><strong>umi-request和fetch和axios区别</strong></p>
<p><img src="D:\前端备课\17.REACT\readme\assets/Snipaste_2020-09-27_10-41-42.png" alt="Snipaste_2020-09-27_10-41-42"></p>
<h4 id="b-app-ts运行时配置"><a href="#b-app-ts运行时配置" class="headerlink" title="b) app.ts运行时配置"></a>b) app.ts运行时配置</h4><p>运行时配置文件，可以在这里扩展运行时的能力，比如修改路由、修改 render 方法等。</p>
<p>Umi约定 <code>src/app.tsx</code> 为运行时配置。比如我们可以再在 <code>src/app.ts</code> 中配置一些运行时的配置项来实现部分自定义需求。示例配置如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通知组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; notification &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="comment">//RequestConfig 请求的配置类型</span></span><br><span class="line"><span class="keyword">import</span> &#123; RequestConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ResponseError &#125; <span class="keyword">from</span> <span class="string">&#x27;umi-request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求出错后的异常处理程序</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> errorHandler = <span class="function">(<span class="params">error: ResponseError</span>) =&gt;</span> &#123;</span><br><span class="line">  notification.error(&#123;</span><br><span class="line">    description: <span class="string">&#x27;您的网络发生异常，无法连接服务器&#x27;</span>,</span><br><span class="line">    message: <span class="string">&#x27;网络异常&#x27;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">throw</span> error;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//导出请求对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> request: RequestConfig = &#123;</span><br><span class="line">  errorHandler,</span><br><span class="line">  requestInterceptors: [</span><br><span class="line">    (url, options) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求拦截器&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        url,</span><br><span class="line">        options,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  responseInterceptors: [</span><br><span class="line">    (response, options) =&gt; &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;响应拦截器&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="c-封装service"><a href="#c-封装service" class="headerlink" title="c) 封装service"></a>c) 封装service</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pages/user/services/index.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">queryUserList</span>(<span class="params">&#123; page = <span class="number">1</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users?page=<span class="subst">$&#123;page&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-4-新建页面-发送请求"><a href="#3-4-4-新建页面-发送请求" class="headerlink" title="3.4.4 新建页面 发送请求"></a>3.4.4 新建页面 发送请求</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.创建页面</span></span><br><span class="line">umi g page user/index --typescript --less</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.配置路由  .umirc.ts</span></span><br><span class="line">routes: [</span><br><span class="line">    &#123;</span><br><span class="line">        path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="comment">//注意：这边文件的路径是相对于src/.mui中来确定的</span></span><br><span class="line">        component: <span class="string">&#x27;../layouts/index&#x27;</span>,</span><br><span class="line">        routes: [</span><br><span class="line">            &#123; </span><br><span class="line">                path: <span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">                component: <span class="string">&#x27;../pages/index&#x27;</span> </span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; </span><br><span class="line">                path: <span class="string">&#x27;/user&#x27;</span>, </span><br><span class="line">                component: <span class="string">&#x27;../pages/user/index&#x27;</span> </span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.pages/user/index.tsx</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./index.less&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; queryUserList &#125; <span class="keyword">from</span> <span class="string">&#x27;./services&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">//componentDidMount</span></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    getUsers();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//发送请求获取数据</span></span><br><span class="line">  <span class="keyword">const</span> getUsers = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> queryUserList(&#123; <span class="attr">page</span>: <span class="number">1</span> &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;h1 className=&#123;styles.title&#125;&gt;Page user/index&lt;/h1&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-5-编写dva-model"><a href="#3-4-5-编写dva-model" class="headerlink" title="3.4.5 编写dva model"></a>3.4.5 编写dva model</h3><p>dva 通过 <code>model</code> 的概念把一个领域的模型管理起来，包含同步更新 state 的 reducers，处理异步逻辑的 effects，订阅数据源的 subscriptions 。</p>
<p>好处在于可以统一管理模型数据和把模型数据共享到组件中。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// user/models/index.ts</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Effect 异步操作     Reducer  纯函数      Subscription 订阅更新</span></span><br><span class="line"><span class="keyword">import</span> &#123; Effect, Reducer, Subscription, Action &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">//查询用户的接口</span></span><br><span class="line"><span class="keyword">import</span> &#123; queryUserList &#125; <span class="keyword">from</span> <span class="string">&#x27;../services&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface UserItem &#123;</span><br><span class="line">  id: number;</span><br><span class="line">  name: string;</span><br><span class="line">  email: string;</span><br><span class="line">  website: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明用户模块state的数据类型  ?表示可有可无</span></span><br><span class="line"><span class="keyword">export</span> interface UserModelState &#123;</span><br><span class="line">  list?: UserItem[];</span><br><span class="line">  total?: number;</span><br><span class="line">  page?: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明用户model的数据类型</span></span><br><span class="line"><span class="keyword">export</span> interface UserModelType &#123;</span><br><span class="line">  <span class="comment">//名称空间</span></span><br><span class="line">  namespace: <span class="string">&#x27;user&#x27;</span>;</span><br><span class="line">  <span class="comment">//state数据</span></span><br><span class="line">  state: UserModelState;</span><br><span class="line">  <span class="comment">//异步方法</span></span><br><span class="line">  effects: &#123;</span><br><span class="line">    fetchUserList: Effect;</span><br><span class="line">    removeUserById?: Effect;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//纯函数</span></span><br><span class="line">  reducers: &#123;</span><br><span class="line">    save: Reducer&lt;UserModelState&gt;;</span><br><span class="line">    removeById?: Reducer&lt;UserModelState&gt;;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">//订阅更新</span></span><br><span class="line">  subscriptions?: &#123; <span class="attr">setup</span>: Subscription &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明UserModel</span></span><br><span class="line"><span class="keyword">const</span> UserModel: UserModelType = &#123;</span><br><span class="line">  namespace: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">  state: &#123;</span><br><span class="line">    list: [], <span class="comment">//所有用户信息的数组</span></span><br><span class="line">    total: <span class="number">0</span>, <span class="comment">//总用户个数</span></span><br><span class="line">    page: <span class="number">0</span>, <span class="comment">//当前页码</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//纯函数  操作state</span></span><br><span class="line">  reducers: &#123;</span><br><span class="line">    <span class="function"><span class="title">save</span>(<span class="params">state, &#123; payload &#125;</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; list, total, page &#125; = payload;</span><br><span class="line">      <span class="comment">// 复制数组，将list, total, page内容放到到state</span></span><br><span class="line">      <span class="keyword">return</span> &#123; ...state, list, total, page &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//用于处理异步操作和业务逻辑，不直接修改 state，简单的来说，就是获取从服务端获取数据，并且发起一个 action 交给 reducer。其中它用到了redux-saga，里面有几个常用的函数</span></span><br><span class="line">  effects: &#123;</span><br><span class="line">    <span class="comment">// * 表示生成器函数，该函数会返回一个迭代器</span></span><br><span class="line">    <span class="comment">// 参数 payload 表示有效负载的数据，在外部通过dispatch传递</span></span><br><span class="line">    <span class="comment">// put:  用于触发action  yield put(&#123; type: &#x27;todos/add&#x27;, payload: &#x27;Learn Dva&#x27;&#125;);</span></span><br><span class="line">    <span class="comment">// call:用于调用异步逻辑，支持Promise，第一个参数是你要调用的函数，第二个参数开始是你要传递的参。const result = yield call(fetch, &#x27;/todos&#x27;);</span></span><br><span class="line">    <span class="comment">// select:用于从state里获取数据。const todos = yield select(state =&gt; state.todos);</span></span><br><span class="line">    *<span class="function"><span class="title">fetchUserList</span>(<span class="params">&#123; payload: &#123; page = <span class="number">1</span> &#125; &#125;, &#123; call, put &#125;</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; list, total &#125; = <span class="keyword">yield</span> call(queryUserList, &#123; page &#125;);</span><br><span class="line">      <span class="keyword">yield</span> put(&#123;</span><br><span class="line">        type: <span class="string">&#x27;save&#x27;</span>,</span><br><span class="line">        payload: &#123;</span><br><span class="line">          list: list,</span><br><span class="line">          total: <span class="built_in">parseInt</span>(total, <span class="number">10</span>),</span><br><span class="line">          page: <span class="built_in">parseInt</span>(page, <span class="number">10</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> UserModel;</span><br></pre></td></tr></table></figure>

<h3 id="3-4-6-编写页面"><a href="#3-4-6-编写页面" class="headerlink" title="3.4.6 编写页面"></a>3.4.6 编写页面</h3><p>到这里，我们已经单独完成了 model 和 页面，那么他们如何串联起来呢?</p>
<p>dva 提供了 <code>connect</code> 方法。如果你熟悉 redux，这个 connect 来自 react-redux。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pages/user/index.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; FC, useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ConnectProps connect高阶函数的属性类型</span></span><br><span class="line"><span class="comment">//Loading 数据加载状态类型</span></span><br><span class="line"><span class="comment">//connect 高阶函数，主要作用将model和当前组件连接起来</span></span><br><span class="line"><span class="keyword">import</span> &#123; ConnectProps, Loading, connect &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="comment">//users这个namespace的数据类型</span></span><br><span class="line"><span class="keyword">import</span> &#123; UserModelState &#125; <span class="keyword">from</span> <span class="string">&#x27;./models&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//声明当前页面的属性类型</span></span><br><span class="line"><span class="keyword">interface</span> PageProps <span class="keyword">extends</span> ConnectProps &#123;</span><br><span class="line">  user: UserModelState;</span><br><span class="line">  loading: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前组件对象</span></span><br><span class="line"><span class="comment">//参数users表示模型层数据</span></span><br><span class="line"><span class="comment">//参数dispatch表示redux派发器</span></span><br><span class="line"><span class="comment">//参数loading表示数据加载状态</span></span><br><span class="line"><span class="keyword">const</span> UserPage: FC&lt;PageProps&gt; = <span class="function">(<span class="params">&#123; user, dispatch, loading &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; list,total &#125; = user;</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//dispatch一个action来触发对应的reducer</span></span><br><span class="line">    dispatch &amp;&amp;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;user/fetchUserList&#x27;</span>,</span><br><span class="line">        <span class="comment">//payload 有效负载 ，dispatch传递参数的时候</span></span><br><span class="line">        payload: &#123;</span><br><span class="line">          page: <span class="number">1</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello &#123;JSON.stringify(list)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//connect 作用：将model和当前组件连接起来</span></span><br><span class="line"><span class="comment">//参数 users 表示users这个namespace中的数据</span></span><br><span class="line"><span class="comment">//参数 loading 表示users namespace中的数据是否加载完毕</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function">(<span class="params">&#123; user, loading &#125;: &#123; user: UserModelState; loading: Loading &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  user,</span><br><span class="line">  loading: loading.models.user, <span class="comment">//表示users这个namespace的数据是否已经加载完毕</span></span><br><span class="line">&#125;))(UserPage);</span><br></pre></td></tr></table></figure>

<h3 id="3-4-7-使用订阅更新设置dva数据"><a href="#3-4-7-使用订阅更新设置dva数据" class="headerlink" title="3.4.7 使用订阅更新设置dva数据"></a>3.4.7 使用订阅更新设置dva数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pages/user/models/index.ts</span></span><br><span class="line"></span><br><span class="line">.........</span><br><span class="line"><span class="comment">//订阅更新</span></span><br><span class="line">subscriptions: &#123;</span><br><span class="line">    <span class="function"><span class="title">setup</span>(<span class="params">&#123; dispatch, history &#125;</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//监听url的变化，当访问路径是/user的时候触发fetchUserList这个effects</span></span><br><span class="line">        <span class="keyword">return</span> history.listen(<span class="function">(<span class="params">&#123; pathname &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (pathname === <span class="string">&#x27;/user&#x27;</span>) &#123;</span><br><span class="line">                dispatch(&#123;</span><br><span class="line">                    type: <span class="string">&#x27;fetchUserList&#x27;</span>,</span><br><span class="line">                    payload: &#123;</span><br><span class="line">                        page: <span class="number">1</span>,</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//注释掉pages/user/index.tsx    发送请求的代码</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-8-使用ant-design编写页面"><a href="#3-4-8-使用ant-design编写页面" class="headerlink" title="3.4.8 使用ant design编写页面"></a>3.4.8 使用ant design编写页面</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; FC,useEffect,useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Table, Pagination, Popconfirm, Button &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ConnectProps, Loading, connect &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; UserModelState,UserItem &#125; <span class="keyword">from</span> <span class="string">&#x27;./models&#x27;</span>;</span><br><span class="line"></span><br><span class="line">interface PageProps <span class="keyword">extends</span> ConnectProps &#123;</span><br><span class="line">  user: UserModelState;</span><br><span class="line">  loading: boolean;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> UserPage: FC&lt;PageProps&gt; = <span class="function">(<span class="params">&#123; user, dispatch, loading &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; list, total, page &#125; = user;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">onChangeUserPagination</span>(<span class="params">page: number</span>) </span>&#123;</span><br><span class="line">    dispatch &amp;&amp;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: <span class="string">&#x27;user/fetchUserList&#x27;</span>,</span><br><span class="line">        payload: &#123;</span><br><span class="line">          page: page,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//dispatch一个action来触发对应的reducer</span></span><br><span class="line">    dispatch &amp;&amp;</span><br><span class="line">      dispatch(&#123;</span><br><span class="line">        type: <span class="string">&#x27;user/fetchUserList&#x27;</span>,</span><br><span class="line">        <span class="comment">//payload 有效负载 ，dispatch传递参数的时候</span></span><br><span class="line">        payload: &#123;</span><br><span class="line">          page: <span class="number">1</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> toggle = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setPopShow(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> columns = [</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;用户名&#x27;</span>,</span><br><span class="line">      dataIndex: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">      key: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;电子邮件&#x27;</span>,</span><br><span class="line">      dataIndex: <span class="string">&#x27;email&#x27;</span>,</span><br><span class="line">      key: <span class="string">&#x27;email&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;个人网站&#x27;</span>,</span><br><span class="line">      dataIndex: <span class="string">&#x27;website&#x27;</span>,</span><br><span class="line">      key: <span class="string">&#x27;website&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      title: <span class="string">&#x27;操作&#x27;</span>,</span><br><span class="line">      key: <span class="string">&#x27;operation&#x27;</span>,</span><br><span class="line">      render: <span class="function">(<span class="params">item: UserItem</span>) =&gt;</span> (</span><br><span class="line">        &lt;span&gt;</span><br><span class="line">          &lt;Button&gt;编辑&lt;/Button&gt;</span><br><span class="line">          &lt;Popconfirm visible=&#123;popShow&#125; title=<span class="string">&quot;Confirm to delete?&quot;</span>&gt;</span><br><span class="line">            &lt;Button&gt;删除&lt;/Button&gt;</span><br><span class="line">          &lt;/Popconfirm&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">      ),</span><br><span class="line">    &#125;,</span><br><span class="line">  ];</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;Table</span><br><span class="line">          loading=&#123;loading&#125;  <span class="comment">//表格的加载状态</span></span><br><span class="line">          columns=&#123;columns&#125;  <span class="comment">//表格列信息</span></span><br><span class="line">          dataSource=&#123;list&#125;  <span class="comment">//表格数据源</span></span><br><span class="line">          rowKey=&#123;<span class="function">(<span class="params">record:UserItem</span>) =&gt;</span> record.id&#125;  <span class="comment">//表格每一行数据的key</span></span><br><span class="line">          pagination=&#123;<span class="literal">false</span>&#125;   <span class="comment">//不显示表格默认的分页器</span></span><br><span class="line">        /&gt;</span><br><span class="line">        &lt;Pagination</span><br><span class="line">          className=<span class="string">&quot;ant-table-pagination&quot;</span></span><br><span class="line">          total=&#123;total&#125; <span class="comment">// 数据总数</span></span><br><span class="line">          current=&#123;page&#125; <span class="comment">// 当前页数</span></span><br><span class="line">          onChange=&#123;onChangeUserPagination&#125;  <span class="comment">//改变页码的点击事件</span></span><br><span class="line">          pageSize=&#123;<span class="number">10</span>&#125;   <span class="comment">//每一页的数量</span></span><br><span class="line">        /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> connect(<span class="function">(<span class="params">&#123; user, loading &#125;: &#123; user: UserModelState; loading: Loading &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  user,</span><br><span class="line">  loading: loading.models.user,</span><br><span class="line">&#125;))(UserPage);</span><br></pre></td></tr></table></figure>

<h3 id="3-4-9-完成删除功能"><a href="#3-4-9-完成删除功能" class="headerlink" title="3.4.9 完成删除功能"></a>3.4.9 完成删除功能</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pages/user/services/index.tsx 新增请求</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">deleteUserById</span>(<span class="params">id: <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">`/api/users/delete/<span class="subst">$&#123;id&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//pages/user/models/index.tsx reducer和effect</span></span><br><span class="line"><span class="keyword">import</span> &#123; queryUserList, deleteUserById &#125; <span class="keyword">from</span> <span class="string">&#x27;../services&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//reducer中新增下面方法</span></span><br><span class="line"><span class="comment">//state的list可能是undefined，造成类型不匹配，所以这里要 state = &#123;list:[]&#125; 给list一个默认值</span></span><br><span class="line"><span class="function"><span class="title">removeById</span>(<span class="params">state, &#123; payload &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = payload;</span><br><span class="line">    <span class="keyword">var</span> filterList =</span><br><span class="line">        state &amp;&amp;</span><br><span class="line">        state.list &amp;&amp;</span><br><span class="line">        state.list.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (item.id !== id) &#123;</span><br><span class="line">                <span class="keyword">return</span> item;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">return</span> &#123; ...state, ...&#123; <span class="attr">list</span>: filterList &#125; &#125;;</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="comment">//action中新增下面方法</span></span><br><span class="line"><span class="comment">//根据id删除指定用户  发送请求</span></span><br><span class="line">*<span class="function"><span class="title">removeUserById</span>(<span class="params">&#123; payload: &#123; id &#125; &#125;, &#123; call, put &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">yield</span> call(deleteUserById, id);</span><br><span class="line">    <span class="keyword">yield</span> put(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;removeById&#x27;</span>,</span><br><span class="line">        payload: &#123;</span><br><span class="line">            id: id,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"># 页面新增删除事件</span><br><span class="line">&lt;Popconfirm visible=&#123;popShow&#125; title=<span class="string">&quot;Confirm to delete?&quot;</span> onConfirm=&#123;<span class="function">()=&gt;</span>deleteHandler(item.id)&#125;&gt;</span><br><span class="line">       &lt;Button onClick=&#123;<span class="function">()=&gt;</span>&#123;toggle()&#125;&#125;&gt;删除&lt;/Button&gt;</span><br><span class="line">&lt;/Popconfirm&gt;</span><br><span class="line">                 </span><br><span class="line"><span class="comment">//控制pop弹框是否显示</span></span><br><span class="line"><span class="keyword">const</span> [popShow,setPopShow] = useState(<span class="literal">false</span>)</span><br><span class="line">   </span><br><span class="line"><span class="comment">//这边点击删除按钮后一定要将pop关闭，否则会报内存泄漏</span></span><br><span class="line"><span class="keyword">const</span> deleteHandler = <span class="function">(<span class="params">id:<span class="built_in">number</span></span>)=&gt;</span>&#123;   </span><br><span class="line">    setPopShow(<span class="literal">false</span>)</span><br><span class="line">    dispatch &amp;&amp;</span><br><span class="line">        dispatch(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">&#x27;user/removeUserById&#x27;</span>,</span><br><span class="line">        payload: &#123;</span><br><span class="line">            id,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> toggle = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    setPopShow(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


			  </article>
		</div>
		
		


		 	
				<style>
.veditor {
    background: url('https://www.calamus.xyz/wp-content/themes/lensnews2.2/images/loading/comment.gif') no-repeat #fcfcfc!important;
    background-size: auto 130px!important;
    background-position: right bottom!important;
}
</style>
<div id="vcomments" class="comment">

</div>
<script>
	window.valine = new Valine({
		el: '#vcomments',
		appId: 'jNrzXxvqR3NhebnE7swyQBFp-gzGzoHsz',
		appKey: 'iqXsTlkThMqeaKdhYcgajztG',
		avatar: 'robohash',
		placeholder: '留下你的小脚印吧~',
		path: window.location.pathname,   //[重点] 记得添加path路径
	});
	
    // 使用方法 https://valine.js.org/quickstart.html
	/*
		var $vcomments = document.querySelector('.comment');
		var $div= document.createElement('div');
		$div.setAttribute("id","#vcomments");
		$vcomments.appendChild($div);
    new Valine({
        el: '#vcomments',
        appId: 'jNrzXxvqR3NhebnE7swyQBFp-gzGzoHsz',
        appKey: 'iqXsTlkThMqeaKdhYcgajztG',
		avatar: 'robohash',
        placeholder: '输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ',
    });*/
        //placeholder: '输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ',
</script>

<script>
/*//$(function() 
$(window).load(function(){
	// 去valine版权
	$('.info').css("display","none");
	// 去valine位移
	$('.vmeta').css("padding-right","66px");
	$('.vcontrol').css("padding-right","66px");
	$('.vctrl').css("padding-right","66px");
	$('#veditor').removeAttr("placeholder");
	$("#veditor").attr("placeholder","输入前请确认 <昵称> <邮箱> <你的网站> 是否已填写，支持markdown 格式编写 ");
	$('.v .vwrap .vheader .vinput:nth-child(3)').removeAttr("placeholder");
	$(".v .vwrap .vheader .vinput:nth-child(3)").attr("placeholder","你的HOME(例：https://www.baidu.com)");
	$(".info").after(" <p>&copy; </p>");
});*/
</script>
			
		
	  
	
		


<div class="copy">
<i></i>
<strong>本文作者：</strong>
	
	 
			风清<br>
        
	
<strong>本文链接：</strong>
	<a href="https://fengqing7511.github.io/2020/04/15/07.umi&dva/" title="https:&#x2F;&#x2F;fengqing7511.github.io&#x2F;2020&#x2F;04&#x2F;15&#x2F;07.umi&amp;dva&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;fengqing7511.github.io&#x2F;2020&#x2F;04&#x2F;15&#x2F;07.umi&amp;dva&#x2F;</a><br>
</div>

	  
	</div>
</div>
<script>
	(function(){
		var jmz = {};
		jmz.GetLength = function(str) {
			var realLength = 0, len = str.length, charCode = -1;
			for (var i = 0; i < len; i++) {
				charCode = str.charCodeAt(i);
				if (charCode >= 0 && charCode <= 128) 
					  realLength += 1;
				else
					  realLength += 1;
			}
			return realLength;
		};
		//console.log(str);
		var article = document.querySelector('.dearmsdan-post article').innerHTML.trim();

		var b = article.replace(/<.*?>/ig,"");
		
		$('.post-count').html(jmz.GetLength(b)+"字");
	})()
</script>


    				
					
	
	<script src="/resources/jscex/jscex.min.js"></script>
	<script src="/resources/jscex/jscex-parser.js"></script>
	<script src="/resources/jscex/jscex-jit.js"></script>
	<script src="/resources/jscex/jscex-builderbase.min.js"></script>
	<script src="/resources/jscex/jscex-async.min.js"></script>
	<script src="/resources/jscex/jscex-async-powerpack.min.js"></script>


<style>
	footer{    
		position: static;
    	padding: 20px;
		/*margin-top: 50px;*/
    	text-align: center;
		font-size: inherit;
}
}
	.footer{
    	padding: 20px;
		/*margin-top: 50px;*/
    	text-align: center;
    	border-radius: 50px;
    	background: rgba(84, 76, 76, 0.08);
}
	.footer:hover{        
    	background: rgba(84, 76, 76, 0.08);
    	/*background-image: url('/resources/snow.gif')!important;*/
    	background-size: contain!important;
		box-shadow: 0 4px 24px rgb(109, 108, 108);
		transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1) 0s;
		text-decoration: none;
}
	.footer a{
		text-decoration: none;
    	color: #7d7dff;
		font-family: initial;
	}
	.footer a:hover{
    color: rgba(255, 255, 255, 0)!important;
	}
	.footer .footer-logo{
		color: #2c97e8;
	}
	.footer .footer-logo img{   
		margin-left: 20px;
	}
	.foor{
	overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
	}
	
	.footer a::after {
	/*	color: #7cc2ff;*/
	  -webkit-transition: width 0.35s;
	  transition: width 0.35s;
	  content: "";
	  right: 0;
	  width: 0;
	  bottom: -2px;
	  position: absolute;
	  border-bottom: 2px solid;
	}
	.footer a:hover:after {
		left: 1%;
		right: 1%;
		opacity: 1;
		-webkit-transition: all .5s;
		-o-transition: all .5s;
		-ms-transition: all .5s;
		transition: all .5s;
	}
</style>


<footer class="footer">	
	<div class="footer-content">
		<div class="foor"></div>
		<div class="foor">
			© 2020 
			hi 风清.  
			 <span id="dearmsdan-time-box"> 
				 网站已经运行了<span id="dearmsdan-time"></span>
			 </span>...
		</div>
		<div class="foor">
			<a style='color:#939393;' href='http://hn.beian.miit.gov.cn/' target='_blank'> <img width='16px' src='https://img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png' />湘ICP备20001824号 </a>·<a target='_blank' href='http://www.beian.gov.cn/portal/registerSystemInfo' style='display:inline-block;text-decoration:none;height:20px;line-height:20px;'><p style='height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;'>湘公网安备 43010302001049号</p></a>
		</div>
	</div>
</footer>
<script>

var $win = $(window);
var clientWidth = $win.width();
var clientHeight = $win.height();

/* $(window).resize(function() {
    var newWidth = $win.width();
    var newHeight = $win.height();
    if (newWidth != clientWidth && newHeight != clientHeight) {
        location.replace(location);
    }
}); */
 
(function($) {
	$.fn.typewriter = function() {
		this.each(function() {
			var $ele = $(this), str = $ele.html(), progress = 0;
			$ele.html('');
			var timer = setInterval(function() {
				var current = str.substr(progress, 1);
				if (current == '<') {
					progress = str.indexOf('>', progress) + 1;
				} else {
					progress++;
				}
				$ele.html(str.substring(0, progress) + (progress & 1 ? '_' : ''));
				if (progress >= str.length) {
					clearInterval(timer);
				}
			}, 75);
		});
		return this;
	};
})(jQuery);
 
function timeElapse(date){
	var current = Date();
	var seconds = (Date.parse(current) - Date.parse(date)) / 1000;
	var days = Math.floor(seconds / (3600 * 24));
	seconds = seconds % (3600 * 24);
	var hours = Math.floor(seconds / 3600);
	if (hours < 10) {
		hours = "0" + hours;
	}
	seconds = seconds % 3600;
	var minutes = Math.floor(seconds / 60);
	if (minutes < 10) {
		minutes = "0" + minutes;
	}
	seconds = seconds % 60;
	if (seconds < 10) {
		seconds = "0" + seconds;
	}
	var result = "第 <span class=\"digit\">" + days + "</span> 天 <span class=\"digit\">" + hours + "</span> 小时 <span class=\"digit\">" + minutes + "</span> 分钟 <span class=\"digit\">" + seconds + "</span> 秒"; 
	$("#dearmsdan-time").html(result);
}
    </script>
	<script>
	
	
	
	
	
	var textAnimate = eval(Jscex.compile("async", function () 
		{
		    var together = new Date();
		    together.setFullYear(2019,11, 25); 			//时间年月日，注意月份是0-11
		    together.setHours(0);						//小时	
		    together.setMinutes(0);						//分钟
		    together.setSeconds(0);						//秒前一位
		    together.setMilliseconds(0);				//秒第二位
            $("#dearmsdan-time-box").fadeIn(500);
            while (true) {
                timeElapse(together);
                $await(Jscex.Async.sleep(1000));
            }
		}));
 
		textAnimate().start();

	
	
	
	
	</script>



				</div>
			</div>
		</div>

		
	
	



<div class="toping"></div>


<script>
      var browsehappy_config = {
        ie: 12,
        type: 'box',
        debug: false,
        tip: "站点目前不支持 IE 请 ↓↓↓",
        show:['chrome','firefox','360','qq','opera']
      };
    </script>
    <script src="https://cdn.jsdelivr.net/gh/a632079/browserhappy@0.0.1/browserhappy.min.js"></script>



<link href="/resources/meuplayer/css/player.css" rel="stylesheet" type="text/css" />


<div id="jp_container_N" class="jp-video jp-video-270p" role="application" aria-label="media player" style="left: 0px; height: 94px; bottom: 20px;">
	<div class="jp-type-playlist">
		<div id="jquery_jplayer_N" class="jp-jplayer" style="width: 90px; height: 90px;">	<img id="jp_poster_0" style="width: 90px; height: 90px; display: inline;" src="">
			<audio id="jp_audio_0" preload="metadata" src="" title="加载中...."></audio>
			<video id="jp_video_0" preload="metadata" title="加载中...." style="width: 0px; height: 0px;"></video>
		</div>
		<div class="jp-gui">
			<div class="jp-video-play" style="display: none;">
				<button class="jp-video-play-icon" role="button" tabindex="0">播放</button>
			</div>
			<div class="jp-interface">
				<div class="jp-progress">
					<div class="jp-seek-bar" style="width: 100%;">
						<div class="jp-play-bar" style="overflow: hidden; width: 0%;"></div>
					</div>
				</div>
				<div class="jp-current-time" role="timer" aria-label="time">00:00</div>
				<div class="jp-duration" role="timer" aria-label="duration">05:25</div>
				<div class="jp-controls-holder">
					<div class="jp-controls">
						<button class="jp-previous" role="button" tabindex="0">上一曲</button>
						<button class="jp-play" role="button" tabindex="0">播放</button>
						<button class="jp-next" role="button" tabindex="0">下一曲</button>
						<button class="jp-stop" role="button" tabindex="0">暂停</button>
					</div>
					<div class="jp-volume-controls">
						<button class="jp-mute" role="button" tabindex="0">静音</button>
						<button class="jp-volume-max" role="button" tabindex="0">最大音量</button>
						<div class="jp-volume-bar">
							<div class="jp-volume-bar-value" style="width: 80%;"></div>
						</div>
					</div>
					<div class="jp-toggles">
						<button class="jp-repeat" role="button" tabindex="0">重复</button>
						<button class="jp-shuffle" role="button" tabindex="0">随机</button>
					</div>
				</div>
				<div class="jp-details" style="display: none;">
				<div class="jp-title" aria-label="title">加载中....</div>
				</div>
			</div>
		</div>
		<div class="jp-playlist">
			<div class="jp-playlist-box" style="height: 0px;">
				<ul style="height: 1000px; display: block; top: 0px;">
					
				</ul>
			</div>
		</div>
		<div class="jp-no-solution" style="display: none;">
			<span style="transform: rotate(180deg);">升级需要</span> 您浏览器赞不支持播放，请更新版本
			<a href="http://get.adobe.com/flashplayer" target="_blank">Flash插件</a>.
		</div>
	</div>

	<div class="scrollBar" style="display: block;">
		<div class="bar" style="top: 0px;"></div>
	</div>

	<button type="button" class="folded_bt" title="点击收缩" id="btnfold" style="top: 0px;">
	<span style="transform: rotate(180deg);"></span>
	</button>

	<div id="listClose"></div>

</div>


<script async src="/resources/meuplayer/player/player.js"></script>
<script async src="/resources/meuplayer/player/playlist.js"></script>
<script type="text/javascript">

   if (window.addEventListener) {window.addEventListener("load",dearmsdanPlaylist, false); } 
   else if (window.attachEvent) { window.attachEvent("onload",dearmsdanPlaylist);}  
   else{window.onload =dearmsdanPlaylist; }
      

function dearmsdanPlaylist(){
	
var myPlaylist = new jPlayerPlaylist({
		jPlayer: "#jquery_jplayer_N",
		cssSelectorAncestor: "#jp_container_N",
		error: function(event){ }
	},[
   
   	{	
    		title: "Right Here Waiting",
			artist: "Richard Marx",
    		mp3: "http://music.163.com/song/media/outer/url?id=3313653.mp3",
    		poster: "http://p2.music.126.net/_62h3kA2WCrYEXWL0yaJ7Q==/1743825441658717.jpg?param=130y130"
	},
   
   	{	
    		title: "勇气",
			artist: "棉子",
    		mp3: "http://music.163.com/song/media/outer/url?id=1411358329.mp3",
    		poster: "http://p2.music.126.net/QcWNRX_0uhckImvF2nN1xA==/109951164573973377.jpg?param=130y130"
	},
   
   	{	
    		title: "东京不太热",
			artist: "封茗囧菌",
    		mp3: "http://music.163.com/song/media/outer/url?id=34723470.mp3",
    		poster: "http://p1.music.126.net/srjmIxgdjRlCXSjZtl2aaw==/109951163825045428.jpg?param=90y90"
	},
   
   	{	
    		title: "空山新雨后",
			artist: "冷十三",
    		mp3: "http://music.163.com/song/media/outer/url?id=1397565121.mp3",
    		poster: "http://p1.music.126.net/jio03zzjVqkuofI0054Syg==/109951164433163481.jpg?param=177y177"
	},
   
   	{	
    		title: "拜拜",
			artist: "小竖琴",
    		mp3: "http://music.163.com/song/media/outer/url?id=1383594415.mp3",
    		poster: "http://p1.music.126.net/aRpHnChT3GFQI7AsqCw6iA==/109951164284919406.jpg?param=130y130"
	},
   
   	{	
    		title: "冬眠",
			artist: "司南",
    		mp3: "http://music.163.com/song/media/outer/url?id=1398663411.mp3",
    		poster: "http://p1.music.126.net/4KDBaQXnQywQovmqvjx-8Q==/109951164444131697.jpg?param=130y130"
	},
   
   	{	
    		title: "我的名字",
			artist: "焦迈奇",
    		mp3: "http://music.163.com/song/media/outer/url?id=554241732.mp3",
    		poster: "http://p1.music.126.net/a_rb8pgC5R_hO-lfm7acSw==/109951164019567772.jpg?param=130y130"
	},
   
   	{	
    		title: "还是分开",
			artist: "张叶蕾",
    		mp3: "http://music.163.com/song/media/outer/url?id=465921195.mp3",
    		poster: "http://p1.music.126.net/tH5FdakJX47uy8mlM0GMWQ==/19218363741925314.jpg?param=130y130"
	},
   
   	{	
    		title: "云烟成雨",
			artist: "房东的猫",
    		mp3: "http://music.163.com/song/media/outer/url?id=513360721.mp3",
    		poster: "http://p1.music.126.net/DSTg1dR7yKsyGq4IK3NL8A==/109951163046050093.jpg?param=130y130"
	},
   
],{
    playlistOptions: {
        autoPlay: true,
        enableRemoveControls: true
    },
	loop: true,
    swfPath: "js/",
    supplied: "webmv, ogv, m4v, oga, mp3",
    useStateClassSkin: true,
    autoBlur: true,
    smoothPlayBar: true,
    keyEnabled: true,
    audioFullScreen: true,
  	volume: .14
});
var latest = [{
    title: "默",
    artist: "那英",
    mp3: "http://music.163.com/song/media/outer/url?id=31473269.mp3 ",
    poster: "http://p1.music.126.net/OCGt5ln0lPPtPbVJ3VEKtA==/109951163020570422.jpg?param=130y130"
}];
var spirit = [{
    title: "M19+20",
    artist: "梶浦由記",
    mp3: "http://music.163.com/song/media/outer/url?id=591753.mp3 ",
    poster: "http://p1.music.126.net/lW4YKD6cMgm32nI66CzWVg==/5702067301704441.jpg?param=130y130"
}];
	
}
	

	
	
	
	
$("#latest li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: latest[k].title,
        artist: latest[k].artist,
        mp3: latest[k].mp3,
        poster: latest[k].poster
    });
    myPlaylist.play(-1);
});
$("#popular li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: popular[k].title,
        artist: popular[k].artist,
        mp3: popular[k].mp3,
        poster: popular[k].poster
    });
    myPlaylist.play(-1);
});
$("#rank li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: rank[k].title,
        artist: rank[k].artist,
        mp3: rank[k].mp3,
        poster: rank[k].poster
    });
    myPlaylist.play(-1);
});
$("#main li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: main[k].title,
        artist: main[k].artist,
        mp3: main[k].mp3,
        poster: main[k].poster
    });
    myPlaylist.play(-1);
});
$("#spirit li").find("a.playIcon").click(function() {
    var k = $(this).parent("li").index();
    myPlaylist.add({
        title: spirit[k].title,
        artist: spirit[k].artist,
        mp3: spirit[k].mp3,
        poster: spirit[k].poster
    });
    myPlaylist.play(-1);
});
$("#magic li").find("a.playIcon").click(function() {
    var m = $(this).parent("li").index();
    myPlaylist.add({
        title: magic[m].title,
        artist: magic[m].artist,
        mp3: magic[m].mp3,
        poster: magic[m].poster
    });
    myPlaylist.play(-1);
});
$("#playlist-remove").click(function() {
    myPlaylist.remove();
});
$("#listRemove").click(function() {
	alert("删除就都没啦");
    myPlaylist.remove();
});
$("#playlist-next").click(function() {
    myPlaylist.next();
});
$("#playlist-previous").click(function() {
    myPlaylist.previous();
});
$("#playlist-play").click(function() {
    myPlaylist.play();
});
$("#playlist-play--2").click(function() {
    myPlaylist.play(-2);
});
$("#playlist-play--1").click(function() {
    myPlaylist.play(-1);
});
$("#playlist-play-0").click(function() {
    myPlaylist.play(0);
});
$("#playlist-play-1").click(function() {
    myPlaylist.play(1);
});
$("#playlist-play-2").click(function() {
    myPlaylist.play(2);
});
$("#playlist-pause").click(function() {
    myPlaylist.pause();
});
$("#playlist-option-autoPlay-true").click(function() {
    myPlaylist.option("autoPlay", true);
});
$("#playlist-option-autoPlay-false").click(function() {
    myPlaylist.option("autoPlay", false);
});
var $bar = $(".bar");
var $scrollBar = $(".scrollBar");
var $maxH = $scrollBar.innerHeight() - $bar.outerHeight();
var $ul = $(".jp-playlist ul");
var $li = $(".jp-playlist ul li");
var disY = 0;
var iScale = 0;
var iSpeed = 0;
$ul.height(1000);
$bar.mousedown(function(event) {
    var event = event || window.event;
    disY = event.clientY - $(this).position().top;
    $(document).bind("mousemove", function(event) {
        var event = event || window.event;
        var iH = event.clientY - disY;
        iH <= 0 && (iH = 0);
        iH >= $maxH && (iH = $maxH);
        $bar.css({
            top: iH + "px"
        });
        iScale = -iH / $maxH;
        $ul.css({
            top: iScale * ($ul.height() - $(".jp-playlist-box").height()) + "px"
        });
        return false;
    });
    $(document).bind("mouseup", function() {
        $(document).unbind("mousemove");
        $(document).unbind("mouseup");
    });
    return false;
});
$(".jp-playlist-box").mouseover(function() {
    addHandler(this, "mousewheel", mouseWheel);
    addHandler(this, "DOMMouseScroll", mouseWheel);
    return false;
});
function addHandler(element, type, handler) {
    return element.addEventListener ? element.addEventListener(type, handler, false) : element.attachEvent("on" + type, handler, false)
}
function mouseWheel(event) {
    var event = event || window.event;
    if (event.wheelDelta) {
        iSpeed = event.wheelDelta > 0 ? -3 : 3;
    } else if (event.detail) {
        iSpeed = event.detail < 0 ? -3 : 3;
    }
    move();
    if (event.preventDefault) {
        event.preventDefault();
    }
}
;function move() {
    var iH = $bar.position().top;
    iH = iH + iSpeed;
    iH <= 0 && (iH = 0);
    iH >= $maxH && (iH = $maxH);
    $bar.css({
        top: iH + "px"
    });
    iScale = -iH / $maxH;
    $ul.css({
        top: iScale * ($ul.height() - $(".jp-playlist-box").height()) + "px"
    });
    return false;
}
;var fold = true;
$(".jp-video").animate({
/*默认弹出*/
    /* left: 0 */
    left: "-480px"
}, "slow", function() {
    slideOut($(this));
}).delay(0).animate({
    left: "-480px"
}, 350, function() {
    slideIn($(this));
});
$("#btnfold").mouseover(function() {
    if (fold) {
        $(".jp-video").animate({
            left: "-480px"
        }, 350, function() {
            slideIn($(this));
        });
    } else {
        $(".jp-video").animate({
            left: 0
        }, 350, function() {
            slideOut($(this));
        });
    }
});
function slideOut(obj) {
    $("#btnfold").attr({
        "title": "点击收缩"
    });
    obj.find("span").css({
        "transform": "rotate(180deg)"
    });
    obj.find("span").css({
        "MozTransform": "rotate(180deg) translateX(2px)"
    });
    obj.find("span").css({
        "WebkitTransform": "rotate(180deg)"
    });
    fold = true;
}
;function slideIn(obj) {
    $("#btnfold").attr({
        "title": "点击展开"
    });
    obj.find("span").css({
        "transform": "rotate(0deg)"
    });
    obj.find("span").css({
        "MozTransform": "rotate(0deg) translateX(-2px)"
    });
    obj.find("span").css({
        "WebkitTransform": "rotate(0deg)"
    });
    fold = false;
}
;var iOpen = false;
$("#listClose").click(function() {
    if (iOpen) {
        $(".jp-playlist-box").animate({
            height: 0
        }, 100);
        $("#btnfold").css({
            top: "5px"
        });
        $("#listRemove").css({
            display: "none"
        });
        $(".scrollBar").css({
            display: "none"
        });
        $(".jp-video").animate({
            height: "94px",
            bottom: "20px"
        }, 100);
        iOpen = false;
    } else {
        $(".jp-playlist-box").animate({
            height: "80px"
        }, 100);
        $("#btnfold").css({
            top: "52px"
        });
        $("#listRemove").css({
            display: "block"
        });
        $(".scrollBar").css({
            display: "block"
        });
        $(".jp-video").animate({
            height: "175px",
            bottom: "20px"
        }, 100);
        iOpen = true;
    }
});

	
	
	
</script>









<style>

.containerTop {
	position: fixed;
	right: 15px;
	bottom: 30px;
	    opacity: 0.5;
	    z-index: 9999;
}

#myPath path {
  transform: translate(0.125px, 0.033px);
}

.containerTop .heart-wrap {
  cursor: pointer;
  perspective: 200px;
  filter: drop-shadow(0px 10px 10px rgba(174, 196, 238, 0.5));
}

.containerTop .heart {
  position: relative;
  height: 70px;
  width: 80px;
  overflow: hidden;
  background-image: radial-gradient(#c9d8f5 60%, #afc4ee);
	

	

	clip-path: polygon(50% 0%, 100% 100%, 50% 66%, 0 100%);
	

	
}
	

.containerTop .tank {
  position: absolute;
  bottom: 0;
  height: 0;
  width: 80px;
  background-color: #6782bf;
  z-index: 5;
}

.containerTop .curve {
  position: absolute;
  bottom: calc(-1 * 20px);
  width: 80px;
  height: 20px;
}
	.containerTop svg{
		position: fixed;z-index: -1;
	}
.containerTop .curve use {
  animation: cTop 2s cubic-bezier(0.55, 0.5, 0.45, 0.5) infinite;
}
.containerTop .curve use:nth-child(1) {
  animation-duration: 3s;
}
.containerTop .curve use:nth-child(2) {
  animation-duration: 4s;
}
.containerTop .curve use:nth-child(3) {
  animation-duration: 2s;
}

@keyframes cTop {
  0% {
    transform: translateX(-90px);
  }
  100% {
    transform: translateX(85px);
  }
}

</style>

<script>
! function (o) {
  "use strict";
  o.fn.toTop = function (t) {
    var i = this,
      e = o(window),
      s = o("html, body"),
      n = o.extend({
        autohide: !0,
        offset: 420,
        speed: 500,
        position: !0,
        right: 15,
        bottom: 30
      }, t);
    i.css({
      cursor: "pointer"
    }), n.autohide && i.css("display", "none"), n.position && i.css({
      position: "fixed",
      right: n.right,
      bottom: n.bottom
    }), i.click(function () {
      s.animate({
        scrollTop: 0
      }, n.speed)
    }), e.scroll(function () {
      var o = e.scrollTop();
      n.autohide && (o > n.offset ? i.fadeIn(n.speed) : i.fadeOut(n.speed))
    })
  }
}(jQuery);

</script>

<script>
/*!
 * https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.6/gsap.min.js
 * GSAP 3.2.6
 * https://greensock.com
 * 
 * @license Copyright 2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})}(this,function(e){"use strict";function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function n(t){return"string"==typeof t}function o(t){return"function"==typeof t}function p(t){return"number"==typeof t}function q(t){return void 0===t}function r(t){return"object"==typeof t}function s(t){return!1!==t}function t(){return"undefined"!=typeof window}function u(t){return o(t)||n(t)}function K(t){return(l=pt(t,at))&&ie}function L(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function M(t,e){return!e&&console.warn(t)}function N(t,e){return t&&(at[t]=e)&&l&&(l[t]=e)||at}function O(){return 0}function Y(t){var e,i,n=t[0];if(r(n)||o(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=dt.length;i--&&!dt[i].targetTest(n););e=dt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ft(t[i],e)))||t.splice(i,1);return t}function Z(t){return t._gsap||Y(yt(t))[0]._gsap}function $(t,e){var r=t[e];return o(r)?t[e]():q(r)&&t.getAttribute(e)||r}function _(t,e){return(t=t.split(",")).forEach(e)||t}function aa(t){return Math.round(1e5*t)/1e5||0}function ba(t,e){for(var r=e.length,i=0;t.indexOf(e[i])<0&&++i<r;);return i<r}function ca(t,e,r){var i,n=p(t[1]),a=(n?2:1)+(e<2?0:1),o=t[a];if(n&&(o.duration=t[1]),o.parent=r,e){for(i=o;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=s(r.vars.inherit)&&r.parent;o.immediateRender=s(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o}function da(){var t,e,r=ot.length,i=ot.slice(0);for(ut={},t=ot.length=0;t<r;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function ea(t,e,r,i){ot.length&&da(),t.render(e,r,i),ot.length&&da()}function fa(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(nt).length<2?e:t}function ga(t){return t}function ha(t,e){for(var r in e)r in t||(t[r]=e[r]);return t}function ia(t,e){for(var r in e)r in t||"duration"===r||"ease"===r||(t[r]=e[r])}function ka(t,e){for(var i in e)t[i]=r(e[i])?ka(t[i]||(t[i]={}),e[i]):e[i];return t}function la(t,e){var r,i={};for(r in t)r in e||(i[r]=t[r]);return i}function ma(t){var e=t.parent||F,r=t.keyframes?ia:ha;if(s(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent;return t}function pa(t,e,r,i){void 0===r&&(r="_first"),void 0===i&&(i="_last");var n=e._prev,a=e._next;n?n._next=a:t[r]===e&&(t[r]=a),a?a._prev=n:t[i]===e&&(t[i]=n),e._next=e._prev=e.parent=null}function qa(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function ra(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t}function ua(t){return t._repeat?_t(t._tTime,t=t.duration()+t._rDelay)*t:0}function wa(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function xa(t){return t._end=aa(t._start+(t._tDur/Math.abs(t._ts||t._rts||B)||0))}function ya(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=wa(t.rawTime(),e),(!e._dur||gt(0,e.totalDuration(),r)-e._tTime>B)&&e.render(r,!0)),ra(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)0<=r.rawTime()&&r.totalTime(r._tTime),r=r._dp;t._zTime=-B}}function za(t,e,r,i){return e.parent&&qa(e),e._start=aa(r+e._delay),e._end=aa(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function _addLinkedListItem(t,e,r,i,n){void 0===r&&(r="_first"),void 0===i&&(i="_last");var a,s=t[i];if(n)for(a=e[n];s&&s[n]>a;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[i]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||ya(t,e),t}function Aa(t,e,r,i){return qt(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&d!==Ot.frame?(ot.push(t),t._lazy=[e,i],1):void 0:1}function Da(t,e,r){var i=t._repeat,n=aa(e)||0;return t._dur=n,t._tDur=i?i<0?1e12:aa(n*(i+1)+t._rDelay*i):n,t._time>n&&(t._time=n,t._tTime=Math.min(t._tTime,t._tDur)),r||ra(t.parent),t.parent&&xa(t),t}function Ea(t){return t instanceof Bt?ra(t):Da(t,t._dur)}function Ga(t,e){var r,i,a=t.labels,s=t._recent||mt,o=t.duration()>=R?s.endTime(!1):t._dur;return n(e)&&(isNaN(e)||e in a)?"<"===(r=e.charAt(0))||">"===r?("<"===r?s._start:s.endTime(0<=s._repeat))+(parseFloat(e.substr(1))||0):(r=e.indexOf("="))<0?(e in a||(a[e]=o),a[e]):(i=+(e.charAt(r-1)+e.substr(r+1)),1<r?Ga(t,e.substr(0,r-1))+i:o+i):null==e?o:+e}function Ha(t,e){return t||0===t?e(t):e}function Ja(t){return(t+"").substr((parseFloat(t)+"").length)}function Ma(t,e){return t&&r(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&r(t[0]))&&!t.nodeType&&t!==i}function Pa(t){return t.sort(function(){return.5-Math.random()})}function Qa(t){if(o(t))return t;var p=r(t)?t:{each:t},_=Dt(p.ease),m=p.from||0,g=parseFloat(p.base)||0,v={},e=0<m&&m<1,y=isNaN(m)||e,T=p.axis,b=m,w=m;return n(m)?b=w={center:.5,edges:.5,end:1}[m]||0:!e&&y&&(b=m[0],w=m[1]),function(t,e,r){var i,n,a,s,o,u,h,l,f,d=(r||p).length,c=v[d];if(!c){if(!(f="auto"===p.grid?0:(p.grid||[1,R])[1])){for(h=-R;h<(h=r[f++].getBoundingClientRect().left)&&f<d;);f--}for(c=v[d]=[],i=y?Math.min(f,d)*b-.5:m%f,n=y?d*w/f-.5:m/f|0,l=R,u=h=0;u<d;u++)a=u%f-i,s=n-(u/f|0),c[u]=o=T?Math.abs("y"===T?s:a):j(a*a+s*s),h<o&&(h=o),o<l&&(l=o);"random"===m&&Pa(c),c.max=h-l,c.min=l,c.v=d=(parseFloat(p.amount)||parseFloat(p.each)*(d<f?d-1:T?"y"===T?d/f:f:Math.max(f,d/f))||0)*("edges"===m?-1:1),c.b=d<0?g-d:g,c.u=Ja(p.amount||p.each)||0,_=_&&d<0?zt(_):_}return d=(c[t]-c.min)/c.max||0,aa(c.b+(_?_(d):d)*c.v)+c.u}}function Ra(e){var r=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return~~(Math.round(parseFloat(t)/e)*e*r)/r+(p(t)?0:Ja(t))}}function Sa(u,t){var h,l,e=H(u);return!e&&r(u)&&(h=e=u.radius||R,u.values?(u=yt(u.values),(l=!p(u[0]))&&(h*=h)):u=Ra(u.increment)),Ha(t,e?o(u)?function(t){return l=u(t),Math.abs(l-t)<=h?l:t}:function(t){for(var e,r,i=parseFloat(l?t.x:t),n=parseFloat(l?t.y:0),a=R,s=0,o=u.length;o--;)(e=l?(e=u[o].x-i)*e+(r=u[o].y-n)*r:Math.abs(u[o]-i))<a&&(a=e,s=o);return s=!h||a<=h?u[s]:t,l||s===t||p(t)?s:s+Ja(t)}:Ra(u))}function Ta(t,e,r,i){return Ha(H(t)?!e:!0===r?!!(r=0):!i,function(){return H(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/r)*r*i)/i})}function Xa(e,r,t){return Ha(t,function(t){return e[~~r(t)]})}function $a(t){for(var e,r,i,n,a=0,s="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),n="["===t.charAt(e+7),r=t.substr(e+7,i-e-7).match(n?nt:Q),s+=t.substr(a,e-a)+Ta(n?r:+r[0],+r[1],+r[2]||1e-5),a=i+1;return s+t.substr(a,t.length-a)}function bb(t,e,r){var i,n,a,s=t.labels,o=R;for(i in s)(n=s[i]-e)<0==!!r&&n&&o>(n=Math.abs(n))&&(a=i,o=n);return a}function db(t){return qa(t),t.progress()<1&&bt(t,"onInterrupt"),t}function ib(t,e,r){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)*wt+.5|0}function jb(t,e,r){var i,n,a,s,o,u,h,l,f,d,c=t?p(t)?[t>>16,t>>8&wt,t&wt]:0:xt.black;if(!c){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),xt[t])c=xt[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(i=t.charAt(1))+i+(n=t.charAt(2))+n+(a=t.charAt(3))+a),c=[(t=parseInt(t.substr(1),16))>>16,t>>8&wt,t&wt];else if("hsl"===t.substr(0,3))if(c=d=t.match(Q),e){if(~t.indexOf("="))return c=t.match(W),r&&c.length<4&&(c[3]=1),c}else s=+c[0]%360/360,o=c[1]/100,i=2*(u=c[2]/100)-(n=u<=.5?u*(o+1):u+o-u*o),3<c.length&&(c[3]*=1),c[0]=ib(s+1/3,i,n),c[1]=ib(s,i,n),c[2]=ib(s-1/3,i,n);else c=t.match(Q)||xt.transparent;c=c.map(Number)}return e&&!d&&(i=c[0]/wt,n=c[1]/wt,a=c[2]/wt,u=((h=Math.max(i,n,a))+(l=Math.min(i,n,a)))/2,h===l?s=o=0:(f=h-l,o=.5<u?f/(2-h-l):f/(h+l),s=h===i?(n-a)/f+(n<a?6:0):h===n?(a-i)/f+2:(i-n)/f+4,s*=60),c[0]=~~(s+.5),c[1]=~~(100*o+.5),c[2]=~~(100*u+.5)),r&&c.length<4&&(c[3]=1),c}function kb(t){var r=[],i=[],n=-1;return t.split(kt).forEach(function(t){var e=t.match(tt)||[];r.push.apply(r,e),i.push(n+=e.length+1)}),r.c=i,r}function lb(t,e,r){var i,n,a,s,o="",u=(t+o).match(kt),h=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map(function(t){return(t=jb(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),r&&(a=kb(t),(i=r.c).join(o)!==a.c.join(o)))for(s=(n=t.replace(kt,"1").split(tt)).length-1;l<s;l++)o+=n[l]+(~i.indexOf(l)?u.shift()||h+"0,0,0,0)":(a.length?a:u.length?u:r).shift());if(!n)for(s=(n=t.split(kt)).length-1;l<s;l++)o+=n[l]+u[l];return o+n[s]}function ob(t){var e,r=t.join(" ");if(kt.lastIndex=0,kt.test(r))return e=Mt.test(r),t[1]=lb(t[1],e),t[0]=lb(t[0],e,kb(t[1])),!0}function wb(t){var e=(t+"").split("("),r=Pt[e[0]];return r&&1<e.length&&r.config?r.config.apply(null,~t.indexOf("{")?[function _parseObjectInString(t){for(var e,r,i,n={},a=t.substr(1,t.length-3).split(":"),s=a[0],o=1,u=a.length;o<u;o++)r=a[o],e=o!==u-1?r.lastIndexOf(","):r.length,i=r.substr(0,e),n[s]=isNaN(i)?i.replace(St,"").trim():+i,s=r.substr(e+1).trim();return n}(e[1])]:rt.exec(t)[1].split(",").map(fa)):Pt._CE&&At.test(t)?Pt._CE("",t):r}function zb(t,e,r,i){void 0===r&&(r=function easeOut(t){return 1-e(1-t)}),void 0===i&&(i=function easeInOut(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,a={easeIn:e,easeOut:r,easeInOut:i};return _(t,function(t){for(var e in Pt[t]=at[t]=a,Pt[n=t.toLowerCase()]=r,a)Pt[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Pt[t+"."+e]=a[e]}),a}function Ab(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function Bb(r,t,e){function Yk(t){return 1===t?1:i*Math.pow(2,-10*t)*J((t-a)*n)+1}var i=1<=t?t:1,n=(e||(r?.3:.45))/(t<1?t:1),a=n/I*(Math.asin(1/i)||0),s="out"===r?Yk:"in"===r?function(t){return 1-Yk(1-t)}:Ab(Yk);return n=I/n,s.config=function(t,e){return Bb(r,t,e)},s}function Cb(e,r){function el(t){return t?--t*t*((r+1)*t+r)+1:0}void 0===r&&(r=1.70158);var t="out"===e?el:"in"===e?function(t){return 1-el(1-t)}:Ab(el);return t.config=function(t){return Cb(e,t)},t}var F,i,a,h,l,f,d,c,m,g,v,y,T,b,w,x,k,C,P,A,S,z,D,G={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},E={duration:.5,overwrite:!1,delay:0},R=1e8,B=1/R,I=2*Math.PI,U=I/4,X=0,j=Math.sqrt,V=Math.cos,J=Math.sin,H=Array.isArray,Q=/(?:-?\.?\d|\.)+/gi,W=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,tt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,et=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,rt=/\(([^()]+)\)/i,it=/[+-]=-?[\.\d]+/,nt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,at={},st={},ot=[],ut={},ht={},lt={},ft=30,dt=[],ct="",pt=function _merge(t,e){for(var r in e)t[r]=e[r];return t},_t=function _animationCycle(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},mt={_start:0,endTime:O},gt=function _clamp(t,e,r){return r<t?t:e<r?e:r},vt=[].slice,yt=function toArray(t,e){return!n(t)||e||!a&&Ct()?H(t)?function _flatten(t,e,r){return void 0===r&&(r=[]),t.forEach(function(t){return n(t)&&!e||Ma(t,1)?r.push.apply(r,yt(t)):r.push(t)})||r}(t,e):Ma(t)?vt.call(t,0):t?[t]:[]:vt.call(h.querySelectorAll(t),0)},Tt=function mapRange(e,t,r,i,n){var a=t-e,s=i-r;return Ha(n,function(t){return r+(t-e)/a*s})},bt=function _callback(t,e,r){var i,n,a=t.vars,s=a[e];if(s)return i=a[e+"Params"],n=a.callbackScope||t,r&&ot.length&&da(),i?s.apply(n,i):s.call(n)},wt=255,xt={aqua:[0,wt,wt],lime:[0,wt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,wt],navy:[0,0,128],white:[wt,wt,wt],olive:[128,128,0],yellow:[wt,wt,0],orange:[wt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[wt,0,0],pink:[wt,192,203],cyan:[0,wt,wt],transparent:[wt,wt,wt,0]},kt=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in xt)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Mt=/hsl[a]?\(/,Ot=(b=Date.now,w=500,x=33,k=b(),C=k,A=P=1/240,T={time:0,frame:0,tick:function tick(){ck(!0)},wake:function wake(){f&&(!a&&t()&&(i=a=window,h=i.document||{},at.gsap=ie,(i.gsapVersions||(i.gsapVersions=[])).push(ie.version),K(l||i.GreenSockGlobals||!i.gsap&&i||{}),y=i.requestAnimationFrame),g&&T.sleep(),v=y||function(t){return setTimeout(t,1e3*(A-T.time)+1|0)},m=1,ck(2))},sleep:function sleep(){(y?i.cancelAnimationFrame:clearTimeout)(g),m=0,v=O},lagSmoothing:function lagSmoothing(t,e){w=t||1e8,x=Math.min(e,w,0)},fps:function fps(t){P=1/(t||240),A=T.time+P},add:function add(t){S.indexOf(t)<0&&S.push(t),Ct()},remove:function remove(t){var e;~(e=S.indexOf(t))&&S.splice(e,1)},_listeners:S=[]}),Ct=function _wake(){return!m&&Ot.wake()},Pt={},At=/^[\d.\-M][\d.\-,\s]/,St=/["']/g,zt=function _invertEase(e){return function(t){return 1-e(1-t)}},Dt=function _parseEase(t,e){return t&&(o(t)?t:Pt[t]||wb(t))||e};function ck(e){var t,r,i=b()-C,n=!0===e;w<i&&(k+=i-x),C+=i,T.time=(C-k)/1e3,(0<(t=T.time-A)||n)&&(T.frame++,A+=t+(P<=t?.004:P-t),r=1),n||(g=v(ck)),r&&S.forEach(function(t){return t(T.time,i,T.frame,e)})}function vl(t){return t<D?z*t*t:t<.7272727272727273?z*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?z*(t-=2.25/2.75)*t+.9375:z*Math.pow(t-2.625/2.75,2)+.984375}_("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;zb(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},function(t){return 1-Math.pow(1-t,r)},function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2})}),Pt.Linear.easeNone=Pt.none=Pt.Linear.easeIn,zb("Elastic",Bb("in"),Bb("out"),Bb()),z=7.5625,D=1/2.75,zb("Bounce",function(t){return 1-vl(1-t)},vl),zb("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),zb("Circ",function(t){return-(j(1-t*t)-1)}),zb("Sine",function(t){return 1-V(t*U)}),zb("Back",Cb("in"),Cb("out"),Cb()),Pt.SteppedEase=Pt.steps=at.SteppedEase={config:function config(t,e){void 0===t&&(t=1);var r=1/t,i=t+(e?0:1),n=e?1:0;return function(t){return((i*gt(0,.99999999,t)|0)+n)*r}}},E.ease=Pt["quad.out"],_("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return ct+=t+","+t+"Params,"});var Rt,Ft=function GSCache(t,e){this.id=X++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:$,this.set=e?e.getSetter:Zt},Et=((Rt=Animation.prototype).delay=function delay(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},Rt.duration=function duration(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},Rt.totalDuration=function totalDuration(t){return arguments.length?(this._dirty=0,Da(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},Rt.totalTime=function totalTime(t,e){if(Ct(),!arguments.length)return this._tTime;var r=this.parent||this._dp;if(r&&r.smoothChildTiming&&this._ts){for(this._start=aa(r._time-(0<this._ts?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),xa(this),r._dirty||ra(r);r.parent;)r.parent._time!==r._start+(0<=r._ts?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&za(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===B)&&(this._ts||(this._pTime=t),ea(this,t,e)),this},Rt.time=function time(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+ua(this))%this._dur||(t?this._dur:0),e):this._time},Rt.totalProgress=function totalProgress(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},Rt.progress=function progress(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+ua(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},Rt.iteration=function iteration(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?_t(this._tTime,r)+1:1},Rt.timeScale=function timeScale(t){if(!arguments.length)return this._rts===-B?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?wa(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-B?0:this._rts,function _recacheAncestors(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(gt(0,this._tDur,e),!0))},Rt.paused=function paused(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ct(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=B)&&Math.abs(this._zTime)!==B))),this):this._ps},Rt.startTime=function startTime(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||za(e,this,t-this._delay),this}return this._start},Rt.endTime=function endTime(t){return this._start+(s(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},Rt.rawTime=function rawTime(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wa(e.rawTime(t),this):this._tTime:this._tTime},Rt.repeat=function repeat(t){return arguments.length?(this._repeat=t,Ea(this)):this._repeat},Rt.repeatDelay=function repeatDelay(t){return arguments.length?(this._rDelay=t,Ea(this)):this._rDelay},Rt.yoyo=function yoyo(t){return arguments.length?(this._yoyo=t,this):this._yoyo},Rt.seek=function seek(t,e){return this.totalTime(Ga(this,t),s(e))},Rt.restart=function restart(t,e){return this.play().totalTime(t?-this._delay:0,s(e))},Rt.play=function play(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},Rt.reverse=function reverse(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},Rt.pause=function pause(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},Rt.resume=function resume(){return this.paused(!1)},Rt.reversed=function reversed(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-B:0)),this):this._rts<0},Rt.invalidate=function invalidate(){return this._initted=0,this._zTime=-B,this},Rt.isActive=function isActive(t){var e,r=this.parent||this._dp,i=this._start;return!(r&&!(this._ts&&(this._initted||!t)&&r.isActive(t)&&(e=r.rawTime(!0))>=i&&e<this.endTime(!0)-B))},Rt.eventCallback=function eventCallback(t,e,r){var i=this.vars;return 1<arguments.length?(e?(i[t]=e,r&&(i[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},Rt.then=function then(t){var i=this;return new Promise(function(e){function Km(){var t=i.then;i.then=null,o(r)&&(r=r(i))&&(r.then||r===i)&&(i.then=t),e(r),i.then=t}var r=o(t)?t:ga;i._initted&&1===i.totalProgress()&&0<=i._ts||!i._tTime&&i._ts<0?Km():i._prom=Km})},Rt.kill=function kill(){db(this)},Animation);function Animation(t,e){var r=t.parent||F;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Da(this,+t.duration,1),this.data=t.data,m||Ot.wake(),r&&za(r,this,e||0===e?e:r._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}ha(Et.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-B,_prom:0,_ps:!1,_rts:1});var Bt=function(i){function Timeline(t,e){var r;return void 0===t&&(t={}),(r=i.call(this,t,e)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=s(t.sortChildren),r.parent&&ya(r.parent,_assertThisInitialized(r)),r}_inheritsLoose(Timeline,i);var t=Timeline.prototype;return t.to=function to(t,e,r,i){return new Ut(t,ca(arguments,0,this),Ga(this,p(e)?i:r)),this},t.from=function from(t,e,r,i){return new Ut(t,ca(arguments,1,this),Ga(this,p(e)?i:r)),this},t.fromTo=function fromTo(t,e,r,i,n){return new Ut(t,ca(arguments,2,this),Ga(this,p(e)?n:i)),this},t.set=function set(t,e,r){return e.duration=0,e.parent=this,ma(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ut(t,e,Ga(this,r),1),this},t.call=function call(t,e,r){return za(this,Ut.delayedCall(0,t,e),Ga(this,r))},t.staggerTo=function staggerTo(t,e,r,i,n,a,s){return r.duration=e,r.stagger=r.stagger||i,r.onComplete=a,r.onCompleteParams=s,r.parent=this,new Ut(t,r,Ga(this,n)),this},t.staggerFrom=function staggerFrom(t,e,r,i,n,a,o){return r.runBackwards=1,ma(r).immediateRender=s(r.immediateRender),this.staggerTo(t,e,r,i,n,a,o)},t.staggerFromTo=function staggerFromTo(t,e,r,i,n,a,o,u){return i.startAt=r,ma(i).immediateRender=s(i.immediateRender),this.staggerTo(t,e,i,n,a,o,u)},t.render=function render(t,e,r){var i,n,a,s,o,u,h,l,f,d,c,p,_=this._time,m=this._dirty?this.totalDuration():this._tDur,g=this._dur,v=this!==F&&m-B<t&&0<=t?m:t<B?0:t,y=this._zTime<0!=t<0&&(this._initted||!g);if(v!==this._tTime||r||y){if(_!==this._time&&g&&(v+=this._time-_,t+=this._time-_),i=v,f=this._start,u=!(l=this._ts),y&&(g||(_=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(c=this._yoyo,o=g+this._rDelay,(g<(i=aa(v%o))||m===v)&&(i=g),(s=~~(v/o))&&s===v/o&&(i=g,s--),c&&1&s&&(i=g-i,p=1),s!==(d=_t(this._tTime,o))&&!this._lock)){var T=c&&1&d,b=T===(c&&1&s);if(s<d&&(T=!T),_=T?0:g,this._lock=1,this.render(_,e,!g)._lock=0,!e&&this.parent&&bt(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),_!==this._time||u!=!this._ts)return this;if(b&&(this._lock=2,_=T?g+1e-4:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!u)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function _findNextPauseTween(t,e,r){var i;if(e<r)for(i=t._first;i&&i._start<=r;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=r;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,aa(_),aa(i)))&&(v-=i-(i=h._start)),this._tTime=v,this._time=i,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),_||!i||e||bt(this,"onStart"),_<=i&&0<=t)for(n=this._first;n;){if(a=n._next,(n._act||i>=n._start)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(0<n._ts?(i-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(i-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!u){h=0,a&&(v+=this._zTime=-B);break}}n=a}else{n=this._last;for(var w=t<0?t:i;n;){if(a=n._prev,(n._act||w<=n._end)&&n._ts&&h!==n){if(n.parent!==this)return this.render(t,e,r);if(n.render(0<n._ts?(w-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(w-n._start)*n._ts,e,r),i!==this._time||!this._ts&&!u){h=0,a&&(v+=this._zTime=w?-B:B);break}}n=a}}if(h&&!e&&(this.pause(),h.render(_<=i?0:-B)._zTime=_<=i?1:-1,this._ts))return this._start=f,xa(this),this.render(t,e,r);this._onUpdate&&!e&&bt(this,"onUpdate",!0),(v===m&&m>=this.totalDuration()||!v&&this._ts<0)&&(f!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||(!t&&g||!(t&&0<this._ts||!v&&this._ts<0)||qa(this,1),e||t<0&&!_||(bt(this,v===m?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},t.add=function add(t,e){var r=this;if(p(e)||(e=Ga(this,e)),!(t instanceof Et)){if(H(t))return t.forEach(function(t){return r.add(t,e)}),ra(this);if(n(t))return this.addLabel(t,e);if(!o(t))return this;t=Ut.delayedCall(0,t)}return this!==t?za(this,t,e):this},t.getChildren=function getChildren(t,e,r,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===i&&(i=-R);for(var n=[],a=this._first;a;)a._start>=i&&(a instanceof Ut?e&&n.push(a):(r&&n.push(a),t&&n.push.apply(n,a.getChildren(!0,e,r)))),a=a._next;return n},t.getById=function getById(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},t.remove=function remove(t){return n(t)?this.removeLabel(t):o(t)?this.killTweensOf(t):(pa(this,t),t===this._recent&&(this._recent=this._last),ra(this))},t.totalTime=function totalTime(t,e){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=aa(Ot.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),i.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},t.addLabel=function addLabel(t,e){return this.labels[t]=Ga(this,e),this},t.removeLabel=function removeLabel(t){return delete this.labels[t],this},t.addPause=function addPause(t,e,r){var i=Ut.delayedCall(0,e||O,r);return i.data="isPause",this._hasPause=1,za(this,i,Ga(this,t))},t.removePause=function removePause(t){var e=this._first;for(t=Ga(this,t);e;)e._start===t&&"isPause"===e.data&&qa(e),e=e._next},t.killTweensOf=function killTweensOf(t,e,r){for(var i=this.getTweensOf(t,r),n=i.length;n--;)Lt!==i[n]&&i[n].kill(t,e);return this},t.getTweensOf=function getTweensOf(t,e){for(var r,i=[],n=yt(t),a=this._first;a;)a instanceof Ut?!ba(a._targets,n)||e&&!a.isActive("started"===e)||i.push(a):(r=a.getTweensOf(n,e)).length&&i.push.apply(i,r),a=a._next;return i},t.tweenTo=function tweenTo(t,e){e=e||{};var r=this,i=Ga(r,t),n=e.startAt,a=e.onStart,s=e.onStartParams,o=Ut.to(r,ha(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(n&&"time"in n?n.time:r._time))/r.timeScale())||B,onStart:function onStart(){r.pause();var t=e.duration||Math.abs((i-r._time)/r.timeScale());o._dur!==t&&Da(o,t).render(o._time,!0,!0),a&&a.apply(o,s||[])}}));return o},t.tweenFromTo=function tweenFromTo(t,e,r){return this.tweenTo(e,ha({startAt:{time:Ga(this,t)}},r))},t.recent=function recent(){return this._recent},t.nextLabel=function nextLabel(t){return void 0===t&&(t=this._time),bb(this,Ga(this,t))},t.previousLabel=function previousLabel(t){return void 0===t&&(t=this._time),bb(this,Ga(this,t),1)},t.currentLabel=function currentLabel(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+B)},t.shiftChildren=function shiftChildren(t,e,r){void 0===r&&(r=0);for(var i,n=this._first,a=this.labels;n;)n._start>=r&&(n._start+=t),n=n._next;if(e)for(i in a)a[i]>=r&&(a[i]+=t);return ra(this)},t.invalidate=function invalidate(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return i.prototype.invalidate.call(this)},t.clear=function clear(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._time=this._tTime=0,t&&(this.labels={}),ra(this)},t.totalDuration=function totalDuration(t){var e,r,i,n,a=0,s=this,o=s._last,u=R;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(n=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),u<(i=o._start)&&s._sort&&o._ts&&!s._lock?(s._lock=1,za(s,o,i-o._delay,1)._lock=0):u=i,i<0&&o._ts&&(a-=i,(!n&&!s._dp||n&&n.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1e20),u=0),a<(r=xa(o))&&o._ts&&(a=r),o=e;Da(s,s===F&&s._time>a?s._time:Math.min(R,a),1),s._dirty=0}return s._tDur},Timeline.updateRoot=function updateRoot(t){if(F._ts&&(ea(F,wa(t,F)),d=Ot.frame),Ot.frame>=ft){ft+=G.autoSleep||120;var e=F._first;if((!e||!e._ts)&&G.autoSleep&&Ot._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ot.sleep()}}},Timeline}(Et);ha(Bt.prototype,{_lock:0,_hasPause:0,_forcing:0});function Jb(t,e,i,a,s,u){var h,l,f,d;if(ht[t]&&!1!==(h=new ht[t]).init(s,h.rawVars?e[t]:function _processVars(t,e,i,a,s){if(o(t)&&(t=Yt(t,s,e,i,a)),!r(t)||t.style&&t.nodeType||H(t))return n(t)?Yt(t,s,e,i,a):t;var u,h={};for(u in t)h[u]=Yt(t[u],s,e,i,a);return h}(e[t],a,s,u,i),i,a,u)&&(i._pt=l=new ee(i._pt,s,t,0,1,h.render,h,0,h.priority),i!==c))for(f=i._ptLookup[i._targets.indexOf(s)],d=h._props.length;d--;)f[h._props[d]]=l;return h}var Lt,It=function _addPropTween(t,e,r,i,a,s,u,h,l){o(i)&&(i=i(a||0,t,s));var f,d=t[e],c="get"!==r?r:o(d)?l?t[e.indexOf("set")||!o(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():d,p=o(d)?l?Vt:jt:Xt;if(n(i)&&(~i.indexOf("random(")&&(i=$a(i)),"="===i.charAt(1)&&(i=parseFloat(c)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(Ja(c)||0))),c!==i)return isNaN(c+i)?(d||e in t||L(e,i),function _addComplexStringPropTween(t,e,r,i,n,a,s){var o,u,h,l,f,d,c,p,_=new ee(this._pt,t,e,0,1,Qt,null,n),m=0,g=0;for(_.b=r,_.e=i,r+="",(c=~(i+="").indexOf("random("))&&(i=$a(i)),a&&(a(p=[r,i],t,e),r=p[0],i=p[1]),u=r.match(et)||[];o=et.exec(i);)l=o[0],f=i.substring(m,o.index),h?h=(h+1)%5:"rgba("===f.substr(-5)&&(h=1),l!==u[g++]&&(d=parseFloat(u[g-1])||0,_._pt={_next:_._pt,p:f||1===g?f:",",s:d,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-d,m:h&&h<4?Math.round:0},m=et.lastIndex);return _.c=m<i.length?i.substring(m,i.length):"",_.fp=s,(it.test(i)||c)&&(_.e=0),this._pt=_}.call(this,t,e,c,i,p,h||G.stringFilter,l)):(f=new ee(this._pt,t,e,+c||0,i-(c||0),"boolean"==typeof d?Ht:Jt,0,p),l&&(f.fp=l),u&&f.modifier(u,this,t),this._pt=f)},qt=function _initTween(t,e){var r,i,n,a,o,u,h,l,f,d,c,p,_=t.vars,m=_.ease,g=_.startAt,v=_.immediateRender,y=_.lazy,T=_.onUpdate,b=_.onUpdateParams,w=_.callbackScope,x=_.runBackwards,k=_.yoyoEase,M=_.keyframes,O=_.autoRevert,C=t._dur,P=t._startAt,A=t._targets,S=t.parent,z=S&&"nested"===S.data?S.parent._targets:A,D="auto"===t._overwrite,R=t.timeline;if(!R||M&&m||(m="none"),t._ease=Dt(m,E.ease),t._yEase=k?zt(Dt(!0===k?m:k,E.ease)):0,k&&t._yoyo&&!t._repeat&&(k=t._yEase,t._yEase=t._ease,t._ease=k),!R){if(P&&P.render(-1,!0).kill(),g){if(qa(t._startAt=Ut.set(A,ha({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:s(y),startAt:null,delay:0,onUpdate:T,onUpdateParams:b,callbackScope:w,stagger:0},g))),v)if(0<e)O||(t._startAt=0);else if(C)return}else if(x&&C)if(P)O||(t._startAt=0);else if(e&&(v=!1),qa(t._startAt=Ut.set(A,pt(la(_,st),{overwrite:!1,data:"isFromStart",lazy:v&&s(y),immediateRender:v,stagger:0,parent:S}))),v){if(!e)return}else _initTween(t._startAt,B);for(r=la(_,st),p=(l=A[t._pt=0]?Z(A[0]).harness:0)&&_[l.prop],y=C&&s(y)||y&&!C,i=0;i<A.length;i++){if(h=(o=A[i])._gsap||Y(A)[i]._gsap,t._ptLookup[i]=d={},ut[h.id]&&da(),c=z===A?i:z.indexOf(o),l&&!1!==(f=new l).init(o,p||r,t,c,z)&&(t._pt=a=new ee(t._pt,o,f.name,0,1,f.render,f,0,f.priority),f._props.forEach(function(t){d[t]=a}),f.priority&&(u=1)),!l||p)for(n in r)ht[n]&&(f=Jb(n,r,t,c,o,z))?f.priority&&(u=1):d[n]=a=It.call(t,o,n,"get",r[n],c,z,0,_.stringFilter);t._op&&t._op[i]&&t.kill(o,t._op[i]),D&&t._pt&&(Lt=t,F.killTweensOf(o,d,"started"),Lt=0),t._pt&&y&&(ut[h.id]=1)}u&&te(t),t._onInit&&t._onInit(t)}t._from=!R&&!!_.runBackwards,t._onUpdate=T,t._initted=1},Yt=function _parseFuncOrString(t,e,r,i,a){return o(t)?t.call(e,r,i,a):n(t)&&~t.indexOf("random(")?$a(t):t},Nt=ct+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Gt=(Nt+",id,stagger,delay,duration,paused").split(","),Ut=function(A){function Tween(t,e,i,n){var a;"number"==typeof e&&(i.duration=e,e=i,i=null);var o,h,l,f,d,c,_,m,g=(a=A.call(this,n?e:ma(e),i)||this).vars,v=g.duration,y=g.delay,T=g.immediateRender,b=g.stagger,w=g.overwrite,x=g.keyframes,k=g.defaults,C=a.parent,P=(H(t)?p(t[0]):"length"in e)?[t]:yt(t);if(a._targets=P.length?Y(P):M("GSAP target "+t+" not found. https://greensock.com",!G.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=w,x||b||u(v)||u(y)){if(e=a.vars,(o=a.timeline=new Bt({data:"nested",defaults:k||{}})).kill(),o.parent=_assertThisInitialized(a),x)ha(o.vars.defaults,{ease:"none"}),x.forEach(function(t){return o.to(P,t,">")});else{if(f=P.length,_=b?Qa(b):O,r(b))for(d in b)~Nt.indexOf(d)&&((m=m||{})[d]=b[d]);for(h=0;h<f;h++){for(d in l={},e)Gt.indexOf(d)<0&&(l[d]=e[d]);l.stagger=0,m&&pt(l,m),e.yoyoEase&&!e.repeat&&(l.yoyoEase=e.yoyoEase),c=P[h],l.duration=+Yt(v,_assertThisInitialized(a),h,c,P),l.delay=(+Yt(y,_assertThisInitialized(a),h,c,P)||0)-a._delay,!b&&1===f&&l.delay&&(a._delay=y=l.delay,a._start+=y,l.delay=0),o.to(c,l,_(h,c,P))}v=y=0}v||a.duration(v=o.duration())}else a.timeline=0;return!0===w&&(Lt=_assertThisInitialized(a),F.killTweensOf(P),Lt=0),C&&ya(C,_assertThisInitialized(a)),(T||!v&&!x&&a._start===C._time&&s(T)&&function _hasNoPausedAncestors(t){return!t||t._ts&&_hasNoPausedAncestors(t.parent)}(_assertThisInitialized(a))&&"nested"!==C.data)&&(a._tTime=-B,a.render(Math.max(0,-y))),a}_inheritsLoose(Tween,A);var t=Tween.prototype;return t.render=function render(t,e,r){var i,n,a,s,o,u,h,l,f,d=this._time,c=this._tDur,p=this._dur,_=c-B<t&&0<=t?c:t<B?0:t;if(p){if(_!==this._tTime||!t||r||this._startAt&&this._zTime<0!=t<0){if(i=_,l=this.timeline,this._repeat){if(s=p+this._rDelay,(p<(i=aa(_%s))||c===_)&&(i=p),(a=~~(_/s))&&a===_/s&&(i=p,a--),(u=this._yoyo&&1&a)&&(f=this._yEase,i=p-i),o=_t(this._tTime,s),i===d&&!r&&this._initted)return this;a!==o&&(!this.vars.repeatRefresh||u||this._lock||(this._lock=r=1,this.render(s*a,!0).invalidate()._lock=0))}if(!this._initted){if(Aa(this,i,r,e))return this._tTime=0,this;if(p!==this._dur)return this.render(t,e,r)}for(this._tTime=_,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(f||this._ease)(i/p),this._from&&(this.ratio=h=1-h),d||!i||e||bt(this,"onStart"),n=this._pt;n;)n.r(h,n.d),n=n._next;l&&l.render(t<0?t:!i&&u?-B:l._dur*h,e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),bt(this,"onUpdate")),this._repeat&&a!==o&&this.vars.onRepeat&&!e&&this.parent&&bt(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,r),!t&&p||!(t&&0<this._ts||!_&&this._ts<0)||qa(this,1),e||t<0&&!d||_<c&&0<this.timeScale()||(bt(this,_===c?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function _renderZeroDurationTween(t,e,r,i){var n,a=t._zTime<0?0:1,s=e<0?0:1,o=t._rDelay,u=0;if(o&&t._repeat&&(u=gt(0,t._tDur,e),_t(u,o)!==_t(t._tTime,o)&&(a=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!Aa(t,e,i,r))&&(s!==a||i||t._zTime===B||!e&&t._zTime)){for(t._zTime=e||(r?B:0),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=u,r||bt(t,"onStart"),n=t._pt;n;)n.r(s,n.d),n=n._next;!s&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,i),t._onUpdate&&(r||bt(t,"onUpdate")),u&&t._repeat&&!r&&t.parent&&bt(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(t.ratio&&qa(t,1),r||(bt(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}(this,t,e,r);return this},t.targets=function targets(){return this._targets},t.invalidate=function invalidate(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),A.prototype.invalidate.call(this)},t.kill=function kill(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return db(this);if(this.timeline)return this.timeline.killTweensOf(t,e,Lt&&!0!==Lt.vars.overwrite),this;var r,i,a,s,o,u,h,l=this._targets,f=t?yt(t):l,d=this._ptLookup,c=this._pt;if((!e||"all"===e)&&function _arraysMatch(t,e){for(var r=t.length,i=r===e.length;i&&r--&&t[r]===e[r];);return r<0}(l,f))return db(this);for(r=this._op=this._op||[],"all"!==e&&(n(e)&&(o={},_(e,function(t){return o[t]=1}),e=o),e=function _addAliasesToVars(t,e){var r,i,n,a,s=t[0]?Z(t[0]).harness:0,o=s&&s.aliases;if(!o)return e;for(i in r=pt({},e),o)if(i in r)for(n=(a=o[i].split(",")).length;n--;)r[a[n]]=r[i];return r}(l,e)),h=l.length;h--;)if(~f.indexOf(l[h]))for(o in i=d[h],"all"===e?(r[h]=e,s=i,a={}):(a=r[h]=r[h]||{},s=e),s)(u=i&&i[o])&&("kill"in u.d&&!0!==u.d.kill(o)||pa(this,u,"_pt"),delete i[o]),"all"!==a&&(a[o]=1);return this._initted&&!this._pt&&c&&db(this),this},Tween.to=function to(t,e,r){return new Tween(t,e,r)},Tween.from=function from(t,e){return new Tween(t,ca(arguments,1))},Tween.delayedCall=function delayedCall(t,e,r,i){return new Tween(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},Tween.fromTo=function fromTo(t,e,r){return new Tween(t,ca(arguments,2))},Tween.set=function set(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new Tween(t,e)},Tween.killTweensOf=function killTweensOf(t,e,r){return F.killTweensOf(t,e,r)},Tween}(Et);ha(Ut.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),_("staggerTo,staggerFrom,staggerFromTo",function(r){Ut[r]=function(){var t=new Bt,e=vt.call(arguments,0);return e.splice("staggerFromTo"===r?5:4,0,0),t[r].apply(t,e)}});function Ub(t,e,r){return t.setAttribute(e,r)}function ac(t,e,r,i){i.mSet(t,e,i.m.call(i.tween,r,i.mt),i)}var Xt=function _setterPlain(t,e,r){return t[e]=r},jt=function _setterFunc(t,e,r){return t[e](r)},Vt=function _setterFuncWithParam(t,e,r,i){return t[e](i.fp,r)},Zt=function _getSetter(t,e){return o(t[e])?jt:q(t[e])&&t.setAttribute?Ub:Xt},Jt=function _renderPlain(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Ht=function _renderBoolean(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Qt=function _renderComplexString(t,e){var r=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+i,r=r._next;i+=e.c}e.set(e.t,e.p,i,e)},$t=function _renderPropTweens(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},Wt=function _addPluginModifier(t,e,r,i){for(var n,a=this._pt;a;)n=a._next,a.p===i&&a.modifier(t,e,r),a=n},Kt=function _killPropTweensOf(t){for(var e,r,i=this._pt;i;)r=i._next,i.p===t&&!i.op||i.op===t?pa(this,i,"_pt"):i.dep||(e=1),i=r;return!e},te=function _sortPropTweensByPriority(t){for(var e,r,i,n,a=t._pt;a;){for(e=a._next,r=i;r&&r.pr>a.pr;)r=r._next;(a._prev=r?r._prev:n)?a._prev._next=a:i=a,(a._next=r)?r._prev=a:n=a,a=e}t._pt=i},ee=(PropTween.prototype.modifier=function modifier(t,e,r){this.mSet=this.mSet||this.set,this.set=ac,this.m=t,this.mt=r,this.tween=e},PropTween);function PropTween(t,e,r,i,n,a,s,o,u){this.t=e,this.s=i,this.c=n,this.p=r,this.r=a||Jt,this.d=s||this,this.set=o||Xt,this.pr=u||0,(this._next=t)&&(t._prev=this)}_(ct+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",function(t){return st[t]=1}),at.TweenMax=at.TweenLite=Ut,at.TimelineLite=at.TimelineMax=Bt,F=new Bt({sortChildren:!1,defaults:E,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),G.stringFilter=ob;var re={registerPlugin:function registerPlugin(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(t){return function _createPlugin(t){var e=(t=!t.name&&t.default||t).name,r=o(t),i=e&&!r&&t.init?function(){this._props=[]}:t,n={init:O,render:$t,add:It,kill:Kt,modifier:Wt,rawVars:0},a={targetTest:0,get:0,getSetter:Zt,aliases:{},register:0};if(Ct(),t!==i){if(ht[e])return;ha(i,ha(la(t,n),a)),pt(i.prototype,pt(n,la(t,a))),ht[i.prop=e]=i,t.targetTest&&(dt.push(i),st[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}N(e,i),t.register&&t.register(ie,i,ee)}(t)})},timeline:function timeline(t){return new Bt(t)},getTweensOf:function getTweensOf(t,e){return F.getTweensOf(t,e)},getProperty:function getProperty(i,t,e,r){n(i)&&(i=yt(i)[0]);var a=Z(i||{}).get,s=e?ga:fa;return"native"===e&&(e=""),i?t?s((ht[t]&&ht[t].get||a)(i,t,e,r)):function(t,e,r){return s((ht[t]&&ht[t].get||a)(i,t,e,r))}:i},quickSetter:function quickSetter(r,e,i){if(1<(r=yt(r)).length){var n=r.map(function(t){return ie.quickSetter(t,e,i)}),a=n.length;return function(t){for(var e=a;e--;)n[e](t)}}r=r[0]||{};var s=ht[e],o=Z(r),u=s?function(t){var e=new s;c._pt=0,e.init(r,i?t+i:t,c,0,[r]),e.render(1,e),c._pt&&$t(1,c)}:o.set(r,e);return s?u:function(t){return u(r,e,i?t+i:t,o,1)}},isTweening:function isTweening(t){return 0<F.getTweensOf(t,!0).length},defaults:function defaults(t){return t&&t.ease&&(t.ease=Dt(t.ease,E.ease)),ka(E,t||{})},config:function config(t){return ka(G,t||{})},registerEffect:function registerEffect(t){var n=t.name,i=t.effect,e=t.plugins,a=t.defaults,s=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!ht[t]&&!at[t]&&M(n+" effect requires "+t+" plugin.")}),lt[n]=function(t,e,r){return i(yt(t),ha(e||{},a),r)},s&&(Bt.prototype[n]=function(t,e,i){return this.add(lt[n](t,r(e)?e:(i=e)&&{},this),i)})},registerEase:function registerEase(t,e){Pt[t]=Dt(e)},parseEase:function parseEase(t,e){return arguments.length?Dt(t,e):Pt},getById:function getById(t){return F.getById(t)},exportRoot:function exportRoot(t,e){void 0===t&&(t={});var r,i,n=new Bt(t);for(n.smoothChildTiming=s(t.smoothChildTiming),F.remove(n),n._dp=0,n._time=n._tTime=F._time,r=F._first;r;)i=r._next,!e&&!r._dur&&r instanceof Ut&&r.vars.onComplete===r._targets[0]||za(n,r,r._start-r._delay),r=i;return za(F,n,0),n},utils:{wrap:function wrap(e,t,r){var i=t-e;return H(e)?Xa(e,wrap(0,e.length),t):Ha(r,function(t){return(i+(t-e)%i)%i+e})},wrapYoyo:function wrapYoyo(e,t,r){var i=t-e,n=2*i;return H(e)?Xa(e,wrapYoyo(0,e.length-1),t):Ha(r,function(t){return e+(i<(t=(n+(t-e)%n)%n)?n-t:t)})},distribute:Qa,random:Ta,snap:Sa,normalize:function normalize(t,e,r){return Tt(t,e,0,1,r)},getUnit:Ja,clamp:function clamp(e,r,t){return Ha(t,function(t){return gt(e,r,t)})},splitColor:jb,toArray:yt,mapRange:Tt,pipe:function pipe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function unitize(e,r){return function(t){return e(parseFloat(t))+(r||Ja(t))}},interpolate:function interpolate(e,r,t,i){var a=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!a){var s,o,u,h,l,f=n(e),d={};if(!0===t&&(i=1)&&(t=null),f)e={p:e},r={p:r};else if(H(e)&&!H(r)){for(u=[],h=e.length,l=h-2,o=1;o<h;o++)u.push(interpolate(e[o-1],e[o]));h--,a=function func(t){t*=h;var e=Math.min(l,~~t);return u[e](t-e)},t=r}else i||(e=pt(H(e)?[]:{},e));if(!u){for(s in r)It.call(d,e,s,"get",r[s]);a=function func(t){return $t(t,d)||(f?e.p:e)}}}return Ha(t,a)},shuffle:Pa},install:K,effects:lt,ticker:Ot,updateRoot:Bt.updateRoot,plugins:ht,globalTimeline:F,core:{PropTween:ee,globals:N,Tween:Ut,Timeline:Bt,Animation:Et,getCache:Z,_removeLinkedListItem:pa}};_("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return re[t]=Ut[t]}),Ot.add(Bt.updateRoot),c=re.to({},{duration:0});function ec(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r}function gc(t,a){return{name:t,rawVars:1,init:function init(t,i,e){e._onInit=function(t){var e,r;if(n(i)&&(e={},_(i,function(t){return e[t]=1}),i=e),a){for(r in e={},i)e[r]=a(i[r]);i=e}!function _addModifiers(t,e){var r,i,n,a=t._targets;for(r in e)for(i=a.length;i--;)(n=(n=t._ptLookup[i][r])&&n.d)&&(n._pt&&(n=ec(n,r)),n&&n.modifier&&n.modifier(e[r],t,a[i],r))}(t,i)}}}}var ie=re.registerPlugin({name:"attr",init:function init(t,e,r,i,n){for(var a in e)this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,n,0,0,a),this._props.push(a)}},{name:"endArray",init:function init(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},gc("roundProps",Ra),gc("modifiers"),gc("snap",Sa))||re;Ut.version=Bt.version=ie.version="3.2.6",f=1,t()&&Ct();function Rc(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Sc(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function Tc(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function Uc(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)}function Vc(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function Wc(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function Xc(t,e,r){return t.style[e]=r}function Yc(t,e,r){return t.style.setProperty(e,r)}function Zc(t,e,r){return t._gsap[e]=r}function $c(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r}function _c(t,e,r,i,n){var a=t._gsap;a.scaleX=a.scaleY=r,a.renderTransform(n,a)}function ad(t,e,r,i,n){var a=t._gsap;a[e]=r,a.renderTransform(n,a)}function ed(t,e){var r=ae.createElementNS?ae.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ae.createElement(t);return r.style?r:ae.createElement(t)}function fd(t,e,r){var i=getComputedStyle(t);return i[e]||i.getPropertyValue(e.replace(Fe,"-$1").toLowerCase())||i.getPropertyValue(e)||!r&&fd(t,Ne(e)||e,1)||""}function id(){!function _windowExists(){return"undefined"!=typeof window}()||(ne=window,ae=ne.document,se=ae.documentElement,ue=ed("div")||{style:{}},he=ed("div"),Ie=Ne(Ie),qe=Ne(qe),ue.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",fe=!!Ne("perspective"),oe=1)}function jd(t){var e,r=ed("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,n=this.nextSibling,a=this.style.cssText;if(se.appendChild(r),r.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=jd}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return i&&(n?i.insertBefore(this,n):i.appendChild(this)),se.removeChild(r),this.style.cssText=a,e}function kd(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])}function ld(e){var r;try{r=e.getBBox()}catch(t){r=jd.call(e,!0)}return r&&(r.width||r.height)||e.getBBox===jd||(r=jd.call(e,!0)),!r||r.width||r.x||r.y?r:{x:+kd(e,["x","cx","x1"])||0,y:+kd(e,["y","cy","y1"])||0,width:0,height:0}}function md(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!ld(t))}function nd(t,e){if(e){var r=t.style;e in Se&&(e=Ie),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(Fe,"-$1").toLowerCase())):r.removeAttribute(e)}}function od(t,e,r,i,n,a){var s=new ee(t._pt,e,r,0,1,a?Wc:Vc);return(t._pt=s).b=i,s.e=n,t._props.push(r),s}function qd(t,e,r,i){var n,a,s,o,u=parseFloat(r)||0,h=(r+"").trim().substr((u+"").length)||"px",l=ue.style,f=Ee.test(e),d="svg"===t.tagName.toLowerCase(),c=(d?"client":"offset")+(f?"Width":"Height"),p="px"===i,_="%"===i;return i===h||!u||Ge[i]||Ge[h]?u:("px"===h||p||(u=qd(t,e,r,"px")),o=t.getCTM&&md(t),_&&(Se[e]||~e.indexOf("adius"))?aa(u/(o?t.getBBox()[f?"width":"height"]:t[c])*100):(l[f?"width":"height"]=100+(p?h:i),a=~e.indexOf("adius")||"em"===i&&t.appendChild&&!d?t:t.parentNode,o&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==ae&&a.appendChild||(a=ae.body),(s=a._gsap)&&_&&s.width&&f&&s.time===Ot.time?aa(u/s.width*100):(!_&&"%"!==h||(l.position=fd(t,"position")),a===t&&(l.position="static"),a.appendChild(ue),n=ue[c],a.removeChild(ue),l.position="absolute",f&&_&&((s=Z(a)).time=Ot.time,s.width=a[c]),aa(p?n*u/100:n&&u?100/n*u:0))))}function rd(t,e,r,i){var n;return oe||id(),e in Le&&"transform"!==e&&~(e=Le[e]).indexOf(",")&&(e=e.split(",")[0]),Se[e]&&"transform"!==e?(n=Ze(t,i),n="transformOrigin"!==e?n[e]:Je(fd(t,qe))+" "+n.zOrigin+"px"):(n=t.style[e])&&"auto"!==n&&!i&&!~(n+"").indexOf("calc(")||(n=Xe[e]&&Xe[e](t,e,r)||fd(t,e)||$(t,e)||("opacity"===e?1:0)),r&&!~(n+"").indexOf(" ")?qd(t,e,n,r)+r:n}function sd(t,e,r,i){if(!r||"none"===r){var n=Ne(e,t,1),a=n&&fd(t,n,1);a&&a!==r&&(e=n,r=a)}var s,o,u,h,l,f,d,c,p,_,m,g,v=new ee(this._pt,t.style,e,0,1,Qt),y=0,T=0;if(v.b=r,v.e=i,r+="","auto"===(i+="")&&(t.style[e]=i,i=fd(t,e)||i,t.style[e]=r),ob(s=[r,i]),i=s[1],u=(r=s[0]).match(tt)||[],(i.match(tt)||[]).length){for(;o=tt.exec(i);)d=o[0],p=i.substring(y,o.index),l?l=(l+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(l=1),d!==(f=u[T++]||"")&&(h=parseFloat(f)||0,m=f.substr((h+"").length),(g="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),c=parseFloat(d),_=d.substr((c+"").length),y=tt.lastIndex-_.length,_||(_=_||G.units[e]||m,y===i.length&&(i+=_,v.e+=_)),m!==_&&(h=qd(t,e,f,_)||0),v._pt={_next:v._pt,p:p||1===T?p:",",s:h,c:g?g*c:c-h,m:l&&l<4?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===e&&"none"===i?Wc:Vc;return it.test(i)&&(v.e=0),this._pt=v}function ud(t){var e=t.split(" "),r=e[0],i=e[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==i&&"right"!==i||(t=r,r=i,i=t),e[0]=Ue[r]||r,e[1]=Ue[i]||i,e.join(" ")}function vd(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,i,n,a=e.t,s=a.style,o=e.u,u=a._gsap;if("all"===o||!0===o)s.cssText="",i=1;else for(n=(o=o.split(",")).length;-1<--n;)r=o[n],Se[r]&&(i=1,r="transformOrigin"===r?qe:Ie),nd(a,r);i&&(nd(a,Ie),u&&(u.svg&&a.removeAttribute("transform"),Ze(a,1),u.uncache=1))}}function zd(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Ad(t){var e=fd(t,Ie);return zd(e)?je:e.substr(7).match(W).map(aa)}function Bd(t,e){var r,i,n,a,s=t._gsap||Z(t),o=t.style,u=Ad(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?je:u:(u!==je||t.offsetParent||t===se||s.svg||(n=o.display,o.display="block",(r=t.parentNode)&&t.offsetParent||(a=1,i=t.nextSibling,se.appendChild(t)),u=Ad(t),n?o.display=n:nd(t,"display"),a&&(i?r.insertBefore(t,i):r?r.appendChild(t):se.removeChild(t))),e&&6<u.length?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)}function Cd(t,e,r,i,n,a){var s,o,u,h=t._gsap,l=n||Bd(t,!0),f=h.xOrigin||0,d=h.yOrigin||0,c=h.xOffset||0,p=h.yOffset||0,_=l[0],m=l[1],g=l[2],v=l[3],y=l[4],T=l[5],b=e.split(" "),w=parseFloat(b[0])||0,x=parseFloat(b[1])||0;r?l!==je&&(o=_*v-m*g)&&(u=w*(-m/o)+x*(_/o)-(_*T-m*y)/o,w=w*(v/o)+x*(-g/o)+(g*T-v*y)/o,x=u):(w=(s=ld(t)).x+(~b[0].indexOf("%")?w/100*s.width:w),x=s.y+(~(b[1]||b[0]).indexOf("%")?x/100*s.height:x)),i||!1!==i&&h.smooth?(y=w-f,T=x-d,h.xOffset=c+(y*_+T*g)-y,h.yOffset=p+(y*m+T*v)-T):h.xOffset=h.yOffset=0,h.xOrigin=w,h.yOrigin=x,h.smooth=!!i,h.origin=e,h.originIsAbsolute=!!r,t.style[qe]="0px 0px",a&&(od(a,h,"xOrigin",f,w),od(a,h,"yOrigin",d,x),od(a,h,"xOffset",c,h.xOffset),od(a,h,"yOffset",p,h.yOffset)),t.setAttribute("data-svg-origin",w+" "+x)}function Fd(t,e,r){var i=Ja(e);return aa(parseFloat(e)+parseFloat(qd(t,"x",r+"px",i)))+i}function Md(t,e,r,i,a,s){var o,u,h=360,l=n(a),f=parseFloat(a)*(l&&~a.indexOf("rad")?ze:1),d=s?f*s:f-i,c=i+d+"deg";return l&&("short"===(o=a.split("_")[1])&&(d%=h)!==d%180&&(d+=d<0?h:-h),"cw"===o&&d<0?d=(d+36e9)%h-~~(d/h)*h:"ccw"===o&&0<d&&(d=(d-36e9)%h-~~(d/h)*h)),t._pt=u=new ee(t._pt,e,r,i,d,Sc),u.e=c,u.u="deg",t._props.push(r),u}function Nd(t,e,r){var i,n,a,s,o,u,h,l=he.style,f=r._gsap;for(n in l.cssText=getComputedStyle(r).cssText+";position:absolute;display:block;",l[Ie]=e,ae.body.appendChild(he),i=Ze(he,1),Se)(a=f[n])!==(s=i[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(o=Ja(a)!==(h=Ja(s))?qd(r,n,a,h):parseFloat(a),u=parseFloat(s),t._pt=new ee(t._pt,f,n,o,u-o,Rc),t._pt.u=h||0,t._props.push(n));ae.body.removeChild(he)}var ne,ae,se,oe,ue,he,le,fe,de=Pt.Power0,ce=Pt.Power1,pe=Pt.Power2,_e=Pt.Power3,me=Pt.Power4,ge=Pt.Linear,ve=Pt.Quad,ye=Pt.Cubic,Te=Pt.Quart,be=Pt.Quint,we=Pt.Strong,xe=Pt.Elastic,ke=Pt.Back,Me=Pt.SteppedEase,Oe=Pt.Bounce,Ce=Pt.Sine,Pe=Pt.Expo,Ae=Pt.Circ,Se={},ze=180/Math.PI,De=Math.PI/180,Re=Math.atan2,Fe=/([A-Z])/g,Ee=/(?:left|right|width|margin|padding|x)/i,Be=/[\s,\(]\S/,Le={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ie="transform",qe=Ie+"Origin",Ye="O,Moz,ms,Ms,Webkit".split(","),Ne=function _checkPropPrefix(t,e,r){var i=(e||ue).style,n=5;if(t in i&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Ye[n]+t in i););return n<0?null:(3===n?"ms":0<=n?Ye[n]:"")+t},Ge={deg:1,rad:1,turn:1},Ue={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Xe={clearProps:function clearProps(t,e,r,i,n){if("isFromStart"!==n.data){var a=t._pt=new ee(t._pt,e,r,0,0,vd);return a.u=i,a.pr=-10,a.tween=n,t._props.push(r),1}}},je=[1,0,0,1,0,0],Ve={},Ze=function _parseTransform(t,e){var r=t._gsap||new Ft(t);if("x"in r&&!e&&!r.uncache)return r;var i,n,a,s,o,u,h,l,f,d,c,p,_,m,g,v,y,T,b,w,x,k,M,O,C,P,A,S,z,D,R,F,E=t.style,B=r.scaleX<0,L="deg",I=fd(t,qe)||"0";return i=n=a=u=h=l=f=d=c=0,s=o=1,r.svg=!(!t.getCTM||!md(t)),m=Bd(t,r.svg),r.svg&&(O=!r.uncache&&t.getAttribute("data-svg-origin"),Cd(t,O||I,!!O||r.originIsAbsolute,!1!==r.smooth,m)),p=r.xOrigin||0,_=r.yOrigin||0,m!==je&&(T=m[0],b=m[1],w=m[2],x=m[3],i=k=m[4],n=M=m[5],6===m.length?(s=Math.sqrt(T*T+b*b),o=Math.sqrt(x*x+w*w),u=T||b?Re(b,T)*ze:0,(f=w||x?Re(w,x)*ze+u:0)&&(o*=Math.cos(f*De)),r.svg&&(i-=p-(p*T+_*w),n-=_-(p*b+_*x))):(F=m[6],D=m[7],A=m[8],S=m[9],z=m[10],R=m[11],i=m[12],n=m[13],a=m[14],h=(g=Re(F,z))*ze,g&&(O=k*(v=Math.cos(-g))+A*(y=Math.sin(-g)),C=M*v+S*y,P=F*v+z*y,A=k*-y+A*v,S=M*-y+S*v,z=F*-y+z*v,R=D*-y+R*v,k=O,M=C,F=P),l=(g=Re(-w,z))*ze,g&&(v=Math.cos(-g),R=x*(y=Math.sin(-g))+R*v,T=O=T*v-A*y,b=C=b*v-S*y,w=P=w*v-z*y),u=(g=Re(b,T))*ze,g&&(O=T*(v=Math.cos(g))+b*(y=Math.sin(g)),C=k*v+M*y,b=b*v-T*y,M=M*v-k*y,T=O,k=C),h&&359.9<Math.abs(h)+Math.abs(u)&&(h=u=0,l=180-l),s=aa(Math.sqrt(T*T+b*b+w*w)),o=aa(Math.sqrt(M*M+F*F)),g=Re(k,M),f=2e-4<Math.abs(g)?g*ze:0,c=R?1/(R<0?-R:R):0),r.svg&&(m=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!zd(fd(t,Ie)),m&&t.setAttribute("transform",m))),90<Math.abs(f)&&Math.abs(f)<270&&(B?(s*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(o*=-1,f+=f<=0?180:-180)),r.x=((r.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+"px",r.y=((r.yPercent=n&&Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)?0:n)+"px",r.z=a+"px",r.scaleX=aa(s),r.scaleY=aa(o),r.rotation=aa(u)+L,r.rotationX=aa(h)+L,r.rotationY=aa(l)+L,r.skewX=f+L,r.skewY=d+L,r.transformPerspective=c+"px",(r.zOrigin=parseFloat(I.split(" ")[2])||0)&&(E[qe]=Je(I)),r.xOffset=r.yOffset=0,r.force3D=G.force3D,r.renderTransform=r.svg?tr:fe?Ke:He,r.uncache=0,r},Je=function _firstTwoOnly(t){return(t=t.split(" "))[0]+" "+t[1]},He=function _renderNon3DTransforms(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ke(t,e)},Qe="0deg",$e="0px",We=") ",Ke=function _renderCSSTransforms(t,e){var r=e||this,i=r.xPercent,n=r.yPercent,a=r.x,s=r.y,o=r.z,u=r.rotation,h=r.rotationY,l=r.rotationX,f=r.skewX,d=r.skewY,c=r.scaleX,p=r.scaleY,_=r.transformPerspective,m=r.force3D,g=r.target,v=r.zOrigin,y="",T="auto"===m&&t&&1!==t||!0===m;if(v&&(l!==Qe||h!==Qe)){var b,w=parseFloat(h)*De,x=Math.sin(w),k=Math.cos(w);w=parseFloat(l)*De,b=Math.cos(w),a=Fd(g,a,x*b*-v),s=Fd(g,s,-Math.sin(w)*-v),o=Fd(g,o,k*b*-v+v)}_!==$e&&(y+="perspective("+_+We),(i||n)&&(y+="translate("+i+"%, "+n+"%) "),!T&&a===$e&&s===$e&&o===$e||(y+=o!==$e||T?"translate3d("+a+", "+s+", "+o+") ":"translate("+a+", "+s+We),u!==Qe&&(y+="rotate("+u+We),h!==Qe&&(y+="rotateY("+h+We),l!==Qe&&(y+="rotateX("+l+We),f===Qe&&d===Qe||(y+="skew("+f+", "+d+We),1===c&&1===p||(y+="scale("+c+", "+p+We),g.style[Ie]=y||"translate(0, 0)"},tr=function _renderSVGTransforms(t,e){var r,i,n,a,s,o=e||this,u=o.xPercent,h=o.yPercent,l=o.x,f=o.y,d=o.rotation,c=o.skewX,p=o.skewY,_=o.scaleX,m=o.scaleY,g=o.target,v=o.xOrigin,y=o.yOrigin,T=o.xOffset,b=o.yOffset,w=o.forceCSS,x=parseFloat(l),k=parseFloat(f);d=parseFloat(d),c=parseFloat(c),(p=parseFloat(p))&&(c+=p=parseFloat(p),d+=p),d||c?(d*=De,c*=De,r=Math.cos(d)*_,i=Math.sin(d)*_,n=Math.sin(d-c)*-m,a=Math.cos(d-c)*m,c&&(p*=De,s=Math.tan(c-p),n*=s=Math.sqrt(1+s*s),a*=s,p&&(s=Math.tan(p),r*=s=Math.sqrt(1+s*s),i*=s)),r=aa(r),i=aa(i),n=aa(n),a=aa(a)):(r=_,a=m,i=n=0),(x&&!~(l+"").indexOf("px")||k&&!~(f+"").indexOf("px"))&&(x=qd(g,"x",l,"px"),k=qd(g,"y",f,"px")),(v||y||T||b)&&(x=aa(x+v-(v*r+y*n)+T),k=aa(k+y-(v*i+y*a)+b)),(u||h)&&(s=g.getBBox(),x=aa(x+u/100*s.width),k=aa(k+h/100*s.height)),s="matrix("+r+","+i+","+n+","+a+","+x+","+k+")",g.setAttribute("transform",s),w&&(g.style[Ie]=s)};_("padding,margin,Width,Radius",function(e,r){var t="Right",i="Bottom",n="Left",o=(r<3?["Top",t,i,n]:["Top"+n,"Top"+t,i+t,i+n]).map(function(t){return r<2?e+t:"border"+t+e});Xe[1<r?"border"+e:e]=function(e,t,r,i,n){var a,s;if(arguments.length<4)return a=o.map(function(t){return rd(e,t,r)}),5===(s=a.join(" ")).split(a[0]).length?a[0]:s;a=(i+"").split(" "),s={},o.forEach(function(t,e){return s[t]=a[e]=a[e]||a[(e-1)/2|0]}),e.init(t,s,n)}});var er,rr,ir,nr={name:"css",register:id,targetTest:function targetTest(t){return t.style&&t.nodeType},init:function init(t,e,r,i,n){var a,s,o,u,h,l,f,d,c,p,_,m,g,v,y,T=this._props,b=t.style;for(f in oe||id(),e)if("autoRound"!==f&&(s=e[f],!ht[f]||!Jb(f,e,r,i,t,n)))if(h=typeof s,l=Xe[f],"function"===h&&(h=typeof(s=s.call(r,i,t,n))),"string"===h&&~s.indexOf("random(")&&(s=$a(s)),l)l(this,t,f,s,r)&&(y=1);else if("--"===f.substr(0,2))this.add(b,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",s+"",i,n,0,0,f);else{if(a=rd(t,f),u=parseFloat(a),(p="string"===h&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),o=parseFloat(s),f in Le&&("autoAlpha"===f&&(1===u&&"hidden"===rd(t,"visibility")&&o&&(u=0),od(this,b,"visibility",u?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==f&&"transform"!==f&&~(f=Le[f]).indexOf(",")&&(f=f.split(",")[0])),_=f in Se)if(m||((g=t._gsap).renderTransform||Ze(t),v=!1!==e.smoothOrigin&&g.smooth,(m=this._pt=new ee(this._pt,b,Ie,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===f)this._pt=new ee(this._pt,g,"scaleY",g.scaleY,p?p*o:o-g.scaleY),T.push("scaleY",f),f+="X";else{if("transformOrigin"===f){s=ud(s),g.svg?Cd(t,s,0,v,0,this):((c=parseFloat(s.split(" ")[2])||0)!==g.zOrigin&&od(this,g,"zOrigin",g.zOrigin,c),od(this,b,f,Je(a),Je(s)));continue}if("svgOrigin"===f){Cd(t,s,1,v,0,this);continue}if(f in Ve){Md(this,g,f,u,s,p);continue}if("smoothOrigin"===f){od(this,g,"smooth",g.smooth,s);continue}if("force3D"===f){g[f]=s;continue}if("transform"===f){Nd(this,s,t);continue}}else f in b||(f=Ne(f)||f);if(_||(o||0===o)&&(u||0===u)&&!Be.test(s)&&f in b)(d=(a+"").substr((u+"").length))!==(c=(s+"").substr(((o=o||0)+"").length)||(f in G.units?G.units[f]:d))&&(u=qd(t,f,a,c)),this._pt=new ee(this._pt,_?g:b,f,u,p?p*o:o-u,"px"!==c||!1===e.autoRound||_?Rc:Uc),this._pt.u=c||0,d!==c&&(this._pt.b=a,this._pt.r=Tc);else if(f in b)sd.call(this,t,f,a,s);else{if(!(f in t)){L(f,s);continue}this.add(t,f,t[f],s,i,n)}T.push(f)}y&&te(this)},get:rd,aliases:Le,getSetter:function getSetter(t,e,r){var i=Le[e];return i&&i.indexOf(",")<0&&(e=i),e in Se&&e!==qe&&(t._gsap.x||rd(t,"x"))?r&&le===r?"scale"===e?$c:Zc:(le=r||{})&&("scale"===e?_c:ad):t.style&&!q(t.style[e])?Xc:~e.indexOf("-")?Yc:Zt(t,e)},core:{_removeProperty:nd,_getMatrix:Bd}};ie.utils.checkPrefix=Ne,ir=_((er="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(rr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){Se[t]=1}),_(rr,function(t){G.units[t]="deg",Ve[t]=1}),Le[ir[13]]=er+","+rr,_("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");Le[e[1]]=ir[e[0]]}),_("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){G.units[t]="px"}),ie.registerPlugin(nr);var ar=ie.registerPlugin(nr)||ie,sr=ar.core.Tween;e.Back=ke,e.Bounce=Oe,e.CSSPlugin=nr,e.Circ=Ae,e.Cubic=ye,e.Elastic=xe,e.Expo=Pe,e.Linear=ge,e.Power0=de,e.Power1=ce,e.Power2=pe,e.Power3=_e,e.Power4=me,e.Quad=ve,e.Quart=Te,e.Quint=be,e.Sine=Ce,e.SteppedEase=Me,e.Strong=we,e.TimelineLite=Bt,e.TimelineMax=Bt,e.TweenLite=Ut,e.TweenMax=sr,e.default=ar,e.gsap=ar;if (typeof(window)==="undefined"||window!==e){Object.defineProperty(e,"__esModule",{value:!0})} else {delete e.default}});

</script>
<div style="display: none;" class="containerTop to-top" >
  <div class="heart-wrap">
    <div class="heart">
      <div class="tank"></div>
      <svg class="curve" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
          <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
        </defs>
        <g>
          <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(103, 130, 191, 0.5)" />
          <use xlink:href="#gentle-wave" x="48" y="1" fill="rgba(103, 130, 191, 0.3)" />
          <use xlink:href="#gentle-wave" x="48" y="2" fill="rgba(103, 130, 191, 1)" />
        </g>
      </svg>
    </div>
  </div>
	
<svg>
  <clipPath id="myPath" clipPathUnits="objectBoundingBox">
     
     <path d="M0.373,0.967 S0.616,0.866,0.768,0.644 S0.912,0.107,0.739,0 S0.373,0.108,0.373,0.108 S0.166,-0.113,0,-0.002 S-0.159,0.432,-0.021,0.644 S0.373,0.967,0.373,0.967"></path>
	 
	  
  </clipPath>
</svg>
</div>

<script>
	$('.to-top').toTop();
</script>

<script>
$(document).ready(function () {
  let pumpLevels = [25, 30, 45, 0];
  let tankLevels = [25, 45, 70, -20];
  let counter = 0;
  let isAnimating = false;
  
  function pumpHeart() {
    if(isAnimating) {
		alert('点这么快，是心动吗？');
      return;
    }
    
    isAnimating = true;
    //forward
    gsap.to('.heart', {
      translateZ: pumpLevels[counter], 
      duration: 0.5
    });
    
    gsap.to(".curve", {
      bottom: tankLevels[counter],
      transformOrigin: "bottom",
      scaleY: 1,
      duration: 0.5
    })
      gsap.to(".tank", {
      height: counter === 3 ? 0 : tankLevels[counter],
      duration: 0.5
    })
    
    //reverse
    gsap.to(".curve", {
      delay: 0.6,
      bottom: tankLevels[counter],
      transformOrigin: "bottom",
      scaleY: 0.5,
      duration: 0.5
    });
    
    gsap.to('.heart', {

      delay: 0.6,
      translateZ: 0,
      duration: 0.25,
      onComplete: function() {
        isAnimating = false;
      }
    })
    
    if(++counter > 3){
		counter = 0;
		$('.to-top').toTop();
		
	} 
  }
  
  let heart = document.getElementsByClassName('heart')[0];
  heart.addEventListener("click", pumpHeart);
});
</script>






<style>
.vditor-speech {    
	position: absolute;
    display: none;
    background-color: #1d2125;
    border: 1px solid #2ca9e6;
    box-shadow: 0 0.3rem 2rem rgba(0, 255, 149, 0.6);
    border-radius: 3px;
    padding: 6px;
    cursor: pointer;
    color: #b9b9b9;
	margin-top: 20px;
	z-index: 9999;
        }
.vditor-speech--current, .vditor-speech:hover {
            color: #fff
        }
.vditor-speech svg {
            height: 14px;
            width: 14px;
            fill: currentColor;
            display: block;
            stroke-width: 0;
            stroke: currentColor;
        }
</style>
<script>
   if (window.addEventListener) { window.addEventListener("load",dearmsdanread, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanread); }
    else{ window.onload =dearmsdanread; }
	
  function dearmsdanread(){

function speak(text){if(!isBlank(text)){var src="https://api.heycmm.cn/speak/"+text;if(src.length<=2083){var n=document.querySelector(".Audio-speech");if(!n){(n=document.createElement("AUDIO")).className="Audio-speech";}else{document.getElementById("audios").style.display="block";}
n.setAttribute("id","audios");n.setAttribute("src",src);n.setAttribute("controls","controls");n.play()}}else{document.getElementById("audios").pause();document.getElementById("audios").style.display="none"}}
function trim(str){if(str==null){return""}
return str.toString().replace(/(^\s*)|(\s*$)|\r|\n/g,"")}
function isBlank(str){if(str==null||trim(str)==""){return true}
return false}
var play_svg_1='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n'+'<path d="M6 0v32l20-15.977-20-16.023z"></path>\n'+'</svg>\n';var pause_svg_1='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n'+'<path d="M11 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1zM27 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1z"></path>\n'+'</svg>\n';var speechDom=document.querySelector(".vditor-speech");if(!speechDom){speechDom=document.createElement("div");speechDom.className="vditor-speech";document.body.insertAdjacentElement("beforeend",speechDom);speechDom.onclick=function(){if(speechDom.className==="vditor-speech"){var utterThis=speechDom.getAttribute("data-text");
speak(utterThis);speechDom.className="vditor-speech vditor-speech--current";speechDom.innerHTML=pause_svg_1;}
var selection=window.getSelection();selection.removeAllRanges();selection.addRange(window.vditorSpeechRange);};document.body.addEventListener("click",function(){if(getSelection().toString().trim()===""&&speechDom.style.display==="block"){speechDom.className="vditor-speech";speechSynthesis.cancel();speechDom.style.display="none";}});}
document.addEventListener("mouseup",function(event){var text=getSelection().toString().trim();speechSynthesis.cancel();if(getSelection().toString().trim()===""){if(speechDom.style.display==="block"){speechDom.className="vditor-speech";speechDom.style.display="none";}
return;}
window.vditorSpeechRange=getSelection().getRangeAt(0).cloneRange();var rect=getSelection().getRangeAt(0).getBoundingClientRect();speechDom.innerHTML=play_svg_1;speechDom.style.display="block";speechDom.style.top=(rect.top+rect.height+document.querySelector("html").scrollTop-20)+"px";speechDom.style.left=(event.screenX+2)+"px";speechDom.setAttribute("data-text",text);});
	
  }
	
	// 。。。
	
/*	
	   var play_svg_1 = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n' +
       '<path d="M6 0v32l20-15.977-20-16.023z"></path>\n' +
       '</svg>\n';
   var pause_svg_1 = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">\n' +
       '<path d="M11 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1zM27 0h-6c-0.553 0-1 0.448-1 1v30c0 0.553 0.447 1 1 1h6c0.553 0 1-0.447 1-1v-30c0-0.552-0.447-1-1-1z"></path>\n' +
       '</svg>\n';
    var speechDom = document.querySelector(".vditor-speech");
    var lang = "zh_CN";
    if (!speechDom) {
        speechDom = document.createElement("div");
        speechDom.className = "vditor-speech";
        document.body.insertAdjacentElement("beforeend", speechDom);
        var getVoice = function () {
            var voices = speechSynthesis.getVoices();
            var currentVoice;
            var defaultVoice;
            voices.forEach(function (item) {
              if (item.lang === lang.replace("_", "-")) {
                    currentVoice = item;
                }
                if (item["default"]) {
                    defaultVoice = item;
                }
            });
            if (!currentVoice) {
                currentVoice = defaultVoice;
            }
            return currentVoice;
        };
        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = getVoice;
        }
        var voice_1 = getVoice();
        speechDom.onclick = function () {
            if (speechDom.className === "vditor-speech") {
                var utterThis = new SpeechSynthesisUtterance(speechDom.getAttribute("data-text"));
                utterThis.voice = voice_1;
                utterThis.onend = function () {
                    speechDom.className = "vditor-speech";
                    speechSynthesis.cancel();
                    speechDom.innerHTML = play_svg_1;
                };
                speechSynthesis.speak(utterThis);
                speechDom.className = "vditor-speech vditor-speech--current";
                speechDom.innerHTML = pause_svg_1;
            }
            else {
                if (speechSynthesis.speaking) {
                    if (speechSynthesis.paused) {
                        speechSynthesis.resume();
                        speechDom.innerHTML = pause_svg_1;
                    }
                    else {
                        speechSynthesis.pause();
                        speechDom.innerHTML = play_svg_1;
                    }
                }
            }
            var selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(window.vditorSpeechRange);
        };
        document.body.addEventListener("click", function () {
            if (getSelection().toString().trim() === "" && speechDom.style.display === "block") {
                speechDom.className = "vditor-speech";
                speechSynthesis.cancel();
                speechDom.style.display = "none";
            }
        });
    }
   document.addEventListener("mouseup", function (event) {
        var text = getSelection().toString().trim();
        speechSynthesis.cancel();
        if (getSelection().toString().trim() === "") {
            if (speechDom.style.display === "block") {
                speechDom.className = "vditor-speech";
                speechDom.style.display = "none";
            }
            return;
        }
        window.vditorSpeechRange = getSelection().getRangeAt(0).cloneRange();
        var rect = getSelection().getRangeAt(0).getBoundingClientRect();
        speechDom.innerHTML = play_svg_1;
        speechDom.style.display = "block";
        speechDom.style.top = (rect.top + rect.height + document.querySelector("html").scrollTop - 20) + "px";
        speechDom.style.left = (event.screenX + 2) + "px";
        speechDom.setAttribute("data-text", text);
    });*/
</script>








<style>
	.navme>li>a:hover, .navme>li>a:focus, .navme>li>a.active{
    background-color: ;
    border-left: 5px solid ;
	}
	.navme > li > div{
    background-color: ;
	}
	.navme >li > div> ul> li:hover{
    background-color: !important
	}
</style>

<script type="text/javascript"> 
	
	
	
	
	function dearmsdanfooter() {
	//https://img.xjh.me/random_img.php?type=bg&ctype=nature&return=302
	/* 设置 背景 */
	
		$(".dearmsdan-bg").css("background-image","url('')");
		$(".dearmsdan-bg").css("opacity","0.3");
	
   }


   if (window.addEventListener) { window.addEventListener("load",dearmsdanfooter, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanfooter); }
    else{ window.onload =dearmsdanfooter; }
     
</script>



<script src="/js/diy/date.js"></script>
<script src="/js/diy/particleCanvas.js"></script>
	

<script>
dearmsdanDate();
function dearmsdanDate() {
  document.write('<a href="#" style="display:none" target="_blank"><div id="date"></div><font color="#DF0A10">星期<span id="wk"></span></font>&nbsp;<span id="clk"></span><br />农历<span id="nongli"></span></a>')
  cal_u()
  cal_s()
  setInterval("cal_s()", 999)
}


var season = 0;  // 四季判断标识
var festival = [];  // 节日标识
var dearmsdanCanvas = null;  // 自定义画布标识
(function(d){
var traditional,month,date;
traditional = d[0];
month = d[1];
date = d[2];
	/* console.log("元旦快乐"+month+ '===='+date); */
	if(month == 1 && date == 1){
	   var fv = ['元旦快乐',1.1];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	  };
	
	/* t春节 */
var arr = ['正月初一','正月初二','正月初三','正月初四','正月初五','正月初六','正月初七','正月初八','正月初九','正月初十']; 
	for(var i=0; i <= arr.length; i++){
		if(traditional == arr[i]){
			var fv = ['新年快乐',2.1];
			var festival = function(){
				return fv;
			}
			this.festival = festival();
	   }
	}
	/* t情人节 */
	if(month == 2 && date == 14){
	   var fv = ['情人节快乐',2.14];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	   }
	/* f植树节 */
	if(month == 3 && date == 12){
	   		console.log("植树节"+month+ '====' +date);
	   }
	/* f愚人节 */
	if(month == 4 && date == 1){
	   		console.log("愚人节"+month+ '====' +date);
	   }
	/* t清明节 */
	if ((month == 4) && ((date == 4) || (date == 5) || (date == 6))){
	   var fv = ['清明节安康',4.4];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	}
	/* f劳动节 */
	if(month == 5 && date == 1){
	   		console.log("劳动节"+month+ '====' +date);
	   }
	/* t儿童节 */
	if(month == 6 && date == 1){
	   var fv = ['儿童快乐',6.1];
	   var festival = function(){
		   return fv;
	   }
	   this.festival = festival();
	   }
	/* f端午节 */
	if(traditional == '五月初五'){
	   		console.log("端午节"+month+ '====' +date);
	   }
	/* t七夕 */
	if(traditional == '七月初七'){
		   var fv = ['七夕快乐',7.7];
		   var festival = function(){
			   return fv;
		   }
		   this.festival = festival();
	   }
	/* f教师节 */
	if(month == 9 && date == 10){
	   		console.log("教师节"+month+ '====' +date);
	   }
	/* f国庆节、国庆、中秋双庆 */
	if(month == 10 && date == 1){
		if(traditional == '八月十五'){
	   		console.log("国庆节、中秋节双庆"+month+ '====' +date);
		   }else{
			   console.log("国庆节"+month+ '====' +date);
		   }
	   }
	/* f中秋 */
	if(traditional == '八月十五'){
		if(month == 10 && date == 1){
			
		}else{
			console.log("中秋节"+month+ '====' +date);
		}
	   }
	/* f重阳节 */
	if(traditional == '九月初九'){
	   		console.log("重阳节"+month+ '====' +date);
	   }
	/* f万圣节 */
	if(month == 11 && date == 1){
	   		console.log("万圣节"+month+ '====' +date);
	   }
	/* f感恩节 */
	if(month == 11 && date == 26){
	   		console.log("感恩节"+month+ '====' +date);
	   }
	/* f平安节 */
	if(month == 12 && date == 24){
	   		console.log("平安夜"+month+ '====' +date);
	   }
	/* f圣诞节 */
	if(month == 12 && date == 25){
	   		console.log("圣诞节"+month+ '====' +date);
	   }
	
	
	
	/*console.log("春季"+month+ '====' +date);*/
	if(month >= 1 && month <= 3){
		var cun = 1;
		var season1 = function(){
        return cun;
    	}
		season = season1();
		
	   }
	/*console.log("夏季"+month+ '====' +date);*/
	if(month >= 4 && month <= 6){
		var cun = 2;
		var season1 = function(){
        return cun;
    	}
		season = season1();
	   }
	/*console.log("秋季"+month+ '====' +date);*/
	if(month >= 7 && month <= 9){
		var cun = 3;
		var season1 = function(){
        return cun;
    	}
		season = season1();
		
	   }
	/*console.log("冬季"+month+ '====' +date);*/
	if(month >= 10 && month <= 12){
		var cun = 4;
		var season1 = function(){
        return cun;
    	}
		season = season1();
	   }
	
})(arrdate);


	//console.log(season);
$(".dearmsdan-festival").attr("id","dearmsdanSeason");
if(season == 1){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/flake.png"
	},
	"number": 5,
	"op": {
		"min": 1,
		"max": 1
	},
	"size": {
		"min": 40,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 2){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/watermelon.png"
	},
	"number": 8,
	"op": {
		"min": 0.4,
		"max": 1
	},
	"size": {
		"min": 30,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 2,
		"max": 2
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 0.8,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 3){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/butterfly.png"
	},
	"number": 30,
	"op": {
		"min": 0.5,
		"max": 1
	},
	"size": {
		"min": 8,
		"max": 22
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}
if(season == 4){
var particleCanvas = new particleCanvas("dearmsdanSeason", [{
	"type": {
		"typeName": "image",
		"url": "/resources/season/snowflake.png"
	},
	"number": 50,
	"op": {
		"min": 0.1,
		"max": 1
	},
	"size": {
		"min": 20,
		"max": 60
	},
	"zoom": {
		"min": 1,
		"max": 1
	},
	"speed": {
		"min": 1,
		"max": 1
	},
	"angle": {
		"value": 150,
		"float": 50
	},
	"rota": {
		"value": 30,
		"speed": 1.6,
		"floatValue": 120,
		"floatSpeed": 2
	},
	"reIn": "reverseDirection"
}]);
}

</script>



















<style>
	.navred>li>a:hover, .navred>li>a:focus, .navred>li>a.active{
    background-color: rgb(255, 210, 210);
    border-left: 5px solid rgb(222, 41, 41);
	}
	.navred > li > div{
    background-color: #e2a4a4;
	}
	.navred >li > div> ul> li:hover{
    background-color: #f6abab!important
	}
</style>
<script>
if(festival[1] == 1.1){
console.log(festival[0]);
// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 135, 135, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','#ffd1d1');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navred');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 0, 0, 0.5)');
	
	
	
$(".dearmsdan-festival").attr("id","c");
	var w = c.width = window.innerWidth,
		h = c.height = window.innerHeight,
		ctx = c.getContext( '2d' ),
		
		hw = w / 2, // half-width
		hh = h / 2,
		
		opts = {
			strings: [ '元旦到了！' , '用简单装饰祝福你，元旦快乐！','新年新气象~' ],
			charSize: 22,
			charSpacing: 35,
			lineHeight: 50,
			
			cx: w / 2,
			cy: h / 2,
			
			fireworkPrevPoints: 10,
			fireworkBaseLineWidth: 5,
			fireworkAddedLineWidth: 8,
			fireworkSpawnTime: 200,
			fireworkBaseReachTime: 30,
			fireworkAddedReachTime: 30,
			fireworkCircleBaseSize: 20,
			fireworkCircleAddedSize: 10,
			fireworkCircleBaseTime: 30,
			fireworkCircleAddedTime: 30,
			fireworkCircleFadeBaseTime: 10,
			fireworkCircleFadeAddedTime: 5,
			fireworkBaseShards: 5,
			fireworkAddedShards: 5,
			fireworkShardPrevPoints: 3,
			fireworkShardBaseVel: 4,
			fireworkShardAddedVel: 2,
			fireworkShardBaseSize: 3,
			fireworkShardAddedSize: 3,
			gravity: .1,
			upFlow: -.1,
			letterContemplatingWaitTime: 360,
			balloonSpawnTime: 20,
			balloonBaseInflateTime: 10,
			balloonAddedInflateTime: 10,
			balloonBaseSize: 20,
			balloonAddedSize: 20,
			balloonBaseVel: .4,
			balloonAddedVel: .4,
			balloonBaseRadian: -( Math.PI / 2 - .5 ),
			balloonAddedRadian: -1,
		},
		calc = {
			totalWidth: opts.charSpacing * Math.max( opts.strings[0].length, opts.strings[1].length )
		},
		
		Tau = Math.PI * 2,
		TauQuarter = Tau / 4,
		
		letters = [];

ctx.font = opts.charSize + 'px Verdana';

function Letter( char, x, y ){
	this.char = char;
	this.x = x;
	this.y = y;
	
	this.dx = -ctx.measureText( char ).width / 2;
	this.dy = +opts.charSize / 2;
	
	this.fireworkDy = this.y - hh;
	
	var hue = x / calc.totalWidth * 360;
	
	this.color = 'hsl(hue,80%,50%)'.replace( 'hue', hue );
	this.lightAlphaColor = 'hsla(hue,80%,light%,alp)'.replace( 'hue', hue );
	this.lightColor = 'hsl(hue,80%,light%)'.replace( 'hue', hue );
	this.alphaColor = 'hsla(hue,80%,50%,alp)'.replace( 'hue', hue );
	
	this.reset();
}
Letter.prototype.reset = function(){
	
	this.phase = 'firework';
	this.tick = 0;
	this.spawned = false;
	this.spawningTime = opts.fireworkSpawnTime * Math.random() |0;
	this.reachTime = opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random() |0;
	this.lineWidth = opts.fireworkBaseLineWidth + opts.fireworkAddedLineWidth * Math.random();
	this.prevPoints = [ [ 0, hh, 0 ] ];
}
Letter.prototype.step = function(){
	
	if( this.phase === 'firework' ){
		
		if( !this.spawned ){
			
			++this.tick;
			if( this.tick >= this.spawningTime ){
				
				this.tick = 0;
				this.spawned = true;
			}
			
		} else {
			
			++this.tick;
			
			var linearProportion = this.tick / this.reachTime,
					armonicProportion = Math.sin( linearProportion * TauQuarter ),
					
					x = linearProportion * this.x,
					y = hh + armonicProportion * this.fireworkDy;
			
			if( this.prevPoints.length > opts.fireworkPrevPoints )
				this.prevPoints.shift();
			
			this.prevPoints.push( [ x, y, linearProportion * this.lineWidth ] );
			
			var lineWidthProportion = 1 / ( this.prevPoints.length - 1 );
			
			for( var i = 1; i < this.prevPoints.length; ++i ){
				
				var point = this.prevPoints[ i ],
						point2 = this.prevPoints[ i - 1 ];
					
				ctx.strokeStyle = this.alphaColor.replace( 'alp', i / this.prevPoints.length );
				ctx.lineWidth = point[ 2 ] * lineWidthProportion * i;
				ctx.beginPath();
				ctx.moveTo( point[ 0 ], point[ 1 ] );
				ctx.lineTo( point2[ 0 ], point2[ 1 ] );
				ctx.stroke();
			
			}
			
			if( this.tick >= this.reachTime ){
				
				this.phase = 'contemplate';
				
				this.circleFinalSize = opts.fireworkCircleBaseSize + opts.fireworkCircleAddedSize * Math.random();
				this.circleCompleteTime = opts.fireworkCircleBaseTime + opts.fireworkCircleAddedTime * Math.random() |0;
				this.circleCreating = true;
				this.circleFading = false;
				
				this.circleFadeTime = opts.fireworkCircleFadeBaseTime + opts.fireworkCircleFadeAddedTime * Math.random() |0;
				this.tick = 0;
				this.tick2 = 0;
				
				this.shards = [];
				
				var shardCount = opts.fireworkBaseShards + opts.fireworkAddedShards * Math.random() |0,
						angle = Tau / shardCount,
						cos = Math.cos( angle ),
						sin = Math.sin( angle ),
						
						x = 1,
						y = 0;
				
				for( var i = 0; i < shardCount; ++i ){
					var x1 = x;
					x = x * cos - y * sin;
					y = y * cos + x1 * sin;
					
					this.shards.push( new Shard( this.x, this.y, x, y, this.alphaColor ) );
				}
			}
			
		}
	} else if( this.phase === 'contemplate' ){
		
		++this.tick;
		
		if( this.circleCreating ){
			
			++this.tick2;
			var proportion = this.tick2 / this.circleCompleteTime,
					armonic = -Math.cos( proportion * Math.PI ) / 2 + .5;
			
			ctx.beginPath();
			ctx.fillStyle = this.lightAlphaColor.replace( 'light', 50 + 50 * proportion ).replace( 'alp', proportion );
			ctx.beginPath();
			ctx.arc( this.x, this.y, armonic * this.circleFinalSize, 0, Tau );
			ctx.fill();
			
			if( this.tick2 > this.circleCompleteTime ){
				this.tick2 = 0;
				this.circleCreating = false;
				this.circleFading = true;
			}
		} else if( this.circleFading ){
		
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			++this.tick2;
			var proportion = this.tick2 / this.circleFadeTime,
					armonic = -Math.cos( proportion * Math.PI ) / 2 + .5;
			
			ctx.beginPath();
			ctx.fillStyle = this.lightAlphaColor.replace( 'light', 100 ).replace( 'alp', 1 - armonic );
			ctx.arc( this.x, this.y, this.circleFinalSize, 0, Tau );
			ctx.fill();
			
			if( this.tick2 >= this.circleFadeTime )
				this.circleFading = false;
			
		} else {
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
		}
		
		for( var i = 0; i < this.shards.length; ++i ){
			
			this.shards[ i ].step();
			
			if( !this.shards[ i ].alive ){
				this.shards.splice( i, 1 );
				--i;
			}
		}
		
		if( this.tick > opts.letterContemplatingWaitTime ){
			
			this.phase = 'balloon';
			
			this.tick = 0;
			this.spawning = true;
			this.spawnTime = opts.balloonSpawnTime * Math.random() |0;
			this.inflating = false;
			this.inflateTime = opts.balloonBaseInflateTime + opts.balloonAddedInflateTime * Math.random() |0;
			this.size = opts.balloonBaseSize + opts.balloonAddedSize * Math.random() |0;
			
			var rad = opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random(),
					vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();
			
			this.vx = Math.cos( rad ) * vel;
			this.vy = Math.sin( rad ) * vel;
		}
	} else if( this.phase === 'balloon' ){
			
		ctx.strokeStyle = this.lightColor.replace( 'light', 80 );
		
		if( this.spawning ){
			
			++this.tick;
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			if( this.tick >= this.spawnTime ){
				this.tick = 0;
				this.spawning = false;
				this.inflating = true;	
			}
		} else if( this.inflating ){
			
			++this.tick;
			
			var proportion = this.tick / this.inflateTime,
			    x = this.cx = this.x,
					y = this.cy = this.y - this.size * proportion;
			
			ctx.fillStyle = this.alphaColor.replace( 'alp', proportion );
			ctx.beginPath();
			generateBalloonPath( x, y, this.size * proportion );
			ctx.fill();
			
			ctx.beginPath();
			ctx.moveTo( x, y );
			ctx.lineTo( x, this.y );
			ctx.stroke();
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.x + this.dx, this.y + this.dy );
			
			if( this.tick >= this.inflateTime ){
				this.tick = 0;
				this.inflating = false;
			}
			
		} else {
			
			this.cx += this.vx;
			this.cy += this.vy += opts.upFlow;
			
			ctx.fillStyle = this.color;
			ctx.beginPath();
			generateBalloonPath( this.cx, this.cy, this.size );
			ctx.fill();
			
			ctx.beginPath();
			ctx.moveTo( this.cx, this.cy );
			ctx.lineTo( this.cx, this.cy + this.size );
			ctx.stroke();
			
			ctx.fillStyle = this.lightColor.replace( 'light', 70 );
			ctx.fillText( this.char, this.cx + this.dx, this.cy + this.dy + this.size );
			
			if( this.cy + this.size < -hh || this.cx < -hw || this.cy > hw  )
				this.phase = 'done';
			
		}
	}
}
function Shard( x, y, vx, vy, color ){
	
	var vel = opts.fireworkShardBaseVel + opts.fireworkShardAddedVel * Math.random();
	
	this.vx = vx * vel;
	this.vy = vy * vel;
	
	this.x = x;
	this.y = y;
	
	this.prevPoints = [ [ x, y ] ];
	this.color = color;
	
	this.alive = true;
	
	this.size = opts.fireworkShardBaseSize + opts.fireworkShardAddedSize * Math.random();
}
Shard.prototype.step = function(){
	
	this.x += this.vx;
	this.y += this.vy += opts.gravity;
	
	if( this.prevPoints.length > opts.fireworkShardPrevPoints )
		this.prevPoints.shift();
	
	this.prevPoints.push( [ this.x, this.y ] );
	
	var lineWidthProportion = this.size / this.prevPoints.length;
	
	for( var k = 0; k < this.prevPoints.length - 1; ++k ){
		
		var point = this.prevPoints[ k ],
				point2 = this.prevPoints[ k + 1 ];
		
		ctx.strokeStyle = this.color.replace( 'alp', k / this.prevPoints.length );
		ctx.lineWidth = k * lineWidthProportion;
		ctx.beginPath();
		ctx.moveTo( point[ 0 ], point[ 1 ] );
		ctx.lineTo( point2[ 0 ], point2[ 1 ] );
		ctx.stroke();
		
	}
	
	if( this.prevPoints[ 0 ][ 1 ] > hh )
		this.alive = false;
}
function generateBalloonPath( x, y, size ){
	
	ctx.moveTo( x, y );
	ctx.bezierCurveTo( x - size / 2, y - size / 2,
									 	 x - size / 4, y - size,
									   x,            y - size );
	ctx.bezierCurveTo( x + size / 4, y - size,
									   x + size / 2, y - size / 2,
									   x,            y );
}

function anim(){
	
	window.requestAnimationFrame( anim );
	
	ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
	ctx.fillRect( 0, 0, w, h );
	
	ctx.translate( hw, hh );
	
	var done = true;
	for( var l = 0; l < letters.length; ++l ){
		
		letters[ l ].step();
		if( letters[ l ].phase !== 'done' )
			done = false;
	}
	
	ctx.translate( -hw, -hh );
	
	if( done )
		for( var l = 0; l < letters.length; ++l )
			letters[ l ].reset();
}

for( var i = 0; i < opts.strings.length; ++i ){
	for( var j = 0; j < opts.strings[ i ].length; ++j ){
		letters.push( new Letter( opts.strings[ i ][ j ], 
														j * opts.charSpacing + opts.charSpacing / 2 - opts.strings[ i ].length * opts.charSize / 2,
														i * opts.lineHeight + opts.lineHeight / 2 - opts.strings.length * opts.lineHeight / 2 ) );
	}
}

anim();

window.addEventListener( 'resize', function(){
	
	w = c.width = window.innerWidth;
	h = c.height = window.innerHeight;
	
	hw = w / 2;
	hh = h / 2;
	
	ctx.font = opts.charSize + 'px Verdana';
})
	
}
</script>

	



<style>
</style>
<script>
if(festival[1] == 2.1){
	console.log(festival[0]);

// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 135, 135, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','#ffd1d1');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navred');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 0, 0, 0.5)');
	
	var ctx = document.querySelector('.dearmsdan-festival').getContext('2d')
ctx.canvas.width = window.innerWidth
ctx.canvas.height = window.innerHeight

var sparks = []
var fireworks = []
var i = 20; while(i--) {
   fireworks.push(
      new Firework(Math.random()*window.innerWidth, window.innerHeight*Math.random())
   )
}

render()
function render() {
   setTimeout(render, 1000/60)
   ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
   ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height)
   for(var firework of fireworks) {
      if(firework.dead) continue
      firework.move()
      firework.draw()
   }
   for(var spark of sparks) {
      if(spark.dead) continue
      spark.move()
      spark.draw()
   }
   
   if(Math.random() < 0.05) {
      fireworks.push(new Firework())
   }
}

function Spark(x, y, color) {
   this.x = x
   this.y = y
   this.dir = Math.random() * (Math.PI*2)
   this.dead = false
   this.color = color
   this.speed = Math.random() * 3 + 3;
   this.walker = new Walker({ radius: 20, speed: 0.25 })
   this.gravity = 0.25
   this.dur = this.speed / 0.1
   this.move = function() {
      this.dur--
      if(this.dur < 0) this.dead = true
      
      if(this.speed < 0) return
      if(this.speed > 0) this.speed -= 0.1
      var walk = this.walker.step()
      this.x += Math.cos(this.dir + walk) * this.speed
      this.y += Math.sin(this.dir + walk) * this.speed
      this.y += this.gravity
      this.gravity += 0.05
      
   }
   this.draw = function() {
      drawCircle(this.x, this.y, 3, this.color)
   }
}

function Firework(x, y) {
   this.xmove = new Walker({radius: 10, speed: 0.5})
   this.x = x || Math.random() * ctx.canvas.width
   this.y = y || ctx.canvas.height
   this.height = Math.random()*ctx.canvas.height/2
   this.dead = false
   this.color = randomColor()
   
   this.move = function() {
      this.x += this.xmove.step()
      if(this.y > this.height) this.y -= 1; 
      else this.burst()
      
   }
   this.draw = function() {
      drawCircle(this.x, this.y, 1, this.color)
   }
   this.burst = function() {
      this.dead = true
      var i = 100; while(i--) sparks.push(new Spark(this.x, this.y, this.color))
   }
}

function drawCircle(x, y, radius, color) {
   color = color || '#FFF'
   ctx.fillStyle = color
   ctx.fillRect(x-radius/2, y-radius/2, radius, radius)
}

function randomColor(){
   return ['#ff6767','#ff0000','#ff8800','#ff00fc','#66cbe1'][Math.floor(Math.random() * 5)];
}

function Walker(options){
   this.step = function(){
      this.direction = Math.sign(this.target) * this.speed
      this.value += this.direction
      this.target
         ? this.target -= this.direction
         : (this.value)
            ? (this.wander) 
               ? this.target = this.newTarget() 
               : this.target = -this.value
            : this.target = this.newTarget()  
      return this.direction
   }
      
   this.newTarget = function() {
      return Math.round(Math.random()*(this.radius*2)-this.radius)
   }
   
   this.start = 0
   this.value = 0
   this.radius = options.radius
   this.target = this.newTarget()
   this.direction = Math.sign(this.target)
   this.wander = options.wander
   this.speed = options.speed || 1
}

} // end
</script>




<style>
	.navfen>li>a:hover, .navfen>li>a:focus, .navfen>li>a.active{
    background-color: rgb(255, 158, 180);
    border-left: 5px solid rgb(222, 41, 41);
	}
	.navfen > li > div{
    background-color: #e2a4a4;
	}
	.navfen >li > div> ul> li:hover{
    background-color: #f6abab!important
	}
canvas#valentinesDay {
  display: block;
  background: #ee9ca7;  /* fallback for old browsers */
  background: -webkit-linear-gradient(to bottom, #ffdde1, #ee9ca7);  /* Chrome 10-25, Safari 5.1-6 */
  background: linear-gradient(to bottom, #ffdde1, #ee9ca7); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}
</style>
<script>
if(festival[1] == 2.14 || festival[1] == 7.7){
	console.log(festival[0]);
// 超链接
$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(255, 204, 223, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','rgba(255, 204, 223, 0.8)');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navfen');
// bg
$('.dearmsdan-bg').css('background-color','rgba(255, 136, 181, 1)');
	
	
(function () {
  'use strict';
  window.addEventListener('load', function () {
$(".dearmsdan-festival").attr("id","valentinesDay");
    var canvas = document.getElementById('valentinesDay');

    if (!canvas || !canvas.getContext) {
      return false;
    }

    /********************
      Random Number
    ********************/

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1) + min);
    }

    /********************
      Var
    ********************/

    // canvas 
    var ctx = canvas.getContext('2d');
    var X = canvas.width = window.innerWidth;
    var Y = canvas.height = window.innerHeight;

    // heart
    var heartNum = 1;
    var hearts = [];
    var miniHeartNum = 100;
    var miniHearts =[];

    var rad = Math.PI / 180;
    var GRAVITY = 0.01;

    /********************
      Animation
    ********************/

    window.requestAnimationFrame =
      window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function (cb) {
        setTimeout(cb, 17);
      };

    /********************
      MiniHeart
    ********************/
    
    function MiniHeart(ctx, x, y, r) {
      this.ctx = ctx;
      this.init(x, y, r);
    }

    MiniHeart.prototype.init = function (x, y, r) {
      this.ctx = ctx;
      this.r = r;
      this.x1 = x;
      this.y1 = y;
      this.a = rand(0, 360);
      this.num = 22.5;
      this.v = {
        x: rand(-6, 6) * Math.random(),
        y: rand(-6, 6) * Math.random()
      };
      this.x2 = this.x1 + this.r * Math.cos(this.a * rad);
      this.y2 = this.y1 + this.r * Math.sin(this.a * rad);
      this.cx1 = this.x1 + this.r * Math.cos((this.a + this.num) * rad);
      this.cy1 = this.y1 + this.r * Math.sin((this.a + this.num) * rad);
      this.cx2 = this.x1 + this.r * Math.cos((this.a - this.num) * rad);
      this.cy2 = this.y1 + this.r * Math.sin((this.a - this.num) * rad);
      this.chord = 2 * this.r * Math.sin(this.num * rad / 2);
    };

    MiniHeart.prototype.draw = function () {
      ctx = this.ctx;
      ctx.save();
      ctx.beginPath();
      ctx.fillStyle = 'rgb(251, 125, 175)';
      ctx.strokeStyle = 'rgb(251, 125, 175)';
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx1, this.cy1, this.chord, (270 + this.a) * rad, (270 + this.a + 225) * rad);
      ctx.lineTo(this.x1, this.y1);
      ctx.closePath();
      ctx.fill();
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx2, this.cy2, this.chord, (90 + this.a) * rad, (90 + this.a + 135) * rad, true);
      ctx.lineTo(this.x1, this.y1);
      ctx.closePath();
      ctx.fill();
      ctx.stroke();
      ctx.restore();
    };
    
    MiniHeart.prototype.wrapPosition = function() {
      if (this.y1 > Y || this.x1 < 0 || this.x1 > X) {
        this.init(X / 2, Y / 2, rand(5, 30));
      }
    };

    MiniHeart.prototype.updatePosition = function() {
      this.v.y += GRAVITY;
      this.x1 += this.v.x;
      this.x2 += this.v.x;
      this.cx1 += this.v.x;
      this.cx2 += this.v.x;
      this.y1 += this.v.y;
      this.y2 += this.v.y;
      this.cy1 += this.v.y;
      this.cy2 += this.v.y;
    };

    MiniHeart.prototype.render = function () {
      this.updatePosition();
      this.wrapPosition();
      this.draw();
    };

    /********************
      Heart
    ********************/

    function Heart(ctx, x, y, r) {
      this.ctx = ctx;
      this.init(x, y, r);
    }

    Heart.prototype.init = function (x, y, r) {
      this.ctx = ctx;
      this.r = r;
      this.x1 = x;
      this.y1 = y + this.r / 1.5
      this.a = -90;
      this.num = 22.5;
      this.color = {
        r: 251,
        g: 125,
        b: 175,
        a: 1
      };
      this.x2 = this.x1 + this.r * Math.cos(this.a * rad);
      this.y2 = this.y1 + this.r * Math.sin(this.a * rad);
      this.cx1 = this.x1 + this.r * Math.cos((this.a + this.num) * rad);
      this.cy1 = this.y1 + this.r * Math.sin((this.a + this.num) * rad);
      this.cx2 = this.x1 + this.r * Math.cos((this.a - this.num) * rad);
      this.cy2 = this.y1 + this.r * Math.sin((this.a - this.num) * rad);
      this.chord = 2 * this.r * Math.sin(this.num * rad / 2);
    };

    Heart.prototype.draw = function () {
      ctx = this.ctx;
      ctx.save();
      ctx.fillStyle = this.gradient();
      ctx.shadowColor = '#f9005f';
      ctx.shadowOffsetX = 5;
      ctx.shadowOffsetY = 5;
      ctx.shadowBlur = 5;
      ctx.beginPath();
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx1, this.cy1, this.chord, (270 + this.a) * rad, (270 + this.a + 225) * rad);
      ctx.lineTo(this.x1, this.y1);
      ctx.moveTo(this.x2, this.y2);
      ctx.arc(this.cx2, this.cy2, this.chord, (90 + this.a) * rad, (90 + this.a + 135) * rad, true);
      ctx.lineTo(this.x1, this.y1);
      ctx.fill();
      ctx.restore();
    };

    Heart.prototype.gradient = function () {
      var col = this.color.r + "," + this.color.g + "," + this.color.b;
      var g = this.ctx.createRadialGradient(this.x1, this.y1 - this.r / 1.5, 0, this.x1, this.y1 - this.r / 1.5, this.r);
      g.addColorStop(0, "rgba(" + col + ", " + (this.color.a * 0) + ")");
      g.addColorStop(0.5, "rgba(" + col + ", " + (this.color.a * 0.5) + ")");
      g.addColorStop(1, "rgba(" + col + ", " + (this.color.a * 1) + ")");
      return g;
    };

    Heart.prototype.render = function () {
      this.draw();
    };
    
    /********************
      Create
    ********************/
     
    for (var i = 0; i < heartNum; i++) {
      var heart = new Heart(ctx, X / 2, Y / 2, 150);
      hearts.push(heart);
    }

    for (var i = 0; i < miniHeartNum; i++) {
      var miniHeart = new MiniHeart(ctx, X / 2, Y / 2, rand(5, 30));
      miniHearts.push(miniHeart);
    }

    /********************
      Render
    ********************/
    
    function render() {
      ctx.clearRect(0, 0, X, Y);
      for (var i = 0; i < hearts.length; i++) {
        hearts[i].render();
      }
      for (var i = 0; i < miniHearts.length; i++) {
        miniHearts[i].render();
      }
      requestAnimationFrame(render);
    }

    render();

    /********************
      Resize
    ********************/
    
    function onResize() {
      X = canvas.width = window.innerWidth;
      Y = canvas.height = window.innerHeight;
      hearts[0].init(X / 2, Y / 2, 150);
    }

    /********************
      Event
    ********************/

    window.addEventListener('resize', function () {
      onResize();
    });

  });
  // Author
  console.log('File Name / mellomelloMellow.js\nCreated Date / January 15, 2020\nAuthor / Toshiya Marukubo\nTwitter / https://twitter.com/toshiyamarukubo');
})();

}
</script>




<style>
</style>
<script>
if(festival[1] == 4.4){
	console.log(festival[0]);
		$('html').css({"filter":"grayscale(100%)"});
	(function(){
		$(".dearmsdan-festival").attr("id","qingmingFestival");
var c = document.getElementById("qingmingFestival");
var ctx = c.getContext("2d");
var w = c.width = window.innerWidth;
var h = c.height = window.innerHeight;
var clearColor = 'rgba(0, 0, 0, .1)';
var max = 30;
var drops = [];

function random(min, max) {
    return Math.random() * (max - min) + min;
}

function O() {}

O.prototype = {
	init: function() {
		this.x = random(0, w);
		this.y = 0;
		this.color = 'hsl(180, 100%, 50%)';
		this.w = 2;
		this.h = 1;
		this.vy = random(4, 5);
		this.vw = 3;
		this.vh = 1;
		this.size = 2;
		this.hit = random(h * .8, h * .9);
		this.a = 1;
		this.va = .96;
	},
	draw: function() {
		if (this.y > this.hit) {
			ctx.beginPath();
			ctx.moveTo(this.x, this.y - this.h / 2);

			ctx.bezierCurveTo(
				this.x + this.w / 2, this.y - this.h / 2,
				this.x + this.w / 2, this.y + this.h / 2,
				this.x, this.y + this.h / 2);

			ctx.bezierCurveTo(
				this.x - this.w / 2, this.y + this.h / 2,
				this.x - this.w / 2, this.y - this.h / 2,
				this.x, this.y - this.h / 2);

			ctx.strokeStyle = 'hsla(180, 100%, 50%, '+this.a+')';
			ctx.stroke();
			ctx.closePath();
			
		} else {
			ctx.fillStyle = this.color;
			ctx.fillRect(this.x, this.y, this.size, this.size * 5);
		}
		this.update();
	},
	update: function() {
		if(this.y < this.hit){
			this.y += this.vy;
		} else {
			if(this.a > .03){
				this.w += this.vw;
				this.h += this.vh;
				if(this.w > 100){
					this.a *= this.va;
					this.vw *= .98;
					this.vh *= .98;
				}
			} else {
				this.init();
			}
		}
		
	}
}

function resize(){
	w = c.width = window.innerWidth;
	h = c.height = window.innerHeight;
}

function setup(){
	for(var i = 0; i < max; i++){
		(function(j){
			setTimeout(function(){
				var o = new O();
				o.init();
				drops.push(o);
			}, j * 200)
		}(i));
	}
}


function anim() {
	ctx.fillStyle = "#fff";
	ctx.fillRect(0,0,w,h);
	for(var i in drops){
		drops[i].draw();
	}
	requestAnimationFrame(anim);
}


window.addEventListener("resize", resize);

setup();
anim();		
	
	})()
}
</script>




<style>
	.navlan>li>a:hover, .navlan>li>a:focus, .navlan>li>a.active{
    background-color: rgba(9, 200, 255, 0.37);
    border-left: 5px solid rgb(78, 41, 222);
	}
	.navlan > li > div{
    background-color: #a4d9e2;
	}
	.navlan >li > div> ul> li:hover{
    background-color: #abf2f6!important
	}
canvas#childrensDay {
    display: block;
    background: #ABE7FF;
}
</style>
<script>
if(festival[1] == 6.1){
	console.log(festival[0]);
// 超链接
//$('a').css('color','#b23232');
// 导航栏
$('.navbar-default').css('background-color','rgba(187, 209, 255, 0.8)');
// 侧边栏
$('#dearmsdan .sidebar').css('background-color','rgba(148, 202, 255, 0.8)');
$('#dearmsdan .sidebar').css('box-shadow','none');
// 一级导航
$('.nav').addClass('navlan');
	
	
$(".dearmsdan-festival").attr("id","childrensDay");
		/*
* File Name / pinwheel.js
* Created Date / Aug 14, 2020
* Aurhor / Toshiya Marukubo
* Twitter / https://twitter.com/toshiyamarukubo
*/

(function () {
  'use strict';
  window.addEventListener('load', function () {
    var canvas = document.getElementById('childrensDay');

    if (!canvas || !canvas.getContext) {
      return false;
    }

    /********************
      Random Number
    ********************/

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1) + min);
    }
    
    /********************
      Var
    ********************/

    var ctx = canvas.getContext('2d');
    var X = canvas.width = window.innerWidth;
    var Y = canvas.height = window.innerHeight;
    var mouseX = null;
    var mouseY = null;
    var bubbles = [];
    var bubbleNum = 150;
    var shapes = [];
    var rad = Math.PI * 2 / 4;
    var style = {
      black: 'black',
      white: 'white',
      lineWidth: 4,
    };

    if (X < 768) {
      bubbleNum = 100;
    }

    /********************
      Animation
    ********************/

    window.requestAnimationFrame =
      window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function(cb) {
        setTimeout(cb, 17);
      };

    /********************
      Bubble
    ********************/

    function Bubble(ctx, x, y) {
      this.ctx = ctx;
      this.init(x, y);
    }
    
    Bubble.prototype.init = function(x, y) {
      this.x = x;
      this.y = y;
      this.r = rand(20, 50);
      this.ga = Math.random() * Math.random() * Math.random();
      this.v = {
        x: rand(-1, 1) * Math.random() * Math.random(),
        y: Math.random()
      };
      this.random = Math.random();
      this.a = rand(0, 360);
      this.rad = this.a * Math.PI / 180;
      this.as = rand(0, 360) * Math.PI / 180;
    };
    
    Bubble.prototype.draw = function() {
      var ctx  = this.ctx;
      ctx.save();
      ctx.fillStyle = 'white';
      ctx.strokeStyle = 'white';
      ctx.lineCap = 'round';
      ctx.lineWidth = this.r / 4;
      ctx.globalAlpha = this.ga;
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rad);
      ctx.translate(-this.x, -this.y);
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2, false);
      ctx.fill();
      ctx.globalAlpha = this.ga * 1.1;
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r * 0.7, this.as, this.as + 1, false);
      ctx.stroke();
      ctx.restore();
    };

    Bubble.prototype.updatePosition = function() {
      if (this.y > Y - Y / 3) {
        this.v.x += 0.1;
        this.v.y -= 0.01;
      }
      this.x += this.v.x;
      this.y += this.v.y;
    };

    Bubble.prototype.updateParams = function(i) {
      this.a += this.random;
      this.rad = this.a * Math.PI / 180;
    };

    Bubble.prototype.wrapPosition = function() {
      if (this.x > X + this.r / 2) {
        this.init(rand(0, X), rand(0 - Y / 5, 0));
      }
    };

    Bubble.prototype.render = function(i) {
      this.updateParams(i);
      this.updatePosition();
      this.wrapPosition();
      this.draw();
    };

    for (var i = 0; i < bubbleNum; i++) {
      var b = new Bubble(ctx, rand(0, X), rand(0, Y / 2));
      bubbles.push(b);
    }

    /********************
      Shape
    ********************/
     
    function Shape(ctx, x, y) {
      this.ctx = ctx;
      this.init(x, y);
    }
    
    Shape.prototype.init = function(x, y) {
      this.x = x;
      this.y = y;
      this.r = rand(20, 30);
      this.a = 0;
      this.rad = this.a * Math.PI / 180;
      this.random = Math.random();
      this.c = rand(0, 360);
      this.a1 = rand(-10, 10);
      this.rad1 = this.a1 * Math.PI / 180;
    };
    
    Shape.prototype.draw = function() {
      var ctx  = this.ctx;
      ctx.save();
      ctx.fillStyle = 'hsl(' + this.c + ', 100%, 80%)';
      ctx.strokeStyle = 'hsl(' + this.c + ', 80%, 60%)';
      ctx.translate(this.x, this.y);
      ctx.rotate(this.rad1);
      ctx.translate(-this.x, -this.y);
      ctx.lineWidth = this.r / 10;
      ctx.beginPath();
      ctx.moveTo(this.x, this.y);
      ctx.lineTo(this.x, Y + 10);
      ctx.stroke();
      ctx.lineWidth = 1;
      ctx.translate(this.x, this.y);
      ctx.rotate(Math.tan(this.rad));
      ctx.translate(-this.x, -this.y);
      ctx.fillRect(this.x - this.r, this.y - this.r, this.r * 2, this.r * 2);
      ctx.fillStyle = 'hsl(' + this.c + ', 80%, 60%)';
      for (var j = 0; j < 4; j++) {
        ctx.translate(this.x, this.y);
        ctx.rotate(90 * Math.PI / 180);
        ctx.translate(-this.x, -this.y);
        ctx.beginPath();
        ctx.moveTo(Math.cos(rad * 0) * this.r + this.x, Math.sin(rad * 0) * this.r + this.y + this.r);
        for (var i = 1; i < 4; i++) {
          if (i !== 2) {
            ctx.lineTo(Math.cos(rad * i) * this.r + this.x, Math.sin(rad * i) * this.r + this.y + this.r);
          }
        }
        ctx.closePath();
        ctx.fill();
      }
      ctx.restore();
    };

    Shape.prototype.updateParams = function() {
      this.a += this.random;
      this.rad = this.a * Math.PI / 180;
    };

    Shape.prototype.render = function(i) {
      this.updateParams();
      this.draw();
    };

    for (var i = 0; i < X;) {
      var dist = rand(1, 50);
      var s = new Shape(ctx, i += dist, rand(Y - Y / 3, Y - Y / 6));
      shapes.push(s);
    }

    /********************
      Render
    ********************/
    
    function render() {
      ctx.clearRect(0, 0, X, Y);
      for (var i = 0; i < shapes.length; i++) {
        shapes[i].render(i);
      }
      for (var i = 0; i < bubbles.length; i++) {
        bubbles[i].render(i);
      }
      requestAnimationFrame(render);
    }

    render();

    /********************
      Event
    ********************/
    
    function onResize() {
      X = canvas.width = window.innerWidth;
      Y = canvas.height = window.innerHeight;
      if (X < 768) {
        bubbleNum = 100;
      } else {
        bubbleNum = 200;
      }
      shapes = [];
      bubbles = [];
      for (var i = 0; i < X;) {
        var dist = rand(1, 50);
        var s = new Shape(ctx, i += dist, rand(Y - Y / 3, Y - Y / 6));
        shapes.push(s);
      }
      for (var i = 0; i < bubbleNum; i++) {
        var b = new Bubble(ctx, rand(0, X), rand(0, Y / 2));
        bubbles.push(b);
      }
    }

    window.addEventListener('resize', function() {
      onResize();
    });

    canvas.addEventListener('click', function(e) {
      mouseX = e.clientX;
      mouseY = e.clientY;
      var num = rand(1, 20);
      for (var i = 0; i < num; i++) {
        var b = new Bubble(ctx, rand(mouseX - 100, mouseX + 100), rand(mouseY - 100, mouseY + 100));
        bubbles.push(b);
      }
    }, false);

  });
})();

		
		
		
		
}
</script>




	

 
		<div class="dearmsdan-pjax">
		<script src="/js/pjax/jquery.pjax.js"></script>
			<script type="text/javascript">
$(document).ready(function () {
	$(document).pjax('a[target!=_blank]', '.main', {fragment: '.main',timeout: 8000});

	$(document).on('pjax:error', function() {
		alert("慢点吧，等等我~");
		  history.back();
	});
	
	$(document).on('pjax:start', function() {
		//加载延迟中...................
		$(".main-content").removeClass("wrapShow");
	});
	$(document).on('pjax:end', function() {
		//加载中...................
		$(".main-content").delay(500).addClass("wrapShow");
	});
	
	$(document).on('ready pjax:end', function(event) {
	linker();
	tocs();
	copycodes();
	postcolor();								 
	styleS();
	dearmsdanlazyload();
	
	}); /*end ready pjax*/

	
function linker(){
/* 外链保护http://link.zhd99.cn */
	 

		$("article a").not(".toc a,article h1 a,article h2 a,article h3 a,article h4 a,article h5 a,article h6 a,article .gallerys,.ui-artZoom-buttons a").attr("href",
																														function(){
			// 不是本站链接检测  article
			var str = this.href;
			var pattern = /http.+zhd99.cn/;
			var falg = pattern.test(str).toString().trim();

			var pattern2 = /http.+dearmsdan/;
			var falg2 = pattern2.test(str).toString().trim();
			if('true' != falg && 'true' != falg2){
				return 'http://link.dearmsdan.com/links.html' + '?target=' + str;
			   }
	});

	
}
		
	
/* .dearmsdan-post悬浮变色 */ 
function postcolor(){
	
$(".dearmsdan-post").mouseover(function(){
		
	// 随机 变化的淡入
var arr = ['0 4px 24px rgb(255, 255, 255)','0 4px 24px rgb(163, 163, 163)','0 4px 24px rgb(206, 154, 154)','0 4px 24px rgb(206, 154, 178)','0 4px 24px rgb(193, 154, 206)','0 4px 24px rgb(154, 158, 206)','0 4px 24px rgb(154, 187, 206)','0 4px 24px rgb(154, 206, 170)','0 4px 24px rgb(206, 200, 154)','0 4px 24px rgb(206, 180, 154)','0 4px 24px rgb(206, 154, 154)']; 
		
var index = Math.floor((Math.random()*arr.length)); 
	// 预期不佳
	$('.dearmsdan-post:hover').css("box-shadow",arr[index]);
		
});
	$(".dearmsdan-post").mouseleave(function(){
	// 移除
	$('.dearmsdan-post').css("box-shadow","none");
		
});
	
}/* end hoverColor  */
		
	
/*页面载入完成后，创建复制按钮*/
function copycodes(){
	
	/* 代码高度 判断 */
	
	 $("figure td pre").scroll(function(){
        $("figure td:nth-child(1) pre").scrollTop($(this).scrollTop()); // 纵向滚动条
        $("figure td:nth-child(2) pre").scrollLeft($(this).scrollLeft()); // 横向滚动条
    });
	
		!function (e, t, a) {
		  /* code */
		  var initCopyCode = function(){
			var copyHtml = '';
			copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
			copyHtml += '  <i class="fa fa-globe"></i><span>copy</span>';
			copyHtml += '</button>';
			  // 设置 放置位置↓
			$("figure td:nth-child(2) pre").before(copyHtml);
			  		//$("figure td:nth-child(2) pre").wrap("<div></div>");
			new ClipboardJS('.btn-copy', {
				target: function(trigger) {
					return trigger.nextElementSibling;
				}
			});
		  }
		  initCopyCode();
			
			
		}(window, document);
} /* end copycodes  */	
	

/* 目录  */
function tocs(){
	/* 目录图标被点击  */
	$('.second').on('click', function () {

		if (!$('body').hasClass('layout-fullwidth')) {
			$('body').addClass('layout-fullwidth');    // 初始出现

		} else {
			$('body').addClass('layout-fullwidth');    // 初始出现

		}

		if ($(window).innerWidth() < 1025) {
			if (!$('body').hasClass('offcanvas-active')) {
				$('body').removeClass('offcanvas-active');
			} else {
				$('body').removeClass('offcanvas-active');
			}
		}
	});
	/* 目录侧边栏 */
	if($('.second').length>0) {
	// 当前刷新目录产生
	$(".second").pageslide();
	} else {
		 window.onload = consoleTest;
function consoleTest(){
		console.log("\n %c hexo-theme-dearmsdan vbj %c https://github.com/ZHD99/hexo-theme-dearmsdan \n", "color: #FFF; background:#030307; padding:5px 0;", "background: #85adfede; padding:5px 0;");
		var str = function () {
/*
     _                                         _               
    | | It gives people a sense of emptiness  | |              
  __| |  ___   __ _  _ __  _ __ ___   ___   __| |  __ _  _ __  
 / _` | / _ \ / _` || '__|| '_ ` _ \ / __| / _` | / _` || '_ \ 
| (_| ||  __/| (_| || |   | | | | | |\__ \| (_| || (_| || | | |
 \__,_| \___| \__,_||_|   |_| |_| |_||___/ \__,_| \__,_||_| |_|
                                                               
欢迎您的到来，本站是一款Hexo宝钻蓝色主题，hexo-theme-dearmsdan                                              


*/
        }
		window.console.log(str.getMultiLine());

			
}/* end window.onload */ 
	}/* end else */ 
	
} /* end toc */

/*  移动端样式  */
function styleS(){
if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {

    // 背景色
	/*$("html").css("background-image","url('')");*/
	
	
    // 底部背景色
	$('.main').css('background','aliceblue');
	$('.main').css('max-height','100%');
	

	/* 首页 排版 */
	$('.dearmsdan-bg').css('box-shadow','none');
	$('.dearmsdan-bg').css('-webkit-box-shadow','none');
//	$('.main-content').css('background-color','#ECECEE');
	$('.dearmsdan-post').css('background-color','rgba(255, 255, 255, 0.52)');
	$('.dearmsdan-post').css('padding','30px');
	$('.dearmsdan-post').css('margin-bottom','20px');
	$('.main-content').addClass('m-content');
	$('.dearmsdan-title').css('opacity','1');
	
	/* 文章 内容页 排版 */
	$('.dearmsdan-bg div').removeClass('div_bg');
	$('.dearmsdan-bg div').addClass('divbg');
	$('.dearmsdan-bg div').css("background-color","rgba(255, 255, 255, 0.8)");
	$('#dearmsdanPost').addClass('dearmsdanPost');
	
	
	
		$('.dearmsdan-post').css('padding','15px');
		//$('.dearmsdan-post').css('background-color','rgba(223, 223, 223, 0.52)');
		$('.main').css('background','rgba(255, 255, 255, 0)');//#d6ecff
		$('.dearmsdan-bg').css('background','#254663');
	
	
	
	
	
	

	}else{
		
	
	
	}
} /* end styleS */	


/* 观察者模式 */
function Observer(){
	$('#dearmsdan-logo').click( 
		function () { 
			alert("你是观察者");
			$('.nav-list').addClass('dearmsdan-none');
			$('.dearmsdan-bg').addClass('dearmsdan-none');
			$('.main-content').addClass('dearmsdan-none');
			$('.container-fluid').addClass('dearmsdan-none');
			$('#dearmsdan-vbg').css("opacity","1");
			$('#dearmsdan-vbg').css("z-index","5201314");
			$('.navbar').css("background-color","transparent");
			$('.navbar').css("box-shadow","none");
			$('#dearmsdan-logo').css("position","relative");
			$('#dearmsdan-logo').css("left","-100px");
			console.log("你是观察者null");
			
		});
}/* end Observer */
	
													
/* 图片懒加载 */
function dearmsdanlazyload(){
		var imgs = document.querySelectorAll('img');
		
		//pimg.css('display','none');
		function lazyload(){
			var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
			var winTop = window.innerHeight;
			for(var i=0;i < imgs.length;i++){
				var flag=imgs[i].hasAttribute('dearmsdan-src');
				if(flag){
					imgs[i].src = imgs[i].getAttribute('dearmsdan-src');
				   }
			}
		}
		
	
		function throttle(method,delay){
			var timer = null;
				var context = this, args=arguments;
			/*return function(){*/
				clearTimeout(timer);
				timer=setTimeout(function(){
					method.apply(context,args);
				},delay);
			/*}*/
		}
	throttle(lazyload,200);
	
	
	/* 滚动指定位置加载该处的图片window.onscroll = throttle(lazyload,200); */
		
	
} /* end Obimg */
 if (window.addEventListener) { window.addEventListener("load",dearmsdanlazyload, false);} 
   else if (window.attachEvent) {window.attachEvent("onload",dearmsdanlazyload); }
    else{ window.onload = dearmsdanlazyload; }



});  /* end */
</script>
		</div>


	
	<link rel="stylesheet" type="text/css" href="/resources/toc/toc.css"> 
	<script src="/resources/toc/jquery.pageslide.js"></script> 
	
  <script type="text/javascript" src="/js/copycode/clipboard.min.js"></script>  


 
	
		

    </body>
</html>